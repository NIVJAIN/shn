<html lang="en-US" xmlns="http://www.w3.org/1999/xhtml">
  <head profile="http://gmpg.org/xfn/11">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>SHN Admin Portal</title>
    <meta property="og:site_name" content="Stay-Home-Notice Admin Portal">
    <meta property="og:title" content="Stay-Home-Notice Admin Portal">
    <meta name="description" content="An administrative portal for operators to configure the front-end and back-end services of the SHN app.">
    <meta property="og:description" content="An administrative portal for operators to configure the front-end and back-end services of the SHN app.">
    <meta property="og:description:secure_url" content="An administrative portal for operators to configure the front-end and back-end services of the SHN app.">
    <meta property="og:image" itemprop="image" content="/portal-moh-ad.png">
    <meta property="og:image:secure_url" itemprop="image" content="/portal-moh-ad.png">

    <link href="https://fonts.googleapis.com/css?family=Montserrat&amp;display=swap" rel="stylesheet">
    <link rel="icon" href="./favicon.ico" type="image/x-icon">

    <link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" crossorigin="anonymous">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
    integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
    crossorigin=""/>

    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
    integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
    crossorigin=""></script>
    <script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-image/v0.0.4/leaflet-image.js'></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dom-to-image/2.6.0/dom-to-image.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.10.2/jquery.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment-with-locales.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.15/lodash.min.js"></script>

    <style>
      body {
        font-family: 'Montserrat';
        background-color: lightgray;
        --scrollbar-thumb-color: gray;
        --scrollbar-color: #dfdfdf;
      }
      body.dark {
        background-color: #171e24;
        color: white;
        --scrollbar-thumb-color: #466d8a;
        --scrollbar-color: #263846;
      }
      .card {
        background-color: rgb(235, 235, 235);
      }
      .card-header {
        font-weight:900;
      }
      input, select {
        background-color: white;
        color: black;
      }
      body.dark input, body.dark select {
        background-color: #171e24;
        color: white;
      }
      a {
        color: grey;
      }
      #list-pins a {
        color: black;
      }
      body.dark a, body.dark #list-pins a {
        color: white;
      }
      .banner {
        display: flex;
        align-items: center;
        height: 8vh;
      }
      .bg-gradient-shnqo {
        background-color: #f787de;
        background-image: -webkit-gradient(linear, left top, left bottom, color-stop(10%, #f787de), to(#429be0));
        background-image: linear-gradient(90deg, #f787de 10%, #429be0 100%);
        background-size: cover;
      }
      body.dark .bg-gradient-shnqo {
        background-color: #bd68aa;
        background-image: -webkit-gradient(linear, left top, left bottom, color-stop(10%, #bd68aa), to(#3175a8));
        background-image: linear-gradient(90deg, #bd68aa 10%, #3175a8 100%);
        background-size: cover;
      }
      .bg-gradient-imda {
        background-color: #e01f34;
        background-image: -webkit-gradient(linear, left top, left bottom, color-stop(10%, #e01f34), to(#70358f));
        background-image: linear-gradient(90deg, #e01f34 10%, #70358f 100%);
        background-size: cover;
      }
      body.dark .bg-gradient-imda {
        background-color: #e01f34;
        background-image: -webkit-gradient(linear, left top, left bottom, color-stop(10%, #e01f34), to(#70358f));
        background-image: linear-gradient(270deg, #e01f34 10%, #70358f 100%);
        background-size: cover;
      }
      .logo-container {
        display: inline-block;
        width: 100%;
        padding: 0.5vh;
      }
      .logo { height: 7vh;}
      .left { float: left; }
      .right { float: right; }
      .col {
        background-color: rgb(128, 128, 128);
      }
      body.dark .col {
        background-color: #171e24;
      }
      body.dark .card {
        background-color: #1c2a35;
        color: white;
        border: 0px;
      }
      body.dark .card-header { border-bottom: 0px solid #9fa9b2; }
      body.dark .card-body { background-color: #2b4050; }
      body.dark .card-footer { border-top: 0px solid #9fa9b2; }
      body.dark hr { border: 1px solid #9fa9b2;}
      table {
        width: 100%;
      }
      body.dark table {
        background-color: #2b4050;
        color: lightgray;
      }
      body.dark table th {
        color: white;
      }
      .done {
        color: rgb(0,160,0);
      }
      .pending {
        color: rgb(200,160,0);
      }

      html>body #table-pins.scrollable-pins td {
        width: 28%;
      }
      html>body #table-pins.scrollable-pins td + td {
        width: 30%;
      }
      html>body #table-pins.scrollable-pins td + td + td {
        width: 26%;
      }
      html>body #table-pins.scrollable-pins td + td + td + td {
        text-align: center;
        width: 16%;
      }

      .scrollable-header-wrapper {
        font-weight: 600;
      }

      #list-pins-header div, #list-info-header div, #list-floating-header,
      #individual-checker-datetime-header div, #individual-checker-info-header div,
      #group-checker-datetime-header div, #group-checker-info-header div,
      #batch-upload-pin-header div, #batch-upload-info-header div,
      #trigger-pin-header div, #trigger-info-header div {
        font-weight: 600;
        cursor: pointer;
      }

      #list-pins-notch {
        cursor: pointer;
      }

      #list-info, #list-info-header {
        width: 2400px;
      }
      #group-checker-info, #group-checker-info-header,
      #individual-checker-info, #individual-checker-info-header {
        width: 900px;
      }
      #trigger-info, #trigger-info-header {
        width: 1180px;
      }
      #batch-upload-info, #batch-upload-info-header {
        width: 600px;
      }
      .checker-unit {
        width: 120px;
      }
      .checker-unit-lg {
        width: 160px;
      }
      .status-fail, .status-pass {
        font-weight: 600;
      }
      .status-fail {
        color: red;
      }
      .status-pass {
        color: green;
      }
      body.dark .status-pass {
        color: limegreen;
      }
      #list-pins-wrapper, #list-info-wrapper,
      #group-checker-datetime-wrapper, #group-checker-info-wrapper,
      #individual-checker-datetime-wrapper, #individual-checker-info-wrapper,
      #trigger-pin-wrapper, #trigger-info-wrapper {
        height: 100px;
      }
      #list-pins-wrapper.expanded, #list-info-wrapper.expanded,
      #group-checker-datetime-wrapper.expanded, #group-checker-info-wrapper.expanded,
      #individual-checker-datetime-wrapper.expanded, #individual-checker-info-wrapper.expanded,
      #trigger-pin-wrapper.expanded, #trigger-info-wrapper.expanded {
        height: 50vh;
      }

      #list-floating-wrapper, #batch-upload-pin-wrapper,
      #batch-upload-info-wrapper {
        height: 100px;
      }

      #list-floating-wrapper.expanded,
      #batch-upload-pin-wrapper.expanded,
      #batch-upload-info-wrapper.expanded {
        height: 50vh;
      }

      body.dark .content {
        background-color: rgba(255,255,255,0.075);
      }
      .content {
        background-color: rgba(0,0,0,0.075);
      }

      .vertical-scrollable-wrapper {
        width: 100%;
        overflow-x:hidden;
        overflow-y:scroll;
        scrollbar-color: var(--scrollbar-thumb-color) var(--scrollbar-color);
      }
      .horizontal-scrollable-wrapper {
        width: 100%;
        overflow-x:scroll;
        overflow-y:hidden;
        scrollbar-color: var(--scrollbar-thumb-color) var(--scrollbar-color);
      }
      .scrollable-hidden {
        overflow-x:hidden;
        overflow-y:hidden;
      }

      .v-mid {
        display: flex;
        align-items: center;
      }
      .t-center {
        text-align: center;
      }
      .div-unit {
        float: left;
        width: 160px;
      }
      .shade {
        background-color:rgba(0,0,0,0.125);
      }
      .global-holder {
        height: 92vh;
        overflow-y:scroll;
      }
      .global-wrapper {
        height: 100%;
      }

      #curtain {
        position: absolute;
        width:100%;
        height:92vh;
        /*background-color: rgba(50,50,50,0.75);*/
        background-color: gray;
        z-index: 1;
      }

      .login {
        position: absolute;
        width: 300px;
        height: 230px;
        left: calc(50% - 150px);
        top: calc(50% - 115px);
        z-index: 2;
      }
      #login-alert {
        text-align: center;
        font-size: 0.7em;
      }
      #login-alert, .error-alert {
        color: red;
      }
      body.dark #login-alert, body.dark .error-alert {
        color: pink;
      }
      .forgot-password, .commentary {
        font-size: 0.7em;
      }

      #trigger-alert, #input-list-pins-alert, #checker-alert,
      #input-count-newpin-alert, #input-newpin-alert,
      #batch-upload-alert, #sms-batch-alert {
        text-align: center;
        font-size: 0.8em;
      }

      .success-alert {
        color: green;
      }
      body.dark .success-alert {
        color: limegreen;
      }
      .warning-alert {
        color: darkorange;
      }

      .span-setting {
        color: lightgray;
        cursor: pointer;
      }
      body.dark .span-setting { color: gray; }
      
      .span-setting.chosen { color: black; }
      body.dark .span-setting.chosen { color: white; }

    </style>
  </head>
  <body class="dark">
    <!--START BANNER ROW-->
    <div class="row mx-0">
      <div class="col-12 px-0 banner bg-gradient-imda">
        <div class="logo-container" onclick="toggleDarkMode()">
          
          <div class="logo left">
            <svg version="1.1" viewBox="0 300 5200 2000" preserveAspectRatio="xMidYMid meet" class="svg-content logo left">
              <g transform="translate(0.000000,3200.000000) scale(0.1200000,-0.1200000)" fill="#FFFFFF" stroke="none">
                <path d="M4085 20293 c-1943 -1878 -2998 -2920 -3540 -3493 -148 -157 -304 -321 -346 -366 -79 -84 -135 -173 -164 -261 -9 -29 -21 -53 -26 -53 -5 0 -9 -79 -9 -185 0 -102 4 -185 8 -185 4 0 14 -21 21 -47 17 -56 79 -177 122 -236 103 -143 266 -258 444 -313 45 -14 93 -18 195 -19 116 0 145 3 205 24 88 30 168 74 222 124 24 22 48 37 55 34 9 -3 21 -96 41 -318 55 -615 196 -1751 220 -1775 3 -3 83 10 179 30 379 77 786 145 1042 176 44 5 131 16 191 24 61 8 211 25 335 37 124 12 239 23 255 24 28 3 239 17 468 31 l97 6 0 1574 0 1574 -65 0 c-36 0 -65 -2 -65 -5 0 -31 -456 -1643 -476 -1682 -91 -181 -360 -174 -448 11 -37 78 -35 85 238 1071 303 1094 297 1077 450 1230 153 152 239 181 681 231 226 26 635 23 870 -5 398 -47 496 -82 641 -226 79 -78 97 -103 142 -195 28 -58 58 -134 67 -170 9 -36 124 -453 256 -927 168 -607 239 -877 239 -913 0 -213 -272 -319 -425 -165 -53 52 -26 -32 -301 958 l-218 787 -63 0 -63 0 0 -1574 0 -1574 113 -6 c157 -9 426 -27 462 -31 17 -1 131 -12 255 -24 124 -12 275 -29 335 -37 61 -9 146 -19 190 -24 210 -23 698 -105 1013 -171 78 -16 155 -32 170 -34 l29 -3 21 136 c75 478 176 1350 219 1885 5 65 9 77 24 77 9 0 19 -3 21 -8 9 -22 111 -95 169 -121 99 -45 175 -61 287 -61 232 0 471 122 619 315 60 78 139 227 149 280 3 19 10 35 15 35 5 0 9 81 9 179 0 150 -2 180 -15 185 -8 3 -15 14 -15 25 0 10 -20 60 -45 110 -43 84 -64 109 -332 393 -389 411 -1790 1811 -2603 2599 -956 927 -1818 1759 -1822 1758 -2 0 -336 -322 -743 -716z m889 -1469 c267 -69 445 -326 408 -589 -45 -318 -366 -526 -691 -450 -206 49 -376 229 -411 437 -45 261 127 522 395 599 77 23 218 24 299 3z"/>
                <path d="M12840 21004 c-19 -2 -82 -9 -140 -15 -837 -88 -1405 -514 -1546 -1159 -28 -128 -26 -459 3 -586 52 -221 138 -379 293 -535 126 -126 249 -211 444 -305 198 -95 461 -178 931 -294 468 -115 609 -155 750 -212 321 -130 465 -296 465 -538 0 -271 -179 -464 -522 -564 -166 -48 -283 -61 -548 -61 -257 0 -333 7 -550 51 -370 76 -774 250 -1020 439 -32 25 -61 41 -65 36 -3 -6 -75 -166 -160 -358 l-155 -347 28 -23 c54 -46 219 -152 312 -201 642 -341 1610 -457 2345 -282 652 155 1081 540 1207 1080 28 122 35 392 14 522 -87 533 -457 864 -1211 1083 -88 26 -308 82 -490 126 -493 119 -683 177 -845 259 -233 117 -341 266 -341 470 0 100 13 162 52 245 94 200 318 334 654 391 127 22 425 29 570 15 343 -35 709 -146 1023 -313 63 -33 115 -58 116 -56 3 2 264 645 282 692 7 18 -76 70 -231 145 -278 136 -604 229 -965 277 -117 15 -609 28 -700 18z"/>
                <path d="M33045 20999 c-372 -36 -769 -155 -1075 -324 -546 -302 -950 -784 -1139 -1360 -88 -269 -120 -457 -128 -755 -8 -336 29 -594 128 -895 304 -918 1111 -1548 2146 -1674 l81 -10 54 -57 c94 -101 359 -343 488 -447 289 -232 554 -375 832 -446 183 -47 263 -56 508 -56 195 0 240 3 339 23 220 45 428 129 604 247 98 65 247 194 300 259 34 41 37 49 25 64 -61 78 -401 482 -405 482 -3 0 -41 -34 -85 -75 -193 -182 -416 -285 -657 -304 -116 -9 -249 0 -343 24 -151 38 -341 154 -498 305 l-74 72 116 39 c893 298 1512 1000 1673 1899 60 331 60 629 0 960 -202 1123 -1108 1917 -2315 2029 -132 13 -443 12 -575 0z m493 -800 c231 -25 405 -75 607 -175 167 -82 293 -172 425 -304 280 -280 440 -634 481 -1065 61 -642 -221 -1263 -726 -1597 -505 -335 -1206 -382 -1763 -118 -589 279 -942 860 -942 1550 0 831 520 1500 1301 1674 196 44 421 57 617 35z"/>
                <path d="M38935 20999 c-723 -69 -1382 -408 -1798 -924 -285 -353 -456 -756 -529 -1240 -18 -121 -18 -569 0 -690 44 -288 122 -547 236 -780 427 -872 1322 -1395 2386 -1395 1141 0 2082 601 2464 1574 233 589 233 1303 0 1892 -348 886 -1163 1469 -2184 1563 -132 13 -443 12 -575 0z m493 -800 c231 -25 405 -75 607 -175 167 -82 293 -172 425 -304 127 -128 220 -255 300 -415 291 -582 240 -1327 -128 -1845 -85 -121 -251 -286 -372 -373 -177 -126 -426 -234 -638 -276 -558 -113 -1104 12 -1514 346 -268 218 -473 557 -552 913 -132 602 23 1212 414 1624 357 376 905 566 1458 505z"/>
                <path d="M15840 18490 l0 -2450 455 0 455 0 0 1050 0 1050 1265 0 1265 0 0 -1050 0 -1050 455 0 455 0 0 2450 0 2450 -455 0 -455 0 0 -1010 0 -1010 -1265 0 -1265 0 0 1010 0 1010 -455 0 -455 0 0 -2450z"/>
                <path d="M21510 18490 l0 -2450 450 0 450 0 2 1653 3 1653 1345 -1651 1346 -1650 377 -3 377 -2 0 2450 0 2450 -450 0 -450 0 -2 -1653 -3 -1653 -1345 1651 -1346 1650 -377 3 -377 2 0 -2450z"/>
                <path d="M28159 20025 c-225 -35 -410 -141 -514 -295 -64 -94 -95 -188 -102 -306 -13 -210 61 -391 240 -589 l66 -72 -42 -23 c-23 -13 -88 -54 -144 -92 -188 -127 -308 -251 -378 -390 -61 -123 -79 -209 -72 -366 5 -151 25 -216 96 -325 138 -209 402 -350 730 -388 132 -16 380 -6 503 21 198 42 395 129 544 241 l79 59 80 -78 c44 -42 123 -119 175 -169 l95 -93 138 162 c76 89 136 165 135 168 -2 4 -80 80 -175 170 l-172 164 25 40 c47 76 122 240 157 346 36 110 72 249 66 254 -2 2 -93 33 -202 69 -134 45 -199 62 -202 54 -2 -7 -11 -46 -21 -87 -32 -137 -119 -374 -135 -368 -13 5 -589 559 -589 567 0 4 30 25 68 46 172 101 335 246 405 362 105 173 115 407 25 591 -48 99 -151 198 -259 251 -174 84 -394 111 -620 76z m362 -372 c129 -59 189 -216 130 -347 -38 -87 -177 -207 -348 -302 l-53 -29 -56 55 c-132 130 -195 245 -195 355 0 136 68 229 204 277 73 26 251 21 318 -9z m-25 -1512 c198 -189 360 -347 362 -352 4 -10 -97 -78 -175 -118 -119 -60 -222 -83 -388 -88 -128 -4 -163 -2 -237 16 -165 39 -274 114 -328 225 -36 76 -45 135 -31 212 17 89 65 178 136 249 64 64 270 208 291 203 6 -2 173 -158 370 -347z"/>
                <path d="M4775 14698 c-3 -7 -4 -265 -3 -573 l3 -560 55 0 55 0 0 570 0 570 -53 3 c-36 2 -54 -1 -57 -10z"/>
                <path d="M31880 14570 c-515 -63 -866 -281 -1010 -628 -54 -128 -73 -244 -67 -402 13 -321 142 -535 423 -702 168 -99 361 -164 814 -276 464 -115 627 -181 750 -302 76 -74 108 -135 123 -232 22 -139 -29 -287 -133 -389 -140 -137 -385 -209 -712 -209 -420 0 -819 127 -1106 352 -35 27 -65 48 -66 46 -31 -52 -177 -381 -173 -392 16 -40 236 -181 382 -244 312 -136 652 -199 1020 -189 370 9 647 83 870 231 271 181 415 446 415 766 0 390 -200 657 -617 824 -146 58 -281 98 -651 191 -340 85 -437 117 -567 183 -118 60 -222 160 -253 244 -46 124 -38 250 23 375 85 173 297 290 585 324 128 14 393 7 510 -15 189 -34 405 -112 560 -200 52 -29 98 -51 102 -47 10 9 158 372 158 387 0 15 -110 82 -216 130 -157 71 -349 127 -549 159 -118 19 -502 28 -615 15z"/>
                <path d="M11574 12799 c-434 -958 -790 -1746 -792 -1750 -2 -5 113 -9 256 -9 l259 0 193 440 193 440 927 0 927 0 193 -440 193 -440 263 0 c145 0 264 1 264 3 0 1 -357 787 -793 1747 l-792 1745 -251 3 -251 2 -789 -1741z m1410 379 c203 -458 370 -839 373 -845 4 -10 -149 -13 -747 -13 -598 0 -751 3 -747 13 44 109 742 1677 747 1677 4 0 172 -375 374 -832z"/>
                <path d="M14970 12790 l0 -1750 815 0 c504 0 853 4 913 11 996 108 1632 785 1632 1739 0 954 -636 1631 -1632 1739 -60 7 -409 11 -913 11 l-815 0 0 -1750z m1670 1299 c256 -31 463 -104 655 -230 109 -72 266 -233 334 -342 153 -248 221 -552 193 -857 -31 -327 -141 -577 -347 -785 -215 -218 -482 -341 -835 -384 -50 -7 -308 -11 -627 -11 l-543 0 0 1310 0 1310 543 0 c319 0 577 -4 627 -11z"/>
                <path d="M19100 12790 l0 -1750 240 0 240 0 2 1261 3 1261 630 -1051 630 -1051 112 0 113 0 33 53 c19 28 303 506 633 1060 l599 1008 3 -1270 2 -1271 240 0 240 0 0 1750 0 1750 -207 0 -208 0 -715 -1225 c-393 -673 -717 -1224 -720 -1224 -3 -1 -331 550 -730 1224 l-725 1224 -207 1 -208 0 0 -1750z"/>
                <path d="M23880 12790 l0 -1750 250 0 250 0 0 1750 0 1750 -250 0 -250 0 0 -1750z"/>
                <path d="M25430 12790 l0 -1750 250 0 250 0 2 1300 3 1300 1045 -1299 1045 -1300 208 -1 207 0 0 1750 0 1750 -250 0 -250 0 -2 -1300 -3 -1300 -1045 1299 -1045 1300 -207 1 -208 0 0 -1750z"/>
                <path d="M29490 12790 l0 -1750 250 0 250 0 0 1750 0 1750 -250 0 -250 0 0 -1750z"/>
                <path d="M33580 14320 l0 -220 600 0 600 0 0 -1530 0 -1530 250 0 250 0 0 1530 0 1530 598 2 597 3 3 218 2 217 -1450 0 -1450 0 0 -220z"/>
                <path d="M37030 12790 l0 -1750 1270 0 1270 0 0 220 0 220 -1020 0 -1020 0 0 560 0 560 878 2 877 3 3 213 2 212 -880 0 -880 0 0 535 0 535 985 0 985 0 0 220 0 220 -1235 0 -1235 0 0 -1750z"/>
                <path d="M40380 12790 l0 -1750 250 0 250 0 0 530 0 530 448 0 c246 0 490 3 542 6 l95 5 374 -535 374 -536 274 0 274 0 -19 28 c-10 15 -194 275 -407 577 -213 303 -389 555 -392 561 -2 6 28 23 66 38 91 36 214 110 303 183 249 204 388 522 388 891 0 688 -440 1127 -1212 1211 -60 7 -389 11 -853 11 l-755 0 0 -1750z m1570 1300 c296 -37 508 -150 632 -339 140 -214 155 -554 35 -801 -32 -67 -58 -102 -122 -166 -68 -68 -97 -89 -185 -133 -124 -61 -252 -95 -411 -110 -63 -6 -318 -11 -566 -11 l-453 0 0 785 0 785 493 0 c280 0 529 -4 577 -10z"/>
                <path d="M4775 13468 c-3 -7 -6 -371 -7 -808 l-3 -795 -23 -43 c-61 -115 -154 -173 -286 -180 -111 -5 -180 20 -257 97 -99 100 -93 39 -97 940 l-3 783 -137 -6 c-75 -4 -155 -9 -177 -11 -22 -3 -80 -7 -130 -10 -49 -3 -139 -10 -200 -16 -280 -25 -394 -38 -660 -74 -360 -49 -436 -61 -677 -105 -32 -5 -82 -14 -110 -19 -86 -15 -109 -20 -183 -36 -38 -9 -92 -20 -120 -25 -103 -20 -136 -28 -140 -32 -4 -4 59 -394 94 -578 11 -58 32 -168 46 -245 44 -236 162 -776 228 -1045 l63 -255 2831 -3 2831 -2 7 32 c4 18 35 150 70 293 59 239 104 443 183 825 33 158 132 698 157 851 20 129 20 139 -6 139 -12 0 -38 4 -58 9 -20 5 -63 15 -96 21 -33 6 -77 16 -98 21 -21 6 -53 12 -73 14 -19 3 -69 12 -112 20 -75 15 -126 24 -247 45 -54 10 -416 64 -505 75 -157 21 -357 45 -415 50 -38 4 -86 8 -105 10 -70 8 -257 24 -345 30 -49 3 -108 7 -130 10 -22 2 -104 7 -182 11 l-142 6 -3 -783 c-4 -901 2 -840 -97 -940 -77 -77 -146 -102 -257 -97 -132 7 -225 65 -286 180 l-23 43 -5 805 -5 805 -53 3 c-36 2 -54 -1 -57 -10z"/>
              </g>
                <!--
                <path d="M4611 20956 c-3410 -3409 -4345 -4350 -4384 -4407 -96 -146 -165 -314 -203 -494 -26 -126 -26 -384 0 -510 55 -264 169 -484 349 -672 200 -209 445 -344 724 -400 121 -24 384 -24 505 0 255 51 487 171 671 346 l77 74 0 -4097 0 -4096 6600 0 6600 0 0 4096 0 4097 78 -74 c183 -175 415 -295 670 -346 121 -24 384 -24 505 0 405 81 747 336 945 707 50 93 106 253 129 368 25 125 24 386 -1 507 -38 184 -108 350 -213 508 -33 49 -333 355 -1079 1099 l-1034 1031 0 2204 0 2203 -1100 0 -1100 0 0 -1102 0 -1103 -2198 2198 c-1208 1208 -2199 2197 -2202 2197 -3 0 -1955 -1950 -4339 -4334z m4581 565 c304 -80 563 -301 678 -578 61 -147 73 -212 73 -393 0 -181 -12 -246 -73 -393 -92 -223 -304 -435 -527 -527 -147 -61 -212 -73 -393 -73 -181 0 -246 12 -393 73 -223 92 -435 304 -527 527 -61 147 -73 212 -73 393 0 181 12 246 73 393 124 299 413 530 738 592 107 20 322 13 424 -14z m1252 -2304 c411 -129 721 -496 850 -1005 57 -223 56 -184 56 -2050 0 -1879 3 -1779 -57 -1882 -179 -305 -607 -305 -786 0 -60 103 -57 9 -57 1817 l0 1653 -100 0 -100 0 0 -4435 c0 -3199 -3 -4449 -11 -4487 -6 -29 -29 -91 -50 -137 -55 -117 -162 -225 -280 -280 -175 -82 -343 -82 -518 0 -118 55 -225 163 -280 280 -21 46 -44 108 -50 137 -8 38 -11 789 -11 2637 l0 2585 -100 0 -100 0 0 -2585 c0 -1848 -3 -2599 -11 -2637 -6 -29 -29 -91 -50 -137 -55 -117 -162 -225 -280 -280 -175 -82 -343 -82 -518 0 -118 55 -225 163 -280 280 -21 46 -44 108 -50 137 -8 38 -11 1288 -11 4487 l0 4435 -100 0 -100 0 0 -1653 c0 -1808 3 -1714 -57 -1817 -179 -305 -607 -305 -786 0 -60 103 -57 3 -57 1882 0 1492 2 1732 15 1835 85 643 463 1128 966 1238 53 11 295 13 1444 12 l1380 -2 89 -28z"/>
                <path d="M21205 20964 c-286 -28 -481 -66 -671 -129 -670 -224 -1044 -702 -1044 -1333 0 -416 165 -749 484 -976 257 -183 529 -285 1218 -455 244 -61 486 -123 539 -140 474 -146 669 -322 669 -605 0 -159 -44 -263 -159 -376 -87 -85 -169 -133 -307 -179 -268 -90 -718 -107 -1084 -41 -385 70 -778 230 -1058 430 -46 33 -86 60 -90 60 -4 0 -76 -156 -161 -347 -114 -258 -151 -351 -144 -362 32 -52 313 -222 496 -301 403 -172 846 -264 1332 -277 1045 -27 1782 351 2009 1030 51 155 61 226 60 442 -1 191 -2 205 -32 319 -105 400 -374 664 -879 865 -170 68 -370 125 -835 240 -518 129 -618 159 -794 247 -103 50 -147 78 -203 130 -121 112 -169 247 -150 419 32 293 275 488 699 562 140 25 553 25 710 0 285 -46 572 -139 838 -273 l164 -82 15 36 c9 21 73 179 144 352 l128 315 -22 17 c-42 33 -295 158 -411 203 -225 87 -501 155 -776 191 -118 15 -586 28 -685 18z"/>
                <path d="M24200 18450 l0 -2450 455 0 455 0 0 1050 0 1050 1265 0 1265 0 0 -1050 0 -1050 455 0 455 0 0 2450 0 2450 -455 0 -455 0 0 -1010 0 -1010 -1265 0 -1265 0 0 1010 0 1010 -455 0 -455 0 0 -2450z"/>
                <path d="M29870 18450 l0 -2450 450 0 450 0 2 1654 3 1655 1348 -1655 1349 -1654 374 0 374 0 0 2450 0 2450 -450 0 -450 0 -2 -1654 -3 -1655 -1348 1655 -1349 1654 -374 0 -374 0 0 -2450z"/>
                <path d="M31550 14529 c-782 -96 -1373 -590 -1559 -1301 -49 -188 -56 -247 -56 -478 0 -231 7 -290 56 -478 189 -722 796 -1220 1588 -1303 142 -15 432 -7 556 16 213 38 450 117 604 202 433 239 731 620 850 1084 49 191 56 249 56 479 0 230 -7 288 -56 479 -119 464 -417 845 -850 1084 -153 85 -389 164 -604 203 -106 19 -471 28 -585 13z m540 -464 c273 -61 495 -179 675 -360 187 -188 308 -421 360 -695 13 -68 19 -142 19 -260 0 -183 -16 -293 -65 -443 -109 -334 -356 -615 -672 -766 -177 -84 -335 -120 -557 -128 -272 -9 -465 29 -685 137 -270 131 -460 319 -591 585 -101 202 -138 368 -138 615 0 176 14 276 59 425 31 103 118 279 183 371 195 275 520 471 877 529 120 19 429 13 535 -10z"/>
                <path d="M39370 14529 c-637 -74 -1168 -435 -1431 -974 -206 -423 -237 -945 -84 -1403 87 -261 211 -460 409 -657 145 -145 264 -234 425 -318 401 -209 910 -273 1370 -171 303 68 547 189 768 383 133 116 131 107 32 208 -46 46 -119 116 -161 155 l-78 70 -68 -61 c-136 -122 -252 -197 -402 -258 -172 -71 -344 -98 -575 -90 -239 9 -411 51 -600 147 -128 65 -212 126 -323 234 -188 183 -305 401 -363 676 -18 86 -22 137 -22 280 0 143 4 194 22 280 58 275 175 493 363 676 193 188 399 297 670 355 137 30 399 37 543 15 258 -40 501 -157 682 -329 l73 -69 165 158 166 159 -97 92 c-248 239 -573 386 -967 438 -127 16 -391 18 -517 4z"/>
                <path d="M19670 12750 l0 -1750 1270 0 1270 0 0 220 0 220 -1020 0 -1020 0 0 560 0 560 878 2 877 3 3 213 2 212 -880 0 -880 0 0 535 0 535 985 0 985 0 0 220 0 220 -1235 0 -1235 0 0 -1750z"/>
                <path d="M23020 12750 l0 -1750 250 0 250 0 2 1300 3 1300 1045 -1299 1045 -1300 208 -1 207 0 0 1750 0 1750 -250 0 -250 0 -2 -1300 -3 -1300 -1045 1299 -1045 1300 -207 1 -208 0 0 -1750z"/>
                <path d="M27080 12750 l0 -1750 250 0 250 0 0 710 0 710 880 0 880 0 0 215 0 215 -880 0 -880 0 0 605 0 605 985 0 985 0 0 220 0 220 -1235 0 -1235 0 0 -1750z"/>
                <path d="M34420 12750 l0 -1750 250 0 250 0 0 530 0 530 448 0 c246 0 490 3 542 6 l95 5 374 -535 374 -536 274 0 274 0 -19 28 c-10 15 -194 275 -407 577 -213 303 -389 555 -392 561 -2 6 28 23 66 38 91 36 214 110 303 183 249 204 388 522 388 891 0 688 -440 1127 -1212 1211 -60 7 -389 11 -853 11 l-755 0 0 -1750z m1570 1300 c296 -37 508 -150 632 -339 140 -214 155 -554 35 -801 -32 -67 -58 -102 -122 -166 -68 -68 -97 -89 -185 -133 -124 -61 -252 -95 -411 -110 -63 -6 -318 -11 -566 -11 l-453 0 0 785 0 785 493 0 c280 0 529 -4 577 -10z"/>
                <path d="M41670 12750 l0 -1750 1270 0 1270 0 0 220 0 220 -1020 0 -1020 0 0 560 0 560 878 2 877 3 3 213 2 212 -880 0 -880 0 0 535 0 535 985 0 985 0 0 220 0 220 -1235 0 -1235 0 0 -1750z"/>
                <path d="M45020 12750 l0 -1750 250 0 250 0 0 530 0 530 448 0 c246 0 490 3 542 6 l95 5 374 -535 374 -536 274 0 274 0 -19 28 c-10 15 -194 275 -407 577 -213 303 -389 555 -392 561 -2 6 28 23 66 38 91 36 214 110 303 183 249 204 388 522 388 891 0 688 -440 1127 -1212 1211 -60 7 -389 11 -853 11 l-755 0 0 -1750z m1570 1300 c296 -37 508 -150 632 -339 140 -214 155 -554 35 -801 -32 -67 -58 -102 -122 -166 -68 -68 -97 -89 -185 -133 -124 -61 -252 -95 -411 -110 -63 -6 -318 -11 -566 -11 l-453 0 0 785 0 785 493 0 c280 0 529 -4 577 -10z"/>
              </g>
              -->
            </svg>
          </div>

          <div class="logo right">
            <svg version="1.1" viewBox="0 -108 1418 600" preserveAspectRatio="xMidYMid meet" class="svg-content logo right">
              <g transform="translate(0.000000,357.000000) scale(0.100000,-0.100000)" fill="#FFFFFF" stroke="none">
                <path d="M8393 3551 c-117 -42 -208 -143 -234 -255 -19 -88 -8 -213 26 -282 72 -146 217 -223 401 -212 148 9 269 91 332 225 24 51 27 70 27 163 0 93 -3 111 -27 163 -72 153 -184 217 -377 217 -68 -1 -111 -6 -148 -19z m269 -177 c52 -36 78 -87 85 -162 7 -71 -8 -121 -50 -168 -37 -43 -68 -59 -130 -68 -86 -13 -175 45 -205 133 -27 78 -9 186 41 240 62 68 182 80 259 25z"/>
                <path d="M9283 3555 c-106 -33 -196 -115 -234 -214 -17 -43 -22 -78 -23 -151 0 -82 3 -103 26 -152 38 -82 75 -126 141 -169 107 -69 258 -86 370 -42 59 23 137 79 137 97 0 8 -27 37 -59 65 l-59 52 -45 -32 c-65 -45 -129 -50 -199 -16 -60 30 -91 70 -109 139 -24 101 21 207 105 248 66 31 149 25 201 -14 l37 -29 62 62 61 62 -35 29 c-63 53 -148 80 -248 79 -48 0 -106 -6 -129 -14z"/>
                <path d="M9983 3556 c-185 -60 -287 -235 -254 -435 25 -152 125 -263 275 -306 79 -23 209 -16 289 14 71 28 153 104 193 181 27 52 29 62 29 180 0 121 -1 127 -32 186 -38 72 -96 127 -172 162 -49 23 -71 27 -171 29 -77 2 -129 -2 -157 -11z m222 -165 c151 -68 164 -307 21 -387 -147 -82 -298 12 -300 186 -2 163 139 265 279 201z"/>
                <path d="M0 1786 c0 -971 3 -1766 6 -1766 3 0 178 91 390 202 l384 202 0 1355 0 1356 -380 205 c-210 113 -385 207 -390 208 -7 2 -10 -633 -10 -1762z"/>
                <path d="M2043 3342 l-382 -207 -1 -1355 0 -1355 381 -200 c209 -110 387 -201 395 -203 12 -3 14 244 14 1762 0 1407 -3 1766 -12 1765 -7 0 -185 -94 -395 -207z"/>
                <path d="M3660 3543 c0 -21 785 -1762 791 -1756 6 7 757 1682 780 1741 l9 22 -790 0 c-435 0 -790 -3 -790 -7z"/>
                <path d="M6450 3185 l0 -365 90 0 90 0 0 365 0 365 -90 0 -90 0 0 -365z"/>
                <path d="M6780 3185 l0 -366 88 3 87 3 -3 228 c-1 125 0 227 2 227 2 0 68 -104 146 -230 l143 -231 101 3 101 3 3 363 2 362 -90 0 -90 0 -2 -224 -3 -225 -138 225 -139 224 -104 0 -104 0 0 -365z"/>
                <path d="M7600 3185 l0 -366 93 3 92 3 3 138 3 137 139 0 140 0 0 80 0 80 -140 0 -140 0 0 70 0 70 150 0 150 0 0 75 0 75 -245 0 -245 0 0 -365z"/>
                <path d="M10610 3185 l0 -365 85 0 85 0 0 243 1 242 87 -243 87 -243 64 3 65 3 88 240 c48 132 89 243 90 248 2 4 1 -105 -1 -243 l-3 -250 91 0 91 0 0 365 0 365 -129 0 -129 0 -67 -197 c-38 -109 -73 -210 -79 -226 -10 -25 -17 -10 -91 198 l-80 225 -127 0 -128 0 0 -365z"/>
                <path d="M11590 3185 l0 -365 85 0 85 0 0 248 1 247 88 -245 88 -245 64 -3 65 -3 89 246 90 246 3 -246 2 -246 88 3 87 3 3 363 2 362 -132 0 -133 0 -75 -220 c-41 -121 -77 -220 -80 -220 -3 0 -39 98 -81 218 l-76 217 -131 3 -132 3 0 -366z"/>
                <path d="M6450 2255 l0 -365 85 0 85 0 1 238 0 237 86 -237 86 -238 67 0 68 0 72 198 c40 108 80 216 89 239 16 40 16 31 13 -197 l-4 -240 91 0 91 0 0 365 0 365 -129 0 -129 0 -67 -197 c-36 -109 -71 -211 -78 -226 -12 -27 -16 -17 -91 197 l-79 226 -128 0 -129 0 0 -365z"/>
                <path d="M7410 2255 l0 -365 255 0 255 0 0 75 0 75 -170 0 -170 0 0 70 0 70 150 0 150 0 0 80 0 80 -150 0 -150 0 0 60 0 60 160 0 160 0 0 80 0 80 -245 0 -245 0 0 -365z"/>
                <path d="M8010 2255 l0 -365 170 0 c93 0 193 5 222 11 204 44 318 208 288 417 -11 79 -40 140 -93 192 -86 86 -174 110 -419 110 l-168 0 0 -365z m367 190 c97 -29 146 -117 129 -227 -18 -109 -110 -168 -261 -168 l-45 0 0 205 0 205 63 0 c35 0 86 -7 114 -15z"/>
                <path d="M8790 2255 l0 -365 90 0 90 0 0 365 0 365 -90 0 -90 0 0 -365z"/>
                <path d="M9195 2264 c-82 -195 -152 -360 -153 -365 -3 -6 35 -9 98 -7 l103 3 26 68 26 67 136 0 136 0 25 -67 25 -68 101 -3 c56 -1 102 1 102 5 0 4 -66 169 -147 365 l-148 358 -90 0 -90 0 -150 -356z m273 36 c17 -47 33 -93 37 -102 6 -16 -1 -18 -74 -18 -45 0 -81 3 -81 6 0 19 76 212 81 206 3 -4 20 -45 37 -92z"/>
                <path d="M3320 1157 l0 -1137 455 0 c297 0 455 3 455 10 0 14 -891 2243 -901 2255 -5 5 -9 -498 -9 -1128z"/>
                <path d="M5551 2268 c-5 -13 -206 -516 -446 -1118 -241 -602 -440 -1103 -442 -1112 -5 -17 21 -18 451 -18 l456 0 0 1135 c0 624 -2 1135 -5 1135 -3 0 -9 -10 -14 -22z"/>
                <path d="M10000 1685 c-108 -30 -194 -109 -238 -218 -21 -54 -24 -72 -20 -166 3 -98 6 -111 37 -169 41 -76 104 -135 179 -170 83 -38 232 -44 327 -12 85 28 171 105 215 192 28 57 30 69 30 169 0 143 -21 202 -99 280 -76 76 -142 101 -276 105 -68 3 -118 -1 -155 -11z m193 -156 c58 -16 114 -72 132 -132 19 -64 19 -102 0 -158 -30 -88 -95 -133 -192 -134 -52 0 -68 4 -105 30 -117 81 -124 276 -14 360 57 43 110 53 179 34z"/>
                <path d="M6450 1315 l0 -365 158 0 c172 0 252 11 319 42 66 31 138 102 170 166 25 51 28 68 28 157 0 93 -2 105 -33 167 -34 69 -87 124 -146 152 -76 36 -148 46 -323 46 l-173 0 0 -365z m378 189 c78 -32 112 -87 112 -179 0 -135 -84 -205 -247 -205 l-63 0 0 206 0 207 81 -7 c45 -4 98 -13 117 -22z"/>
                <path d="M7220 1315 l0 -365 260 0 260 0 0 80 0 80 -170 0 -170 0 0 70 0 70 150 0 150 0 0 75 0 75 -150 0 -150 0 0 65 0 65 160 0 160 0 0 75 0 75 -250 0 -250 0 0 -365z"/>
                <path d="M7805 1643 c8 -21 71 -184 139 -363 l123 -325 91 -3 c66 -2 91 1 95 10 3 7 64 166 137 353 73 187 134 346 137 353 4 10 -17 12 -98 10 l-103 -3 -82 -250 -81 -250 -82 253 -82 252 -104 0 -105 0 15 -37z"/>
                <path d="M8610 1315 l0 -365 255 0 255 0 0 80 0 80 -165 0 -165 0 0 70 0 70 150 0 150 0 0 75 0 75 -150 0 -150 0 0 65 0 65 155 0 155 0 0 75 0 75 -245 0 -245 0 0 -365z"/>
                <path d="M9230 1315 l0 -365 230 0 230 0 0 80 0 80 -140 0 -140 0 0 285 0 285 -90 0 -90 0 0 -365z"/>
                <path d="M10620 1316 l0 -366 95 0 95 0 0 134 0 133 93 5 c187 10 277 85 277 233 0 75 -15 119 -56 157 -59 55 -92 62 -306 66 l-198 4 0 -366z m348 198 c17 -12 22 -25 22 -59 0 -58 -26 -76 -120 -83 l-70 -5 0 82 0 81 73 0 c49 0 80 -5 95 -16z"/>
                <path d="M11250 1315 l0 -365 88 0 89 0 -4 243 -3 242 53 -145 c29 -80 69 -189 88 -242 l34 -98 66 0 c54 0 68 3 74 18 3 9 43 116 87 237 44 121 83 222 85 225 3 3 2 -104 -2 -237 l-7 -243 91 0 91 0 0 365 0 365 -128 0 -127 0 -69 -202 c-38 -112 -74 -214 -79 -228 -8 -22 -16 -5 -63 130 -29 85 -66 188 -80 228 l-26 72 -129 0 -129 0 0 -365z"/>
                <path d="M12230 1315 l0 -365 255 0 255 0 0 80 0 80 -165 0 -165 0 0 70 0 70 150 0 150 0 0 75 0 75 -150 0 -150 0 0 65 0 65 160 0 160 0 0 75 0 75 -250 0 -250 0 0 -365z"/>
                <path d="M12850 1315 l0 -365 90 0 90 0 -6 233 c-4 161 -2 227 5 217 6 -8 71 -112 144 -230 l133 -215 102 -3 102 -3 0 366 0 365 -85 0 -85 0 -2 -227 -3 -226 -140 226 -140 227 -102 0 -103 0 0 -365z"/>
                <path d="M13590 1605 l0 -75 105 0 105 0 0 -290 0 -290 90 0 90 0 0 290 0 290 100 0 100 0 0 75 0 75 -295 0 -295 0 0 -75z"/>
                <path d="M9573 741 c-76 -28 -139 -77 -183 -143 -48 -72 -64 -141 -58 -249 8 -147 74 -250 200 -313 70 -36 72 -36 197 -36 118 0 130 2 186 29 73 34 146 110 183 189 24 51 27 69 27 162 0 95 -3 111 -29 168 -41 89 -124 165 -212 192 -88 27 -237 27 -311 1z m233 -160 c141 -64 163 -292 35 -378 -87 -59 -184 -50 -256 21 -62 62 -80 149 -50 237 39 113 164 169 271 120z"/>
                <path d="M6607 403 c-80 -192 -149 -356 -153 -365 -6 -16 3 -18 94 -18 l99 0 25 68 25 67 135 3 136 3 27 -71 27 -70 104 0 c58 0 103 3 101 7 -2 5 -71 169 -153 366 l-148 357 -86 0 -86 0 -147 -347z m272 25 c19 -51 36 -99 38 -105 4 -10 -15 -13 -77 -13 -62 0 -81 3 -77 13 2 6 19 54 38 105 18 50 36 92 39 92 3 0 21 -42 39 -92z"/>
                <path d="M7250 492 c0 -285 7 -329 59 -392 16 -20 53 -49 82 -65 46 -25 68 -30 145 -33 121 -6 185 13 252 73 83 75 86 88 90 403 l3 273 -93 -3 -93 -3 -5 -252 c-5 -235 -6 -253 -26 -280 -38 -51 -123 -64 -180 -27 -49 33 -54 63 -54 323 l0 241 -90 0 -90 0 0 -258z"/>
                <path d="M7950 670 l0 -80 105 0 105 0 0 -285 0 -285 90 0 90 0 0 285 0 285 105 0 106 0 -3 78 -3 77 -297 3 -298 2 0 -80z"/>
                <path d="M8617 744 c-4 -4 -7 -169 -7 -366 l0 -358 95 0 95 0 0 150 0 150 135 0 135 0 0 -150 0 -150 90 0 90 0 0 365 0 365 -90 0 -90 0 0 -140 0 -140 -135 0 -134 0 -3 138 -3 137 -85 3 c-47 1 -89 0 -93 -4z"/>
                <path d="M10210 385 l0 -365 90 0 90 0 0 140 0 140 28 0 c24 0 34 -13 102 -138 l75 -137 108 -3 c59 -1 107 0 107 2 0 3 -41 72 -90 153 l-90 147 33 18 c134 68 150 273 28 354 -69 45 -119 54 -308 54 l-173 0 0 -365z m350 187 c30 -23 37 -65 16 -97 -16 -24 -85 -45 -151 -45 l-35 0 0 86 0 87 72 -6 c47 -4 81 -13 98 -25z"/>
                <path d="M10890 385 l0 -365 90 0 90 0 0 365 0 365 -90 0 -90 0 0 -365z"/>
                <path d="M11140 670 l0 -80 100 0 100 0 0 -285 0 -285 95 0 95 0 0 285 0 285 100 0 100 0 0 80 0 80 -295 0 -295 0 0 -80z"/>
                <path d="M11780 743 c0 -3 61 -100 135 -214 l135 -207 0 -151 0 -151 90 0 90 0 0 148 0 147 140 210 c77 116 140 213 140 218 0 4 -47 7 -104 7 l-105 0 -71 -125 c-39 -69 -75 -125 -80 -125 -5 0 -41 56 -80 125 l-71 125 -110 0 c-60 0 -109 -3 -109 -7z"/>
              </g>
            </svg>
          </div>

        </div>
      </div>
      
    </div>
    <!--END BANNER ROW-->

    <!--START BODY ROW-->
      
    <div id="login" class="login card fade">
      <div class="card-header">
        Login
      </div>
      <div class="card-body py-0">
        <div class="row mt-2 v-mid">
          <div class="col-12" id="login-alert">
            &nbsp;
          </div>
        </div>
        <div class="row mt-2 v-mid">
          <div class="col-5">
            User:
          </div>
          <div class="col-7">
            <input type="text" id="input-userid" style="width:9rem;" />
          </div>
        </div>
        <div class="row mt-2 v-mid">
          <div class="col-5">
            Password:
          </div>
          <div class="col-7">
            <input type="password" id="input-password" style="width:9rem;" />
          </div>
        </div>
        <div class="row mt-0 v-mid">
          <div class="col-5"></div>
          <div class="col-7 t-center">
            <a class="forgot-password" 
            href="mailto:Digital_Services@imda.gov.sg?subject=Forgotten SHN Portal Password">
              Forgot Password
            </a>
          </div>
        </div>
        <div class="row mt-3 v-mid">
          <div class="col-12 px-2" style="text-align:right;">
            <input type="button" class="mr-1" value="Cancel"/> <!--onclick="window.location.replace('https://www.locationreport.gov.sg');">-->
            <input type="button" onclick="login()" value="Login">
          </div>
        </div>
      </div>
    </div>
    <div id="curtain" class="fade show"></div>

    <div class="global-holder" id="holder">
      <div class="global-wrapper">
        
        <div class="row mx-0">
          <!--START FIRST COLUMN-->
          <div class="col col-sm-12 col-lg-8 px-0">

            <!--PIN INFO CARD-->
            <div class="card mx-1 my-1">

              <!--PIN INFO DISPLAY-->
              <div class="card-header px-1 py-2">
                PIN Management
              </div>
              <!--BODY-->
              <div class="card-body px-1 py-1">
                <div class="row mx-0 my-0">
                  <div class="col-6 col-sm-4 col-xl-3 px-0 py-0">
                    
                    <div>
                      <div id="list-pins-header" class="row mx-0 my-0">
                        <div class="col-7 px-1 py-0" id="list-info-pin"
                            onclick="sortAndBuildPinDetails(this.id)">
                          PIN
                        </div>
                        <div class="col-5 px-1 py-0"
                            onclick="selectAllCheckboxes('config', 'checkbox-configure')">
                          Config
                        </div>
                      </div>
                    </div>
            
                    <div id="list-pins-wrapper"
                        class="vertical-scrollable-wrapper">
                      <div id="list-pins" class="row mx-0 my-0">
            
                        <div class="col-12">
                          &nbsp;
                        </div>
            
                      </div>
                    </div>
            
                  </div>
                  <div class="col-6 col-sm-8 col-xl-9 px-0 py-0 content">
            
                    <div id="list-header-wrapper"
                        class="horizontal-scrollable-wrapper
                                scrollable-hidden">
                      <div id="list-info-header" class="row mx-0 my-0">
                      <!--
                        <div class="col-1 px-1 py-0" id="list-info-mobile"
                            onclick="sortAndBuildPinDetails(this.id)">
                          Mobile
                        </div>
                        <div class="col-1 px-1 py-0" id="list-info-start"
                            onclick="sortAndBuildPinDetails(this.id)">
                          SHN Start
                        </div>
                      -->
                        <!--<div class="col-1 px-1 py-0" id="list-info-end"-->
                        <div class="div-unit px-1 py-0" id="list-info-mobile"
                            onclick="sortAndBuildPinDetails(this.id)">
                          Mobile
                        </div>
                        <div class="div-unit px-1 py-0" id="list-info-start"
                            onclick="sortAndBuildPinDetails(this.id)">
                          SHN Start
                        </div>
                        <div class="div-unit px-1 py-0" id="list-info-end"
                            onclick="sortAndBuildPinDetails(this.id)">
                          SHN End
                        </div>
                        <div class="div-unit px-1 py-0" id="list-info-min_alt"
                            onclick="sortAndBuildPinDetails(this.id)">
                          Min. Altitude
                        </div>
                        <div class="div-unit px-1 py-0" id="list-info-max_alt"
                            onclick="sortAndBuildPinDetails(this.id)">
                          Max. Altitude
                        </div>
                        <div class="div-unit px-1 py-0" id="list-info-min_dist"
                            onclick="sortAndBuildPinDetails(this.id)">
                          Min. Distance
                        </div>
                        <div class="div-unit px-1 py-0" id="list-info-max_dist"
                            onclick="sortAndBuildPinDetails(this.id)">
                          Max. Distance
                        </div>
                        <div class="div-unit px-1 py-0" id="list-info-max_vltn"
                            onclick="sortAndBuildPinDetails(this.id)">
                          Max. Violations
                        </div>
                        <div class="div-unit px-1 py-0" id="list-info-upd_freq"
                            onclick="sortAndBuildPinDetails(this.id)">
                          Update Freq.
                        </div>
                        <div class="div-unit px-1 py-0" id="list-info-last_update"
                            onclick="sortAndBuildPinDetails(this.id)">
                          Last Update
                        </div>
                        <div class="div-unit px-1 py-0" id="list-info-bio_last_update"
                            onclick="sortAndBuildPinDetails(this.id)">
                          Last Bio. Push
                        </div>
                        <div class="div-unit px-1 py-0" id="list-info-bio_last_update"
                            onclick="sortAndBuildPinDetails(this.id)">
                          Last Bio. Upd.
                        </div>
                        <div class="div-unit px-1 py-0"
                          onclick="selectAllCheckboxes('config', 'checkbox-ad-hoc-push')">
                          Ad-hoc Push
                        </div>
                        <div class="div-unit px-1 py-0">
                          Multi Login
                        </div>
                        <div class="div-unit px-1 py-0">
                          Suspended
                        </div>
                        <div class="d-none div-unit px-1 py-0">
                          Watch List
                        </div>
            
                      </div>
                    </div>
            
                    <div id="list-info-wrapper"
                        class="horizontal-scrollable-wrapper">
                      <div id="list-info" class="row mx-0 my-0">
            
                        <div class="col-12 px-1 py-0">
                          &nbsp;
                        </div>
            
                      </div>
                    </div>
            
                  </div>
                </div>
                <div class="row mx-0 mt-1">
                  <div class="col-12 px-0" style="text-align:center;">
                    <i class="fa fa-bars" aria-hidden="true"
                      id="list-pins-notch"></i>
                  </div>
                </div>
                <div class="row mx-0 my-0">
                  <div class="col-12 px-0 py-0" style="text-align:right;">
                    <span id="trigger-alert">&nbsp;</span>&nbsp;
                    <input type="button" value="Refresh" class="mt-2 mb-0"
                      onclick="getReqCallbackAuth(`${get_all}/${orgid}`, loadPinDetails);"/>
                    <input type="button" value="Trigger"
                      id="btn-list-pins-trigger"/>
                  </div>
                </div>
                <hr class="mb-0 mt-2 mb-1">

                <div class="row mx-0 my-0">
                  <div class="col-12 px-0 py-0" id="input-list-pins-alert">
                    &nbsp;
                  </div>
                </div>

                <div class="row mx-0">
                  
                  <div class="col-5 col-md-2 px-1 mt-2 v-mid">
                    SHN Start:
                  </div>
                  <div class="col-7 col-md-4 px-1 mt-2 v-mid">
                    <input type="date" id="input-list-pins-start" style="width:10rem;"
                    onchange="">
                  </div>
                  <div class="col-5 col-md-2 px-1 mt-2 v-mid">
                    SHN End:
                  </div>
                  <div class="col-7 col-md-4 px-1 mt-2 v-mid">
                    <input type="date" id="input-list-pins-end" style="width:10rem;"
                    onchange="">
                  </div>
                </div>

                <div class="row mx-0">
                  <div class="col-12 px-1 mt-2" style="text-align: center;">
                    - OR -
                  </div>
                </div>
                  
                <div class="row mx-0">
                  <div class="col-5 col-md-2 px-1 mt-2 v-mid">
                    Maximum<br/>Violation:
                  </div>
                  <div class="col-7 col-md-4 px-1 mt-2 v-mid">
                    <input type="number" id="input-list-pins-maxvltn" style="width:6rem;" placeholder="N/A"
                    onchange="document.getElementById('input-list-pins-maxvltn-preset').checked=false;">
                    &nbsp;
                    <input id="input-list-pins-maxvltn-preset" type="checkbox" onclick="(this.checked)
                      ? document.getElementById('input-list-pins-maxvltn').value = getPresetMaxVltn()
                      : document.getElementById('input-list-pins-maxvltn').value = ''">&nbsp;Preset
                  </div>
                  <div class="col-5 col-md-2 px-1 mt-2 v-mid">
                    Update<br/>Frequency:
                  </div>
                  <div class="col-7 col-md-4 px-1 mt-2 v-mid">
                    <input type="number" id="input-list-pins-updfreq" style="width:6rem;" placeholder="N/A"
                    onchange="document.getElementById('input-list-pins-updfreq-preset').checked=false;">
                    &nbsp;
                    <input id="input-list-pins-updfreq-preset" type="checkbox" onclick="(this.checked)
                      ? document.getElementById('input-list-pins-updfreq').value = getPresetUpdFreq()
                      : document.getElementById('input-list-pins-updfreq').value = ''">&nbsp;Preset
                  </div>
                  
                  <div class="col-5 col-md-2 px-1 mt-2 v-mid">
                    Minimum<br/>Distance (m):
                  </div>
                  <div class="col-7 col-md-4 px-1 mt-2 v-mid">
                    <input type="number" id="input-list-pins-mindist" style="width:6rem;" placeholder="N/A"
                    onchange="document.getElementById('input-list-pins-mindist-preset').checked=false;">
                    &nbsp;
                    <input id="input-list-pins-mindist-preset" type="checkbox" onclick="(this.checked)
                      ? document.getElementById('input-list-pins-mindist').value = getPresetMinDist()
                      : document.getElementById('input-list-pins-mindist').value = ''">&nbsp;Preset
                  </div>
                  <div class="col-5 col-md-2 px-1 mt-2 v-mid">
                    Maximum<br/>Distance (m):
                  </div>
                  <div class="col-7 col-md-4 px-1 mt-2 v-mid">
                    <input type="number" id="input-list-pins-maxdist" style="width:6rem;" placeholder="N/A"
                    onchange="document.getElementById('input-list-pins-maxdist-preset').checked=false;">
                    &nbsp;
                    <input id="input-list-pins-maxdist-preset" type="checkbox" onclick="(this.checked)
                      ? document.getElementById('input-list-pins-maxdist').value = getPresetMaxDist()
                      : document.getElementById('input-list-pins-maxdist').value = ''">&nbsp;Preset
                  </div>
                  
                  <div class="col-5 col-md-2 px-1 mt-2 v-mid">
                    Minimum<br/>Altitude (m):
                  </div>
                  <div class="col-7 col-md-4 px-1 mt-2 v-mid">
                    <input type="number" id="input-list-pins-minalt" style="width:6rem;" placeholder="N/A"
                    onchange="document.getElementById('input-list-pins-minalt-preset').checked=false;">
                    &nbsp;
                    <input id="input-list-pins-minalt-preset" type="checkbox" onclick="(this.checked)
                      ? document.getElementById('input-list-pins-minalt').value = getPresetMinAlt()
                      : document.getElementById('input-list-pins-minalt').value = ''">&nbsp;Preset
                  </div>
                  <div class="col-5 col-md-2 px-1 mt-2 v-mid">
                    Maximum<br/>Altitude (m):
                  </div>
                  <div class="col-7 col-md-4 px-1 mt-2 v-mid">
                    <input type="number" id="input-list-pins-maxalt" style="width:6rem;" placeholder="N/A"
                    onchange="document.getElementById('input-list-pins-maxalt-preset').checked=false;">
                    &nbsp;
                    <input id="input-list-pins-maxalt-preset" type="checkbox" onclick="(this.checked)
                      ? document.getElementById('input-list-pins-maxalt').value = getPresetMaxAlt()
                      : document.getElementById('input-list-pins-maxalt').value = ''">&nbsp;Preset
                  </div>
                </div>

                <div class="col-12 px-0 mt-2" style="text-align: right;">
                  <input type="button" value="Clear" onclick="clearInputListConfig()">
                  <input type="button" value="Submit" id="btn-list-config-submit"
                    onclick="submitInputListConfig(); clearAllCheckboxes('checkbox-configure')">
                </div>

                <!--END CONTENT-->
              </div>
              <!--END BODY-->
            </div>
            <!--END CARD-->

            <!--GROUP CHECKER CARD-->
            <div class="card mx-1 my-1">
              <!--TITLE IN HEADER-->
              <a id="card-group-checker">
                <div class="card-header px-1 py-2">
                  Multiple PIN Checker
                </div>
              </a>
              <!--BODY-->
              <div class="card-body px-1 py-1">

                <div class="row mx-0 my-0">
                  <div class="col-12 px-0 py-0" id="group-checker-alert">
                    &nbsp;
                  </div>
                </div>
                
                <div class="row mx-0">
                  
                  <div class="col-5 col-md-2 px-1 mt-2 v-mid">
                    Range:
                  </div>
                  <div class="col-7 col-md-4 px-1 mt-2 v-mid">
                    <select id="group-checker-day-range" style="width:10rem;">
                      <option value="0" selected>Today</option>
                      <option value="1">1 day</option>
                      <option value="2">2 days</option>
                      <option value="3">3 days</option>
                      <option value="4">4 days</option>
                      <option value="5">5 days</option>
                      <option value="6">6 days</option>
                      <option value="7">1 week</option>
                      <option value="8">8 days</option>
                      <option value="9">9 days</option>
                      <option value="10">10 days</option>
                      <option value="11">11 days</option>
                      <option value="12">12 days</option>
                      <option value="13">13 days</option>
                      <option value="14">2 weeks</option>
                    </select>
                  </div>

                  <div class="col-12 px-0 mt-2" style="text-align: right;">
                    <input type="button" value="Submit" onclick="getMultiChecker()">
                  </div>
                </div>

                  <hr></hr>

                <div class="row mx-0 my-0">
                  <div class="px-0 py-0" style="width: 170px;">
                    
                    <div>
                      <div id="group-checker-datetime-header" class="row mx-0 my-0">
                        <div class="col-12 px-1 py-0" id="group-checker-info-datetime"
                            onclick="sortMultiChecker(this.id, 'asc', false, false);//sortMultiCheckerByKey(this.id)">
                          Date Time <i class="fa fa-sort" aria-hidden="true"></i>
                        </div>
                      </div>
                    </div>
            
                    <div id="group-checker-datetime-wrapper"
                        class="vertical-scrollable-wrapper">
                      <div id="group-checker-datetime" class="row mx-0 my-0">
            
                      </div>
                    </div>
            
                  </div>
                  <div class="px-0 py-0 content" style="width: calc(100% - 170px);">
            
                    <div id="group-checker-info-header-wrapper"
                        class="horizontal-scrollable-wrapper
                                scrollable-hidden">
                      <div id="group-checker-info-header" class="row mx-0 my-0">
                        <div class="col-2 px-1 py-0" id="group-checker-info-pin"
                            onclick="sortMultiChecker(this.id, '', 'asc', '');//sortMultiCheckerByKey(this.id)">
                          PIN <i class="fa fa-sort" aria-hidden="true"></i>
                        </div>
                        <div class="col-2 px-1 py-0" id="group-checker-info-type"
                            onclick="changeMultiCheckerType(this.id)">
                          Type
                        </div>
                        <div class="col-2 px-1 py-0" id="group-checker-info-value"
                            onclick="sortMultiChecker(this.id, '', '', 'asc');//sortMultiCheckerByKey(this.id)">
                          Value <i class="fa fa-sort" aria-hidden="true"></i>
                        </div>
                        <div class="col-6 px-1 py-0" id="group-checker-info-remarks"
                          style="cursor:text;">
                          Remarks
                        </div>
            
                      </div>
                    </div>
            
                    <div id="group-checker-info-wrapper"
                        class="horizontal-scrollable-wrapper">
                      <div id="group-checker-info" class="row mx-0 my-0">
            
                        <div class="col-12 px-1 py-0">
                          &nbsp;
                        </div>
            
                      </div>
                    </div>
                  </div>
                </div>
                    
                <div class="row mx-0 mt-1">
                  <div class="col-12 px-0" style="text-align:center;">
                    <i class="fa fa-bars" aria-hidden="true"
                      id="group-checker-datetime-notch"></i>
                      <div style="text-align:right;">
                        <input type="button" value="Download CSV"
                          onclick="downloadMultiCheckerCSV()"/>
                      </div>
                  </div>
                </div>

              </div>
            </div>
            <!--END CARD-->

            <!--INDIVIDUAL CHECKER CARD-->
            <div class="card mx-1 my-1">
              <!--TITLE IN HEADER-->
              <a id="card-individual-checker">
                <div class="card-header px-1 py-2">
                  Individual PIN Checker
                </div>
              </a>
              <!--BODY-->
              <div class="card-body px-1 py-1">

                <div class="row mx-0 my-0">
                  <div class="col-12 px-0 py-0" id="individual-checker-alert">
                    &nbsp;
                  </div>
                </div>
                
                <div class="row mx-0">
                  
                  <div class="col-5 col-md-2 px-1 mt-2 v-mid">
                    PIN/Mobile:
                  </div>
                  <div class="col-7 col-md-4 px-1 mt-2 v-mid">
                    <input id="individual-checker-user" type="text" style="width:10rem;">
                  </div>
                  
                  <div class="col-5 col-md-2 px-1 mt-2 v-mid">
                    Range:
                  </div>
                  <div class="col-7 col-md-4 px-1 mt-2 v-mid">
                    <select id="individual-checker-day-range" style="width:10rem;">
                      <option value="0" selected>Today</option>
                      <option value="1">1 day</option>
                      <option value="2">2 days</option>
                      <option value="3">3 days</option>
                      <option value="4">4 days</option>
                      <option value="5">5 days</option>
                      <option value="6">6 days</option>
                      <option value="7">1 week</option>
                      <option value="8">8 days</option>
                      <option value="9">9 days</option>
                      <option value="10">10 days</option>
                      <option value="11">11 days</option>
                      <option value="12">12 days</option>
                      <option value="13">13 days</option>
                      <option value="14">2 weeks</option>
                    </select>
                  </div>

                  <div class="col-12 px-0 mt-2" style="text-align: right;">
                    <input type="button" value="Submit" onclick="getIndividualCheckerByUser()">
                  </div>
                </div>

                  <hr></hr>

                <div class="row mx-0 my-0">
                  <div class="px-0 py-0" style="width: 170px;">
                    
                    <div>
                      <div id="individual-checker-datetime-header" class="row mx-0 my-0">
                        <div class="col-12 px-1 py-0" id="individual-checker-info-datetime"
                            onclick="sortIndividualChecker(this.id, 'asc', false, false);//sortMultiCheckerByKey(this.id)">
                          Date Time <i class="fa fa-sort" aria-hidden="true"></i>
                        </div>
                      </div>
                    </div>
            
                    <div id="individual-checker-datetime-wrapper"
                        class="vertical-scrollable-wrapper">
                      <div id="individual-checker-datetime" class="row mx-0 my-0">
            
                      </div>
                    </div>
            
                  </div>
                  <div class="px-0 py-0 content" style="width: calc(100% - 170px);">
            
                    <div id="individual-checker-info-header-wrapper"
                        class="horizontal-scrollable-wrapper
                                scrollable-hidden">
                      <div id="individual-checker-info-header" class="row mx-0 my-0">
                        <div class="col-2 px-1 py-0" id="individual-checker-info-pin"
                            onclick="sortIndividualChecker(this.id, '', 'asc', '');//sortMultiCheckerByKey(this.id)">
                          PIN <i class="fa fa-sort" aria-hidden="true"></i>
                        </div>
                        <div class="col-2 px-1 py-0" id="individual-checker-info-type"
                            onclick="changeIndividualCheckerType(this.id)">
                          Type
                        </div>
                        <div class="col-2 px-1 py-0" id="individual-checker-info-value"
                            onclick="sortIndividualChecker(this.id, '', '', 'asc');//sortMultiCheckerByKey(this.id)">
                          Value <i class="fa fa-sort" aria-hidden="true"></i>
                        </div>
                        <div class="col-6 px-1 py-0" id="individual-checker-info-remarks"
                          style="cursor:text;">
                          Remarks
                        </div>
            
                      </div>
                    </div>
            
                    <div id="individual-checker-info-wrapper"
                        class="horizontal-scrollable-wrapper">
                      <div id="individual-checker-info" class="row mx-0 my-0">
            
                        <div class="col-12 px-1 py-0">
                          &nbsp;
                        </div>
            
                      </div>
                    </div>
                  </div>
                </div>
                    
                <div class="row mx-0 mt-1">
                  <div class="col-12 px-0" style="text-align:center;">
                    <i class="fa fa-bars" aria-hidden="true"
                      id="individual-checker-datetime-notch"></i>
                      <div style="text-align:right;">
                        <input type="button" value="Download CSV"
                          onclick="downloadIndividualCheckerCSV()"/>
                      </div>
                  </div>
                </div>

              </div>
            </div>
            <!--END CARD-->

            <!--BATCH SMS NOTIFICATION CARD-->
            <div class="card mx-1 my-1">
              <div class="card-header px-1 py-2">
                <table style="background-color: rgba(0,0,0,0); font-weight: 900;">
                  <tr>
                    <td style="text-align:left;">Batch SMS Notification</td>
                    <td style="text-align:right;">
                      <span style="cursor:pointer;" onclick="
                        warningAlert(alert_sms_batch, 'Upload a CSV containing a single column of PINs...', 3000);
                        setTimeout(() => {
                          warningAlert(alert_sms_batch, 'With only 1 item in the header: PIN.', 3000);
                        }, 3010);
                      ">?</span>
                    </td>
                  </tr>
                </table>
              </div>
              <!--BODY-->
              <div class="card-body px-1 py-1">
                
                <div id="module-sms-batch">
                  <div class="row mx-0">
                    <div class="col-12 px-0" id="sms-batch-alert">
                      &nbsp;
                    </div>
                    <div class="col-6 px-0 mt-2" style="text-align: left;">
                      <input type="file" id="sms-batch-file" size="50" onchange="batchSMSByPinsUpload()"
                      style="display: none;">
                      <input type="button" value="Upload CSV/TXT"
                      onclick="document.getElementById('sms-batch-file').click();">
                    </div>
                    <div class="col-6 px-0 mt-2" style="text-align: right;">
                      <input type="button" value="Blast SMS" onclick="sendBatchSMSByPins()">
                    </div>
                  </div>
                </div>
                
              </div>
              <!--END BODY-->
            </div>
            <!--END CARD-->


            <!--PIN GENERATION AND ASSIGNMENT CARD-->
            <div class="card mx-1 my-1">
              <!--TITLE IN HEADER-->
              <div class="card-header px-1 py-2">
                PIN Generation & Assignment
              </div>
              
              <!--BODY-->
              <div class="card-body px-1 py-1">
                <!--ADD NEW PINS TABLE FORM-->
                <table class="my-0">
                  <tbody>
                    <tr>
                      <th colspan="3">Generate New PINs</th>
                    </tr>
                  </tbody>
                </table>
                
                <div class="row mx-0 my-0">
                  <div class="col-12 px-0 py-0" id="input-count-newpin-alert">
                    &nbsp;
                  </div>
                </div>

                <table class="my-0">
                  <tbody>
                  <!--ADD NEW PINS SETTING-->
                  <tr class="mb-0">
                    <td>
                      &emsp;<br>
                      Input Count
                      <br>&emsp;
                    </td>
                    <td>
                      <input type="number" id="input-count-newpins" style="width:5rem;" onchange="">
                    </td>
                    <td style="text-align: right;">
                      <input type="button" value="Generate" id="btn-generate-newpins"
                             onclick="generateNewPins()">
                    </td>
                  </tr>
                </tbody></table>

                <hr class="mt-0 mb-1">

                <div class="row mx-0 my-0">
                  <div class="col-12 px-0 py-0" width="100%">
                    
                    <div id="list-floating-header-wrapper">
                      <div id="list-floating-header" class="row mx-0 my-0">
                        <div class="col-6 px-1 py-0">
                          Available PINs
                        </div>
                        <div class="col-6 px-1 py-0" style="text-align:right;">
                          <span id="newpins">0</span> total
                        </div>
                      </div>
                    </div>
            
                    <div id="list-floating-wrapper" class="vertical-scrollable-wrapper">
                      <div id="list-floating" class="row mx-0 my-0">
                      </div>
                    </div>
                    <div class="row mx-0 mt-1">
                      <div class="col-12 px-0" style="text-align:center;">
                        <i class="fa fa-bars" aria-hidden="true"
                          id="list-floating-pins-notch"></i>
                          <div style="text-align:right;">
                            <input type="button" value="Refresh" class="mt-2"
                              onclick="getReqCallback(`${get_floating_pins}/${orgid}`, loadFloatingPins);"/>
                            <input type="button" value="Download CSV"
                              onclick="downloadFloatingPins()"/>
                          </div>
                      </div>
                    </div>

                    <div id="assign-pin-module" class="">
                      <hr class="mb-0 mt-2 mb-1"></hr>
                      
                      <table class="my-0">
                        <tbody>
                          <tr>
                            <th colspan="3">
                              Single PIN Assignment
                            </th>
                          </tr>
                        </tbody>
                      </table>

                      <!--PIN ASSIGNMENT MODULE-->
                      <div id="module-input-newpin">
                        <div class="row mx-0">
                          <div class="col-12 px-0" id="input-newpin-alert">
                            &nbsp;
                          </div>
                        </div>
                        
                        <div class="row mx-0">
                          <div class="col-5 col-md-2 px-1 mt-2 v-mid">
                            PIN:
                          </div>
                          <div class="col-7 col-md-4 px-1 mt-2">
                            <input type="string" id="input-newpin" style="width:10rem;" disabled="" placeholder="Select PIN above" onchange="">
                          </div>
                          
                          <div class="col-5 col-md-2 px-1 mt-2 v-mid">
                            Mobile:
                          </div>
                          <div class="col-7 col-md-4 px-1 mt-2">
                            <input type="string" id="input-newpin-ccode" style="width:3.5rem"
                            placeholder="+65"/>
                            <input type="string" id="input-newpin-mobile" style="width:6.25rem;" onchange="">
                          </div>

                          <div class="col-5 col-md-2 px-1 mt-2 v-mid">
                            SHN Start:
                          </div>
                          <div class="col-7 col-md-4 px-1 mt-2 v-mid">
                            <input type="date" id="input-newpin-start" style="width:10rem;" onchange="">
                          </div>
                          <div class="col-5 col-md-2 px-1 mt-2 v-mid">
                            SHN End:
                          </div>
                          <div class="col-7 col-md-4 px-1 mt-2 v-mid">
                            <input type="date" id="input-newpin-end" style="width:10rem;" onchange="">
                          </div>
                          
                          <div class="col-5 col-md-2 px-1 mt-2 v-mid">
                            Max Vltn:
                          </div>
                          <div class="col-7 col-md-4 px-1 mt-2 v-mid">
                            <input type="number" id="input-newpin-maxvltn" style="width:6rem;" placeholder="N/A"
                            onchange="document.getElementById('input-newpin-maxvltn-preset').checked=false;">
                            &nbsp;
                            <input id="input-newpin-maxvltn-preset" type="checkbox" onclick="(this.checked)
                              ? document.getElementById('input-newpin-maxvltn').value = getPresetMaxVltn()
                              : document.getElementById('input-newpin-maxvltn').value = ''">&nbsp;Preset
                          </div>
                          <div class="col-5 col-md-2 px-1 mt-2 v-mid">
                            Update Freq:
                          </div>
                          <div class="col-7 col-md-4 px-1 mt-2 v-mid">
                            <input type="number" id="input-newpin-updfreq" style="width:6rem;" placeholder="N/A"
                            onchange="document.getElementById('input-newpin-updfreq-preset').checked=false;">
                            &nbsp;
                            <input id="input-newpin-updfreq-preset" type="checkbox" onclick="(this.checked)
                              ? document.getElementById('input-newpin-updfreq').value = getPresetUpdFreq()
                              : document.getElementById('input-newpin-updfreq').value = ''">&nbsp;Preset
                          </div>
                          
                          <div class="col-5 col-md-2 px-1 mt-2 v-mid">
                            Min Dist:
                          </div>
                          <div class="col-7 col-md-4 px-1 mt-2 v-mid">
                            <input type="number" id="input-newpin-mindist" style="width:6rem;" placeholder="N/A"
                            onchange="document.getElementById('input-newpin-mindist-preset').checked=false;">
                            &nbsp;
                            <input id="input-newpin-mindist-preset" type="checkbox" onclick="(this.checked)
                              ? document.getElementById('input-newpin-mindist').value = getPresetMinDist()
                              : document.getElementById('input-newpin-mindist').value = ''">&nbsp;Preset
                          </div>
                          <div class="col-5 col-md-2 px-1 mt-2 v-mid">
                            Max Dist:
                          </div>
                          <div class="col-7 col-md-4 px-1 mt-2 v-mid">
                            <input type="number" id="input-newpin-maxdist" style="width:6rem;" placeholder="N/A"
                            onchange="document.getElementById('input-newpin-maxdist-preset').checked=false;">
                            &nbsp;
                            <input id="input-newpin-maxdist-preset" type="checkbox" onclick="(this.checked)
                              ? document.getElementById('input-newpin-maxdist').value = getPresetMaxDist()
                              : document.getElementById('input-newpin-maxdist').value = ''">&nbsp;Preset
                          </div>
                          
                          <div class="col-5 col-md-2 px-1 mt-2 v-mid">
                            Min Alti:
                          </div>
                          <div class="col-7 col-md-4 px-1 mt-2 v-mid">
                            <input type="number" id="input-newpin-minalt" style="width:6rem;" placeholder="N/A"
                            onchange="document.getElementById('input-newpin-minalt-preset').checked=false;">
                            &nbsp;
                            <input id="input-newpin-minalt-preset" type="checkbox" onclick="(this.checked)
                              ? document.getElementById('input-newpin-minalt').value = getPresetMinAlt()
                              : document.getElementById('input-newpin-minalt').value = ''">&nbsp;Preset
                          </div>
                          <div class="col-5 col-md-2 px-1 mt-2 v-mid">
                            Max Alti:
                          </div>
                          <div class="col-7 col-md-4 px-1 mt-2 v-mid">
                            <input type="number" id="input-newpin-maxalt" style="width:6rem;" placeholder="N/A"
                            onchange="document.getElementById('input-newpin-maxalt-preset').checked=false;">
                            &nbsp;
                            <input id="input-newpin-maxalt-preset" type="checkbox" onclick="(this.checked)
                              ? document.getElementById('input-newpin-maxalt').value = getPresetMaxAlt()
                              : document.getElementById('input-newpin-maxalt').value = ''">&nbsp;Preset
                          </div>

                          <div class="col-12 px-0 mt-2" style="text-align: right;">
                            <input type="button" value="Clear" onclick="clearInputNewMobile()">
                            <input type="button" value="Submit" onclick="checkInputNewMobile()">
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!--BATCH PIN ASSIGNMENT MODULE-->
                <div id="module-batch-upload" class="d-none">
                  <div class="row mx-0">
                    <div class="col-12 px-0" id="batch-upload-alert">
                      &nbsp;
                    </div>
                    <div class="col-12 px-0 mt-2" style="text-align: left;">
                      <input type="button" value="CSV Template" onclick="downloadTemplate()">
                    </div>
                    <div class="col-6 px-0 mt-2" style="text-align: left;">
                      <input type="file" id="batch-upload-file" size="50" onchange="batchUpload()"
                      style="display: none;">
                      <input type="button" value="Upload CSV"
                      onclick="document.getElementById('batch-upload-file').click();">
                    </div>
                    <div class="col-6 px-0 mt-2" style="text-align: right;">
                      <input type="button" value="Submit" onclick="checkBatchForExisting()">
                    </div>
                  </div>

                  <hr class="mt-2 mb-1">

                  <div class="row mx-0 my-0">
                    <div class="col-5 col-xl-4 px-0 py-0">
                      
                      <div>
                        <div id="batch-upload-pin-header" class="row mx-0 my-0">
                          <div class="col-12 px-1 py-0" id="batch-upload-info-pin"
                              onclick="//sortAndBuildBatchUploadDetails(this.id)">
                            PIN
                          </div>
                        </div>
                      </div>
              
                      <div id="batch-upload-pin-wrapper"
                          class="vertical-scrollable-wrapper">
                        <div id="batch-upload-pin" class="row mx-0 my-0">
              
                          <div class="col-12">
                            &nbsp;
                          </div>
              
                        </div>
                      </div>
              
                    </div>
                    <div class="col-7 col-xl-8 px-0 py-0 content">
              
                      <div id="batch-upload-info-header-wrapper"
                          class="horizontal-scrollable-wrapper
                                  scrollable-hidden">
                        <div id="batch-upload-info-header" class="row mx-0 my-0">
                          <div class="col-4 px-1 py-0" id="batch-upload-info-mobile"
                              onclick="//sortAndBuildBatchUploadDetails(this.id)">
                            Mobile
                          </div>
                          <div class="col-4 px-1 py-0" id="batch-upload-info-start"
                              onclick="//sortAndBuildBatchUploadDetails(this.id)">
                            SHN Start
                          </div>
                          <div class="col-4 px-1 py-0" id="batch-upload-info-end"
                              onclick="//sortAndBuildBatchUploadDetails(this.id)">
                            SHN End
                          </div>
                        </div>
                      </div>
              
                      <div id="batch-upload-info-wrapper"
                          class="horizontal-scrollable-wrapper">
                        <div id="batch-upload-info" class="row mx-0 my-0">
              
                          <div class="col-12 px-1 py-0">
                            &nbsp;
                          </div>
              
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <div class="row mx-0 mt-1">
                    <div class="col-12 px-0" style="text-align:center;">
                      <i class="fa fa-bars" aria-hidden="true"
                        id="batch-upload-notch"></i>
                        <div style="text-align:right;">
                          <input type="button" value="Download CSV"
                            onclick="downloadBatchCSV()"/>
                          <input type="button" value="Send SMS"
                            onclick="sendBatchSMS()"/>
                        </div>
                    </div>
                  </div>
                </div>   
                <!--END BODY-->
              </div>
              <!--END CARD-->
            </div>
          </div>
          <!--END COLUMN-->

          <!--START SECOND COLUMN-->
          <div class="col col-sm-12 col-lg-4 px-0">

            <!--DAILY SCHEDULED PUSH NOTIFICATIONS CARD-->
            <div class="card mx-1 my-1">
              <div class="card-header px-1 py-2">
                Daily Scheduled Pushes
              </div>
              <!--BODY-->
              <div class="card-body px-1 py-1">
                <!--DAILY SCHEDULED PUSHES TABLE DISPLAY-->
                <table>
                  <tr>
                    <td colspan="3" id="today-push-date">
                      -
                    </td>
                  </tr>
                  <tr>
                    <th>Morning</th>
                    <th>Afternoon</th>
                    <th>Evening</th>
                  </tr>
                  <tr>
                    <td id="today-push-am">
                      -
                    </td>
                    <td id="today-push-pm">
                      -
                    </td>
                    <td id="today-push-ev">
                      -
                    </td>
                  </tr>
                  <tr>
                    <td id="today-push-am-status">
                      -
                    </td>
                    <td id="today-push-pm-status">
                      -
                    </td>
                    <td id="today-push-ev-status">
                      -
                    </td>
                  </tr>
                </table>
                
                <hr class="d-none"></hr>

                <!--DAILY SCHEDULED PUSHES CONFIG TABLE FORM-->
                <table class="d-none">
                  <!--HEADER-->
                  <tr>
                    <th>Time of Day</th>
                    <th>Start</th>
                    <th>End</th>
                  </tr>
                  <!--MORNING SETTING-->
                  <tr>
                    <td>
                      &emsp;<br/>
                      Morning
                      <br/>&emsp;
                    </td>
                    <td>
                      <select id="input-push-am-start" name="am-start" disabled>
                        <option value="-1" disabled selected>-</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                      </select>&nbsp;:00
                    </td>
                    <td>
                      <select id="input-push-am-end" name="am-end" disabled>
                        <option value="-1" disabled selected>-</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                      </select>&nbsp;:59
                    </td>
                  </tr>
                  <!--AFTERNOON SETTING-->
                  <tr>
                    <td>
                      &emsp;<br/>
                      Afternoon
                      <br/>&emsp;
                    </td>
                    <td>
                      <select id="input-push-pm-start" name="pm-start" disabled>
                        <option value="-1" disabled selected>-</option>
                        <option value="12">12</option>
                        <option value="13">13</option>
                        <option value="14">14</option>
                        <option value="15">15</option>
                      </select>&nbsp;:00
                    </td>
                    <td>
                      <select id="input-push-pm-end" name="pm-end" disabled>
                        <option value="-1" disabled selected>-</option>
                        <option value="12">12</option>
                        <option value="13">13</option>
                        <option value="14">14</option>
                        <option value="15">15</option>
                      </select>&nbsp;:59
                    </td>
                  </tr>
                  <!--EVENING SETTING-->
                  <tr>
                    <td>
                      &emsp;<br/>
                      Evening
                      <br/>&emsp;
                    </td>
                    <td>
                      <select id="input-push-ev-start" name="ev-start" disabled>
                        <option value="-1" disabled selected>-</option>
                        <option value="16">16</option>
                        <option value="17">17</option>
                        <option value="18">18</option>
                        <option value="19">19</option>
                      </select>&nbsp;:00
                    </td>
                    <td>
                      <select id="input-push-ev-end" name="ev-end" disabled>
                        <option value="-1" disabled selected>-</option>
                        <option value="16">16</option>
                        <option value="17">17</option>
                        <option value="18">18</option>
                        <option value="19">19</option>
                      </select>&nbsp;:59
                    </td>
                  </tr>
                  <tr>
                    <td colspan="3" style="text-align: right;">
                      <span class="commentary">Edit feature temporarily unavailable.</span>&nbsp;
                      <input type="button" value="Update" disabled>
                    </td>
                  </tr>
                </table>
              </div>
              <!--END BODY-->
            </div>
            <!--END CARD-->

            <!--FRONT-END APP CONFIG CARD-->
            <div class="card mx-1 my-1">
              <div class="card-header px-1 py-2">
                Front-end App Configurations
              </div>
              <!--BODY-->
              <div class="card-body px-1 py-1">
                <!--FRONT-END APP CONFIG FORM-->
                <table>
                  <!--HEADER-->
                  <tr>
                    <th>Type</th>
                    <th>Default</th>
                    <th>Preset</th>
                  </tr>
                  <!--UPDATE FREQUENCY SETTING-->
                  <tr>
                    <td>
                      &emsp;<br/>
                      Update Frequency<br/><i>(in minutes)</i>
                      <br/>&emsp;
                    </td>
                    <td id="updfreq">
                      N/A
                    </td>
                    <td>
                      <input type="number" id="input-updfreq" style="width:4rem;"
                      onchange="">
                    </td>
                  </tr>
                  <!--MIN DISTANCE SETTING-->
                  <tr>
                    <td>
                      &emsp;<br/>
                      Minimum Distance<br/><i>(in metres)</i>
                      <br/>&emsp;
                    </td>
                    <td id="mindist">
                      N/A
                    </td>
                    <td>
                      <input type="number" id="input-mindist" style="width:4rem;"
                      onchange="">
                    </td>
                  </tr>
                  <!--MAX DISTANCE SETTING-->
                  <tr>
                    <td>
                      &emsp;<br/>
                      Maximum Distance<br/><i>(in metres)</i>
                      <br/>&emsp;
                    </td>
                    <td id="maxdist">
                      N/A
                    </td>
                    <td>
                      <input type="number" id="input-maxdist" style="width:4rem;"
                      onchange="">
                    </td>
                  </tr>
                  <!--MIN ALTITUDE SETTING-->
                  <tr>
                    <td>
                      &emsp;<br/>
                      Minimum Altitude<br/><i>(in metres)</i>
                      <br/>&emsp;
                    </td>
                    <td id="minalt">
                      N/A
                    </td>
                    <td>
                      <input type="number" id="input-minalt" style="width:4rem;"
                      onchange="">
                    </td>
                  </tr>
                  <!--MAX ALTITUDE SETTING-->
                  <tr>
                    <td>
                      &emsp;<br/>
                      Maximum Altitude<br/><i>(in metres)</i>
                      <br/>&emsp;
                    </td>
                    <td id="maxalt">
                      N/A
                    </td>
                    <td>
                      <input type="number" id="input-maxalt" style="width:4rem;"
                      onchange="">
                    </td>
                  </tr>
                  <!--MAX VIOLATIONS SETTING-->
                  <tr>
                    <td>
                      &emsp;<br/>
                      Maximum Violations<br/><i>(in amount)</i>
                      <br/>&emsp;
                    </td>
                    <td id="maxvltn">
                      N/A
                    </td>
                    <td>
                      <input type="number" id="input-maxvltn" style="width:4rem;"
                      onchange="">
                    </td>
                  </tr>

                  <!--UPDATE SETTINGS BUTTON-->
                  <tr>
                    <td colspan="3" style="text-align: right;">
                      <input type="button" value="Update" onclick="updatePresetConfig()">
                    </td>
                  </tr>
                  
                </table>
              </div>
              <!--END BODY-->
            </div>
            <!--END CARD-->

          </div>
          <!--END COLUMN-->
        </div>
        <!--END ROW-->
      </div>
    </div>
    </div>
    <script>
      $(function(){
        $("#list-info-wrapper").scroll(function(){
          $("#list-header-wrapper")
            .scrollLeft($("#list-info-wrapper").scrollLeft());
        })
        $("#list-pins-wrapper").scroll(function(){
          $("#list-info-wrapper")
            .scrollTop($("#list-pins-wrapper").scrollTop());
        })
        $("#checker-info-wrapper").scroll(function(){
          $("#checker-info-header-wrapper")
            .scrollLeft($("#checker-info-wrapper").scrollLeft());
        })
        $("#checker-datetime-wrapper").scroll(function(){
          $("#checker-info-wrapper")
            .scrollTop($("#checker-datetime-wrapper").scrollTop());
        })
        $("#batch-upload-info-wrapper").scroll(function(){
          $("#batch-upload-info-header-wrapper")
            .scrollLeft($("#batch-upload-info-wrapper").scrollLeft());
        })
        $("#batch-upload-pin-wrapper").scroll(function(){
          $("#batch-upload-info-wrapper")
            .scrollTop($("#batch-upload-pin-wrapper").scrollTop());
        })
      });
    </script>
    <script src="./js/frsm.js"></script>
    <script src="./js/checker.js"></script>
    <script src="./js/multichecker.js"></script>
    <script src="./js/trigger.js"></script>
    <script>

      // URL to get biometric push notification config data.
      var get_bio_config = "https://www.locationreport.gov.sg/virusrip/otp/getbioconfig";
      // URL to get scheduled push notification info by date.
      var get_scheduled_push_by_date = "https://www.locationreport.gov.sg/virusrip/otp/getbio";
      // URL to get front-end config data.
      var get_frontend_config = "https://www.locationreport.gov.sg/virusrip/novel/config";
      // URL to get all data of active PINs.
      var get_all = `https://www.locationreport.gov.sg/virusrip/novel/get/1`;
      // URL to get all trk data of PIN.
      var get_trk = "https://www.locationreport.gov.sg/virusrip/novel/get";
      // URL to get all floating pins.
      var get_floating_pins = "https://www.locationreport.gov.sg/virusrip/novel/floatingpins";
      // URL to generate new floating pins.
      var generate_floating_pins = "https://www.locationreport.gov.sg/virusrip/otp/genpins";
      // URL to set floating pin with SHN assignee details.
      var set_floating_pins = "https://www.locationreport.gov.sg/virusrip/otp/setfloatingpins";
      // URL to set multi-login.
      var set_multi_login = "https://www.locationreport.gov.sg/virusrip/novel/multilogin";
      // URL to set suspended.
      var set_suspended = "https://www.locationreport.gov.sg/virusrip/novel/suspension";
      // URL to change SHN start date.
      var change_start_date = "https://www.locationreport.gov.sg/virusrip/novel/changestartdate";
      // URL to change SHN end date.
      var change_end_date = "https://www.locationreport.gov.sg/virusrip/novel/changeenddate";
      // URL to change config.
      var change_config = "https://www.locationreport.gov.sg/virusrip/novel/changeconfig";
      // URL to trigger ad-hoc push.
      var ad_hoc_push = "https://www.locationreport.gov.sg/virusrip/novel/adminpush";
      // URL to get PIN from mobile.
      var get_all_mobile = "https://www.locationreport.gov.sg/virusrip/novel/getallmobile";

      var debug = true;
      var render_mode;

      var today_push_date = document.getElementById('today-push-date');
      var today_push_am = document.getElementById('today-push-am');
      var today_push_am_status = document.getElementById('today-push-am-status');
      var today_push_pm = document.getElementById('today-push-pm');
      var today_push_pm_status = document.getElementById('today-push-pm-status');
      var today_push_ev = document.getElementById('today-push-ev');
      var today_push_ev_status = document.getElementById('today-push-ev-status');

      var input_push_am_start = document.getElementById('input-push-am-start');
      var input_push_am_end   = document.getElementById('input-push-am-end');
      var input_push_pm_start = document.getElementById('input-push-pm-start');
      var input_push_pm_end   = document.getElementById('input-push-pm-end');
      var input_push_ev_start = document.getElementById('input-push-ev-start');
      var input_push_ev_end   = document.getElementById('input-push-ev-end');
      var input_pin_generation = document.getElementById('input-pin-generation');

      var display_newpins = document.getElementById('newpins');
      var display_updfreq = document.getElementById('updfreq');
      var display_mindist = document.getElementById('mindist');
      var display_maxdist = document.getElementById('maxdist');
      var display_minalt = document.getElementById('minalt');
      var display_maxalt = document.getElementById('maxalt');
      var display_maxvltn = document.getElementById('maxvltn');

      var table_pins = document.getElementById('table-pins');

      var setting_input_newpin = document.getElementById('setting-input-newpin');
      var setting_batch_upload = document.getElementById('setting-batch-upload');

      var push_schedule;

      var userid, orgid, token;
      window.onload = function() {
        renderPage();
        userid = localStorage.getItem('userid');
        orgid = localStorage.getItem('orgid');
        token = localStorage.getItem('token');
        if (userid && orgid && token) {
          //TO-DO
          //Verify with backend if token is still valid.
          clearLogin();
          loadPage();
          clearCurtain();
        } else {
          localStorage.removeItem('userid');
          localStorage.removeItem('orgid');
          localStorage.removeItem('token');
          showLogin();
        }
      }

      var input_userid = document.getElementById('input-userid');
      var input_password = document.getElementById('input-password');

      function login() {
        var userid = input_userid.value;
        var password = input_password.value;
        var alert = document.getElementById('login-alert');

        if (userid == "") {
          alert.innerHTML = "Empty user id field.";
          return;
        }
        if (userid.length < 5) {
          alert.innerHTML = "Invalid user id";
        } 
        if (password == "") {
          alert.innerHTML = "Empty password field.";
          return;
        }

        var payload = {
          'userid': userid,
          'password': password
        }
        //TO-DO
        //postReqCallbackAuth(url, payload, loginResult);
        
        //TO-DO
        //Actual login credentials checking with backend.
        if (userid == "moh-admin" && password == "ULT1M@")
        {
          alert.innerHTML = "&nbsp;";
        } else {
          alert.innerHTML = "Wrong login credentials.";
          return;
        }
        var result = {
          'userid': userid
        }
        if (userid == "moh-admin") {
          //result.token = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyaWQiOiJtb2gtYWRtaW4wMSIsIm9yZ2lkIjoiTU9IIn0.SGbTAL9ZKRCyhs-TPguyF35GHlnFytV8pdFW6OVLIOE",
          result.token = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfcGluIjoiSkFJTiIsImlhdCI6MTU4NDExNjI1MywiZXhwIjoxNTkxODkyMjUzfQ.vhHuvybtKeqXwZtAv4szDGIJJjAPwZ-FSTy8BTQuO7c",
          result.orgid = "MOH"
        }

        loginResult(result)
      }

      function loginResult(result) {
        localStorage.setItem('userid', result.userid);
        localStorage.setItem('token', result.token);
        localStorage.setItem('orgid', result.orgid);
        loadPage();
        clearCurtain();
        clearLogin();
      }

      function loadPage() {
        userid = localStorage.getItem('userid');
        token = localStorage.getItem('token');
        orgid = localStorage.getItem('orgid');
        //renderPinAssignmentType(0);
        getReqCallbackAuth(`${get_all}/${orgid}`, loadPinDetails);
        getReqCallbackAuth(`${get_floating_pins}/${orgid}`, loadFloatingPins);
        getDailySchedule();
        getReqCallbackAuth(get_bio_config, loadBioConfig);
        getReqCallbackAuth(get_frontend_config, loadFrontEndConfig);
      }

      /*
      function renderPinAssignmentType(id) {
        var setting = document.getElementsByClassName('setting-pin-assignment');
        if (!id) {
          id = localStorage.getItem('setting-pin-assignment')
          if (!id || id == null) {
            id = 'setting-batch-upload';
          }
        }
        localStorage.setItem('setting-pin-assignment', id);

        setting[0].classList.remove('chosen'),
        setting[1].classList.remove('chosen'),
        document.getElementById(id).classList.add('chosen');
        if (id == 'setting-input-newpin') {
          document.getElementById('module-input-newpin').classList.remove('d-none'),
          document.getElementById('module-batch-upload').classList.add('d-none');
        }
        else if (id == 'setting-batch-upload') {
          document.getElementById('module-input-newpin').classList.add('d-none'),
          document.getElementById('module-batch-upload').classList.remove('d-none');
        }
      }*/
      
      function showLogin() {
        var login = document.getElementById('login');
        login.style['z-index'] = 2;
        login.classList.add('show');
      }

      function clearLogin() {
        var login = document.getElementById('login');
        login.classList.remove('show');
        
        setTimeout(function() {
          login.classList.add('d-none');
          login.style['z-index'] = -99;
        }, 500);
      }

      function clearCurtain() {
        var curtain = document.getElementById('curtain');
        curtain.classList.remove('show');
        
        setTimeout(function() {
          curtain.classList.add('d-none');
        }, 500);
      }

      var list_pins = document.getElementById('list-pins');
      var list_pins_header = document.getElementById('list-pins-header');
      var list_pins_wrapper = document.getElementById('list-pins-wrapper');
      var list_info = document.getElementById('list-info');
      var list_info_header = document.getElementById('list-info-header');
      var list_info_wrapper = document.getElementById('list-info-wrapper');
      var list_pins_notch = document.getElementById('list-pins-notch');
      
      list_pins_notch.addEventListener('click', function() {
        if (list_pins_wrapper.classList.contains('expanded')) {
          list_pins_wrapper.classList.remove('expanded'),
          list_info_wrapper.classList.remove('expanded');
        } else {
          list_pins_wrapper.classList.add('expanded'),
          list_info_wrapper.classList.add('expanded');
        }
      });

      var list_floating_wrapper = document.getElementById('list-floating-wrapper');
      var list_floating_pins = document.getElementById('list-floating');
      var list_floating_pins_notch = document.getElementById('list-floating-pins-notch');

      list_floating_pins_notch.addEventListener('click', function() {
        if (list_floating_wrapper.classList.contains('expanded')) {
          list_floating_wrapper.classList.remove('expanded');
        } else {
          list_floating_wrapper.classList.add('expanded');
        }
      });

      var batch_upload_pin = document.getElementById('batch-upload-pin');
      var batch_upload_info = document.getElementById('batch-upload-info');
      var batch_upload_pin_wrapper = document.getElementById('batch-upload-pin-wrapper');
      var batch_upload_info_wrapper = document.getElementById('batch-upload-info-wrapper');
      var batch_upload_notch = document.getElementById('batch-upload-notch');

      batch_upload_notch.addEventListener('click', function() {
        if (batch_upload_pin_wrapper.classList.contains('expanded')) {
          batch_upload_pin_wrapper.classList.remove('expanded'),
          batch_upload_info_wrapper.classList.remove('expanded');
        } else {
          batch_upload_pin_wrapper.classList.add('expanded'),
          batch_upload_info_wrapper.classList.add('expanded');
        }
      });

      var batch_upload_filename = "";
      function batchUpload() {
        batch_submitted = false;
        var sms_batch_submission = false;
        uploaded_batch.length = 0;
        var file = document.getElementById("batch-upload-file").files[0];
        if (file) {
          var fileName = document.getElementById("batch-upload-file").value;
          fileName = fileName.substring(fileName.lastIndexOf("\\") + 1, fileName.length);
          var fileExt = fileName.substring(fileName.lastIndexOf(".") + 1, fileName.length);
          if (fileExt.toLowerCase() != "csv") {
            errorAlert(alert_batch_upload, `Error: ${fileName} is not a valid CSV file.`, 3500);
            return;
          }
          fileName = fileName.substring(0, fileName.lastIndexOf("."));
          batch_upload_filename = fileName;
          console.log(batch_upload_filename);

          var reader = new FileReader();
          reader.readAsText(file, "UTF-8");
          reader.onload = function (evt) {
            var result = evt.target.result;
            processBatchUpload(result);
          }
          reader.onerror = function (evt) {
            errorAlert(alert_batch_upload, "Error: Unable to read file.", 3500);
          }
        }
      }

      var template_header_new = "Mobile,SHN Start Date (DD/MM/YYYY),SHN End Date (DD/MM/YYYY)";
      var template_header_existing = "PIN,Mobile,SHN Start Date (DD/MM/YYYY),SHN End Date (DD/MM/YYYY)";
      var uploaded_batch = [];
      var batch_submitted = false;
      var sms_batch_submission = false;
      var sms_batch_completed = false;

      function processBatchUpload(result) {
        result = result.split('\n');
        var length = result.length;
        if (length <= 1) {
          errorAlert(alert_batch_upload, "Error: CSV file lacking contents.", 3500);
          return;
        } else {
          var errors = [];
          var header = result[0];
          var result = result.splice(1);
          console.log(header)
          console.log(template_header_new)
          if (header.trim() == template_header_new.trim()) {
            length = result.length;
            for (i = 0; i < length; i++) {
              var _element = result[i].split(',');
              if (_element.length != 3) {
                errors.push(i + 1);
                continue;
              }
              // Check Mobile
              var _mobile = _element[0];
              if (_mobile.length < 8 || parseInt(_mobile) == NaN) {
                errors.push(i + 1);
                continue;
              }
              // Check dates
              var _start = _element[1];
              var _test = _start.split('/');
              if (_test.length != 3) {
                errors.push(i + 1);
                continue;
              }
              if (parseInt(_test[0]) == NaN || parseInt(_test[1]) == NaN || parseInt(_test[2]) == NaN) {
                errors.push(i + 1);
                continue;
              }
              var _end = _element[2];
              _test = _end.split('/');
              if (_test.length != 3) {
                errors.push(i + 1);
                continue;
              }
              if (parseInt(_test[0]) == NaN || parseInt(_test[1]) == NaN || parseInt(_test[2]) == NaN) {
                errors.push(i + 1);
                continue;
              }

              var _entry = {
                pin: '-',
                mobile: _mobile,
                loastart: _start,
                loaend: _end
              };
              _entry.mobile = (_entry.mobile.length == 8)
              ? `65${_entry.mobile}` : _entry.mobile;
              uploaded_batch.push(_entry);
            }
            if (errors.length == 1) {
              errorAlert(alert_batch_upload, `Error: Line ${errors[0]} failed.`, false);
            }
            else if (errors.length > 1) {
              errorAlert(alert_batch_upload, `Error: Lines ${errors.join(', ')} failed.`, false);
            }
            buildBatchUploadTable();
            checkBatchForExisting();
          }
          else if (header.trim() == template_header_existing.trim()) {
            length = result.length;
            for (i = 0; i < length; i++) {
              var _element = result[i].split(',');
              if (_element.length != 4) {
                errors.push(i + 1);
                continue;
              }
              // Check PIN
              var _pin = _element[0];
              if (_pin == '' || _pin == 'NA' || _pin == 'N/A') {
                _pin = '-';
              } else if (_pin.length != 8) {
                errors.push(i + 1);
                continue;
              }
              // Check Mobile
              var _mobile = _element[1];
              if (_mobile.length < 8 || parseInt(_mobile) == NaN) {
                errors.push(i + 1);
                continue;
              }
              // Check dates
              var _start = _element[2];
              var _test = _start.split('/');
              if (_test.length != 3) {
                errors.push(i + 1);
                continue;
              }
              if (parseInt(_test[0]) == NaN || parseInt(_test[1]) == NaN || parseInt(_test[2]) == NaN) {
                errors.push(i + 1);
                continue;
              }
              var _end = _element[3];
              _test = _end.split('/');
              if (_test.length != 3) {
                errors.push(i + 1);
                continue;
              }
              if (parseInt(_test[0]) == NaN || parseInt(_test[1]) == NaN || parseInt(_test[2]) == NaN) {
                errors.push(i + 1);
                continue;
              }

              var _entry = {
                pin: _pin,
                mobile: _mobile,
                loastart: _start,
                loaend: _end
              };
              _entry.mobile = (_entry.mobile.length == 8)
              ? `65${_entry.mobile}` : _entry.mobile;
              uploaded_batch.push(_entry);
            }
            if (errors.length == 1) {
              errorAlert(alert_batch_upload, `Error: Line ${errors[0]} failed.`, false);
            }
            else if (errors.length > 1) {
              errorAlert(alert_batch_upload, `Error: Lines ${errors.join(', ')} failed.`, false);
            }
            buildBatchUploadTable();
            checkBatchForExisting();
          } else {
            errorAlert(alert_batch_upload, "Error: CSV Header is not similar to template.", 3500);
            return;
          }
        }
      }

      function sendBatchSMS() {
        if (uploaded_batch.length == 0) {
          errorAlert(alert_batch_upload, "Error: Empty batch.", 3500);
          return;
        }
        if (!batch_submitted) {
          errorAlert(alert_batch_upload, "Error: Batch has not been submitted yet.", 3500);
          return;
        } else {
          if (sms_batch_submission) {
            if (sms_batch_completed == false) {
              warningAlert(alert_batch_upload, "Commencing batch SMS transmission...", false);
              batchSMS();
            } else {
              errorAlert(alert_batch_upload, "Error: SMS transmission for this batch is done.", 3500);
            }
          } else {
            errorAlert(alert_batch_upload, "Error: Batch is still undergoing validation.", 3500);
          }
        }
      }

      var sms_count = 0;
      function batchSMS(batch) {
        sms_batch_completed = true;
        var length = batch.length;
        var pins = [];

        for (i = 0; i < length; i++) {
          pins.push(batch[i].pin);
        }
        sms_count = 1;

        var payload = {
          "arrayofpins": pins
        }
        postReqCallbackAuth("https://lufthansadsl.tk/virusrip/otp/batchsms", payload, updateSMSCount);
      }

      function oldbatchSMS() {
        sms_batch_completed = true;
        var url_app_store = "https://apps.apple.com/sg/app/shn-reporting/id1499970706";
        var url_play_store = "https://play.google.com/store/apps/details?id=sg.gov.imda.shn";

        var length = sms_count = uploaded_batch.length;

        for (i = 0; i < length; i++) {
          var shn_start = uploaded_batch[i].loastart;
          shn_start = shn_start.split('/');
          shn_start = `${shn_start[0]}/${shn_start[1]}`;
          var shn_end = uploaded_batch[i].loaend;
          shn_end = shn_end.split('/');
          shn_end = `${shn_end[0]}/${shn_end[1]}`;

          var payload = {
            "mobile": uploaded_batch[i].mobile,
            "subject": "SHN Reporting",
            "message": `Your SHN period is from ${shn_start} to ${shn_end}.\n`
              + `The PIN assigned to you is: ${uploaded_batch[i].pin}\n\n`
              + 'Please download the SHN Reporting app immediately.\n\n'
              + `For iOS: ${url_app_store}\n\n`
              + `For Android: ${url_play_store}`
          }
          postReqCallbackAuth("https://lufthansadsl.tk/virusrip/sendtousers/sms", payload, updateSMSCount);
        }
      }

      function updateSMSCount(result) {
        sms_count -= 1;
        if (sms_count == 0) {
          successAlert(alert_batch_upload, "Batch SMS transmission completed.", 3500);
        }
      }
      
      function buildBatchUploadTable() {
        var _batch_upload_pin_content = "";
        var _batch_upload_info_content = "";
        batch_upload_pin.innerHTML = _batch_upload_pin_content;
        batch_upload_info.innerHTML = _batch_upload_info_content;

        var length = uploaded_batch.length;
        for (i = 0; i < length; i++) {
          var _uploaded_entry = uploaded_batch[i];
          _batch_upload_pin_content += buildBatchUploadContent(i, _uploaded_entry.pin);
          _batch_upload_info_content += buildBatchUploadInfoContent(i, _uploaded_entry);
        }
        _batch_upload_pin_content += '<div class="col-12 px-1 py-0">&nbsp;</div>';
        _batch_upload_info_content += '<div class="col-12 px-1 py-0">&nbsp;</div>';

        batch_upload_pin.innerHTML = _batch_upload_pin_content;
        batch_upload_info.innerHTML = _batch_upload_info_content;

        if (batch_submitted) {
          sms_batch_submission = true;
          sms_batch_completed = false;
        }
      }

      function buildBatchUploadContent(_index, _pin) {
        var _div_class = "col-12 px-1 py-1 mx-0 my-0 v-mid";
        var _shade = (_index % 2 == 0) ? 'shade' : '';
        var _html = "";
        _html += buildContent(_div_class, _shade, _pin);
        return _html;
      }

      function buildBatchUploadInfoContent(_index, _entry) {
        var _div_class = "col-4 px-1 py-1 mx-0 my-0 v-mid";
        var _shade = (_index % 2 == 0) ? 'shade' : '';
        var _html = "";
        _html += buildContent(_div_class, _shade, _entry.mobile);
        _html += buildContent(_div_class, _shade, _entry.loastart);
        _html += buildContent(_div_class, _shade, _entry.loaend);
        return _html;
      }

      var batch_generated_pins = [];
      var batch_check_count = 0;
      function checkBatchForExisting() {
        batch_submitted = true;
        var length = uploaded_batch.length;
        if (length <= 0) {
          errorAlert(alert_batch_upload, 'Error: Empty submission.', 3500);
          return;
        } else {
          warningAlert(alert_batch_upload, 'Processing...', 3500);
          batch_check_count = length;
          for (i = 0; i < length; i++) {
            var _mobile = uploaded_batch[i].mobile 
            getReqCallbackWithParmAuth(`${get_all_mobile}/${_mobile}`, _mobile, updateBatchCheckCount);
          }
        }
      }

      function updateBatchCheckCount(result, _mobile) {
        if (result.message.length > 0) {
          result = result.message[0];
          var _pin = result.pin;
          var _start = result.loastart;
          var _end = result.loaend;
          var _index = _.findIndex(uploaded_batch, function(batch) {
            return batch.mobile == _mobile;
          });
          if (_index != -1) {
            uploaded_batch[_index].pin = _pin;
            uploaded_batch[_index].loastart = _start;
            uploaded_batch[_index].loaend = _end;
            buildBatchUploadTable();
          }
        }
        batch_check_count -= 1;
        if (batch_check_count == 0) {
          var size = 0;
          var length = uploaded_batch.length;
          for (i = 0; i < length; i++) {
            if (uploaded_batch[i].pin == '-') {
              size += 1;
            }
          }
          batch_generated_pins = [];
          generateNewPinsBatch(size);
        }
      }

      var batch_submission_count = 0;
      function generateNewPinsBatch(size) {
        var _max_capacity = 20;
        batches = Math.floor(size / _max_capacity);
        remainder = size % _max_capacity;

        btn_list_pins_trigger.disabled = true;
        batch_genpins_count = (remainder != 0) ? batches + 1 : batches;
        batch_submission_count = size;

        for (i = 0; i < batches; i++) {
          getReqCallbackAuth(`${generate_floating_pins}/${_max_capacity}/${orgid}`, updateBatchGenPinsCount);
        }
        if (remainder != 0) {
          getReqCallbackAuth(`${generate_floating_pins}/${remainder}/${orgid}`, updateBatchGenPinsCount);
        }
      }

      var batch_genpins_count = 0;
      function updateBatchGenPinsCount(result) {
        result = result.message;
        var length = result.length;
        for (i = 0; i < length; i++) {
          batch_generated_pins.push(result[i].pin);
        }

        batch_genpins_count -= 1;
        console.log('config_count',batch_genpins_count);

        if (batch_genpins_count <= 0) {
          var length = uploaded_batch.length;
          for (i = 0; i < length; i++) {
            var _entry = uploaded_batch[i];
            if (_entry.pin == '-') {
              _entry.pin = batch_generated_pins[i];
              _entry.orgid = localStorage.getItem('orgid');
              _entry.maxvltn = localStorage.getItem('preset-maxvltn');
              _entry.updfreq = localStorage.getItem('preset-updfreq');
              _entry.mindist = localStorage.getItem('preset-mindist');
              _entry.maxdist = localStorage.getItem('preset-maxdist');
              _entry.minalt = localStorage.getItem('preset-minalt');
              _entry.maxalt = localStorage.getItem('preset-maxalt');
              postReqCallbackWithParmAuth(set_floating_pins, _entry, _entry.mobile, updateBatchUploadTable);
            }
          }
        }
      }

      function updateBatchUploadTable(result, _mobile) {
        if (result.message) {
          result = result.message;
          var _pin = result.pin;
          
          var _index = _.findIndex(uploaded_batch, function(batch) {
            return batch.mobile == _mobile;
          });
          if (_index != -1) {
            uploaded_batch[_index].pin = _pin;
          }
        }
        batch_submission_count -= 1;
        if (batch_submission_count == 0) {
          buildBatchUploadTable();
        }
      }

// ===========================

      var alert_sms_batch = document.getElementById('sms-batch-alert');

      function batchSMSByPinsUpload() {
        var file = document.getElementById("sms-batch-file").files[0];
        if (file) {
          var fileName = document.getElementById("sms-batch-file").value;
          fileName = fileName.substring(fileName.lastIndexOf("\\") + 1, fileName.length);
          var fileExt = fileName.substring(fileName.lastIndexOf(".") + 1, fileName.length);
          if (fileExt.toLowerCase() != "csv" && fileExt.toLowerCase() != "txt") {
            errorAlert(alert_sms_batch, `Error: ${fileName} is not a valid CSV/TXT file.`, 3500);
            return;
          }
          fileName = fileName.substring(0, fileName.lastIndexOf("."));
          console.log(fileName);

          var reader = new FileReader();
          reader.readAsText(file, "UTF-8");
          reader.onload = function (evt) {
            var result = evt.target.result;
            console.log(result);
            processBatchSMSByPinsUpload(result);
          }
          reader.onerror = function (evt) {
            errorAlert(alert_sms_batch, "Error: Unable to read file.", 3500);
          }
        }
      }

      var template_header_pin = "PIN";
      var batch_sms_by_pins = [];

      function processBatchSMSByPinsUpload(result) {
        result = result.split('\n');
        var length = result.length;
        if (length <= 1) {
          errorAlert(alert_batch_upload, "Error: CSV/TXT file lacking contents.", 3500);
          return;
        } else {
          var header = result[0];
          console.log(header);
          var result = result.splice(1);
          batch_sms_by_pins = [];
          if (header.trim() == template_header_pin.trim()) {
            length = result.length;
            for (i = 0; i < length; i++) {
              console.log(result[i]);
              var _element = result[i].split(',');
              if (_element[0] != "") {
                batch_sms_by_pins.push(_element[0]);
                count++;
              }
            }
            warningAlert(alert_sms_batch, `Collected ${length} PINs.`, false);
          } else {
            errorAlert(alert_sms_batch, 'Error: Header should be "PIN" with a single column of PINs.', 3500);
            return;
          }
        }
      }

      function sendBatchSMSByPins() {
        if (batch_sms_by_pins.length == 0) {
          errorAlert(alert_sms_batch, "Error: Empty batch.", 3500);
          return;
        } else {
          warningAlert(alert_sms_batch, "Commencing batch SMS transmission...", false);
          batchSMSByPins();
        }
      }

      function batchSMSByPins() {
        var length = batch_sms_by_pins.length;
        
        var pins = [];

        for (i = 0; i < length; i++) {
          pins.push(batch_sms_by_pins[i].trim());
        }

        var payload = {
          "arrayofpins": pins
        }
        console.log("payload", payload)
        postReqCallback("https://lufthansadsl.tk/virusrip/otp/batchsms", payload, batchSMSByPinsComplete);
      }

      function batchSMSByPinsComplete(result) {
        console.log(result);
        successAlert(alert_sms_batch, "Successfully completed batch SMS broadcast.", 3500);
      }
// ========================= 

      var checker_datetime = document.getElementById('checker-datetime');
      var checker_info = document.getElementById('checker-info');
      var checker_datetime_wrapper = document.getElementById('checker-datetime-wrapper');
      var checker_info_wrapper = document.getElementById('checker-info-wrapper');
      
      pins_floating = [];
      function loadFloatingPins(details) {
        pins_floating.length = 0;
        var _html = "";
        list_floating_pins.innerHTML = _html;

        details = details.message.result;
        var _length = details.length;
        display_newpins.innerHTML = _length;

        for (i = 0; i < _length; i++) {
          pins_floating.push(details[i].pin);
          var _shade = (i % 2 == 0) ? 'shade' : '';
          _html = `<div class="col-4 col-lg-3 col-xl-2 px-1 py-0 ${_shade}"
            onclick="inputNewPin('${details[i].pin}');">${details[i].pin}</div>`;
          list_floating_pins.insertAdjacentHTML('beforeend', _html);
        }
        _html = '<div class="col-12 px-1 py-0">&nbsp;</div>';
        list_floating_pins.insertAdjacentHTML('beforeend', _html);
      }

      function downloadFloatingPins() {
        var str = "Pin,Mobile,SHN Start Date,SHN End Date";
        for (i = 0; i < pins_floating.length; i++) {
          str += '\n';
          str += `${pins_floating[i]},,,`;
        }
        var fileName = `pins_${orgid}_${moment().format('DD-MM-YYYY_hh-mma')}`;
        var uri = 'data:text/csv;charset=utf-8,' + str;
        var downloadLink = document.createElement('a');
        downloadLink.href = uri;
        downloadLink.download = `${fileName}.csv`;

        document.body.appendChild(downloadLink);
        downloadLink.click();
        document.body.removeChild(downloadLink);
      }

      var input_count_newpins = document.getElementById('input-count-newpins');
      var input_newpin = document.getElementById('input-newpin');
      var input_newpin_ccode = document.getElementById('input-newpin-ccode');
      var input_newpin_mobile = document.getElementById('input-newpin-mobile');
      var input_newpin_start = document.getElementById('input-newpin-start');
      var input_newpin_end =  document.getElementById('input-newpin-end');

      var input_newpin_maxvltn = document.getElementById('input-newpin-maxvltn');
      var input_newpin_updfreq = document.getElementById('input-newpin-updfreq');
      var input_newpin_mindist = document.getElementById('input-newpin-mindist');
      var input_newpin_maxdist = document.getElementById('input-newpin-maxdist');
      var input_newpin_minalt = document.getElementById('input-newpin-minalt');
      var input_newpin_maxalt = document.getElementById('input-newpin-maxalt');

      var input_list_pins_start = document.getElementById('input-list-pins-start');
      var input_list_pins_end = document.getElementById('input-list-pins-end');
      var input_list_pins_maxvltn = document.getElementById('input-list-pins-maxvltn');
      var input_list_pins_updfreq = document.getElementById('input-list-pins-updfreq');
      var input_list_pins_mindist = document.getElementById('input-list-pins-mindist');
      var input_list_pins_maxdist = document.getElementById('input-list-pins-maxdist');
      var input_list_pins_minalt = document.getElementById('input-list-pins-minalt');
      var input_list_pins_maxalt = document.getElementById('input-list-pins-maxalt');

      var alert_trigger = document.getElementById('trigger-alert');
      var alert_input_list_pins = document.getElementById('input-list-pins-alert');
      var alert_checker = document.getElementById('checker-alert');
      var alert_input_count_newpin = document.getElementById('input-count-newpin-alert');
      var alert_input_newpin = document.getElementById('input-newpin-alert');
      var alert_batch_upload = document.getElementById('batch-upload-alert');

      function inputNewPin(_pin) {
        input_newpin.value = _pin;
      }

      function clearInputNewMobile() {
        warningAlert(alert_input_newpin, "Clearing...", 3500);
        
        setTimeout(function() {
          clearAlert(alert_input_newpin);
        }, 1500);

        input_newpin.value = input_newpin_ccode.value = input_newpin_mobile.value 
        = input_newpin_maxvltn.value = input_newpin_updfreq.value = input_newpin_mindist.value
        = input_newpin_maxdist.value = input_newpin_minalt.value = input_newpin_maxalt.value = null;

        document.getElementById('input-newpin-maxvltn-preset').checked = false,
        document.getElementById('input-newpin-updfreq-preset').checked = false,
        document.getElementById('input-newpin-mindist-preset').checked = false,
        document.getElementById('input-newpin-maxdist-preset').checked = false,
        document.getElementById('input-newpin-minalt-preset').checked = false,
        document.getElementById('input-newpin-maxalt-preset').checked = false;
      }

      function clearInputListConfig() {
        warningAlert(alert_input_list_pins, "Clearing...", 3500);
        
        setTimeout(function() {
          clearAlert(alert_input_list_pins);
        }, 1500);

        input_list_pins_start.value = input_list_pins_end.value
        = input_list_pins_maxvltn.value = input_list_pins_updfreq.value = input_list_pins_mindist.value
        = input_list_pins_maxdist.value = input_list_pins_minalt.value = input_list_pins_maxalt.value = null;

        document.getElementById('input-list-pins-maxvltn-preset').checked = false,
        document.getElementById('input-list-pins-updfreq-preset').checked = false,
        document.getElementById('input-list-pins-mindist-preset').checked = false,
        document.getElementById('input-list-pins-maxdist-preset').checked = false,
        document.getElementById('input-list-pins-minalt-preset').checked = false,
        document.getElementById('input-list-pins-maxalt-preset').checked = false;
      }

      function getPresetMaxVltn() { return localStorage.getItem('preset-maxvltn'); }
      function getPresetUpdFreq() { return localStorage.getItem('preset-updfreq'); }
      function getPresetMinDist() { return localStorage.getItem('preset-mindist'); }
      function getPresetMaxDist() { return localStorage.getItem('preset-maxdist'); }
      function getPresetMinAlt() { return localStorage.getItem('preset-minalt'); }
      function getPresetMaxAlt() { return localStorage.getItem('preset-maxalt'); }

      function submitInputListConfig() {      
        var length = pins_configure.length;
        if (length == 0) {
          errorAlert(alert_input_list_pins, 'Error: No PIN is being re-configured.', 3500);
          return;
        }
        var plural = (length > 1) ? "s' " : "'s ";
        var settings = "";

        var _loastart = input_list_pins_start.value;
        var _loaend = input_list_pins_end.value;

        if (_loaend != "" || _loastart != "") {
          if (_loaend != "") {
            _loaend = _loaend.split('-');
            _loaend = `${_loaend[2]}/${_loaend[1]}/${_loaend[0]}`;

            settings += "SHN End Date";

            btn_list_config_submit.disabled = true;
            config_count = length;

            for (i = 0; i < length; i++) {
              var payload = {
                'pin': `${pins_configure[i]}`,
                'newdate': _loaend
              }
              postReqCallbackAuth(change_end_date, payload, updateConfigCount);
            }
          }
          if (_loastart != "") {
            _loastart = _loastart.split('-');
            _loastart = `${_loastart[2]}/${_loastart[1]}/${_loastart[0]}`;

            settings = (settings == "") ? "SHN Start Date"
            : "SHN Start and End Dates";

            btn_list_config_submit.disabled = true;
            config_count = length;

            for (i = 0; i < length; i++) {
              var payload = {
                'pin': `${pins_configure[i]}`,
                'newdate': _loastart
              }
              postReqCallbackAuth(change_start_date, payload, updateConfigCount);
            }
          }
        } else {
          var _maxvltn = input_list_pins_maxvltn.value;
          if (_maxvltn == "") { _maxvltn = parseInt(localStorage.getItem('default-maxvltn')); }
          var _updfreq = input_list_pins_updfreq.value;
          if (_updfreq == "") { _updfreq = parseInt(localStorage.getItem('default-updfreq')); }
          var _minalt = input_list_pins_minalt.value;
          if (_minalt == "") { _minalt = parseInt(localStorage.getItem('default-minalt')); }
          var _maxalt = input_list_pins_maxalt.value;
          if (_maxalt == "") { _maxalt = parseInt(localStorage.getItem('default-maxalt')); }
          var _mindist = input_list_pins_mindist.value;
          if (_mindist == "") { _mindist = parseInt(localStorage.getItem('default-mindist')); }
          var _maxdist = input_list_pins_maxdist.value;
          if (_maxdist == "") { _maxdist = parseInt(localStorage.getItem('default-maxdist')); }

          settings = "config settings";

          btn_list_config_submit.disabled = true;
          config_count = length;

          for (i = 0; i < length; i++) {
            var payload = {
              'pin': `${pins_configure[i]}`,
              'maxvltn': _maxvltn,
              'updfreq': _updfreq,
              'minalt': _minalt,
              'maxalt': _maxalt,
              'mindist': _mindist,
              'maxdist': _maxdist
            }
            console.log('pin', pins_configure[i], 'payload', payload);
            postReqCallbackAuth(change_config, payload, updateConfigCount);
          }
        }
        pins_configure.length = 0;

        successAlert(alert_input_list_pins, `${length} PIN${plural} ${settings} changed.`, 3500);
        getReqCallbackAuth(`${get_all}/${orgid}`, loadPinDetails);
      }

      function checkInputNewMobile() {
        var _mobile = input_newpin_mobile.value;
        if (_mobile == "") {
          errorAlert(alert_input_newpin, "Error: Empty mobile number field.", 3500);
          return;
        }
        else if (_mobile.length < 8) {
          errorAlert(alert_input_newpin, "Error: Incorrect mobile number length.", 3500);
          return;
        }
        getReqCallbackWithParmAuth(`${get_all_mobile}/${_mobile}`, _mobile, submitInputNewMobile);
      }

      function submitInputNewMobile(result, _mobile) {
        if (result.message.length > 0) {
          result = result.message[0];
          errorAlert(alert_input_newpin, "Error: PIN already assigned to mobile.", 3500);
          return;
        }

        var _pin = input_newpin.value;
        var _ccode = input_newpin_ccode.value;
        _ccode = _ccode.replace(/\+/g, "");
        if (_ccode == "") {
          _mobile = "65" + _mobile;
        } else {
          _mobile = _ccode + _mobile;
        }
        console.log(_mobile);
        var _loastart = input_newpin_start.value;
        var _loastart_str;
        var _loaend =  input_newpin_end.value;
        var _loaend_str;
        var skip = false;

        if (_pin.length != 8) {
          errorAlert(alert_input_newpin, 'Error: Invalid PIN', 3500);
          skip = true;
        }
        if (!skip && _mobile.length < 8) {
          errorAlert(alert_input_newpin, 'Error: Invalid mobile length', 3500);
          skip = true;
        }
        if (!skip) {
          if (_loastart != "") {
            _loastart = _loastart.split('-');
            _loastart = _loastart_str = `${_loastart[2]}/${_loastart[1]}/${_loastart[0]}`;
            _loastart = moment(_loastart, "MM/DD/YYYY").valueOf();
          } else {
            errorAlert(alert_input_newpin, 'Error: Empty SHN Start Date.', 3500);
            skip = true;
          }
        }
        if (!skip) {
          if (_loaend != "") {
            _loaend = _loaend.split('-');
            _loaend = _loaend_str = `${_loaend[2]}/${_loaend[1]}/${_loaend[0]}`;
            _loaend = moment(_loaend, "MM/DD/YYYY").valueOf();
          } else {
            errorAlert(alert_input_newpin, 'Error: Empty SHN End Date.', 3500);
            skip = true;
          }
        }
        if (!skip) {
          if (_loaend <= _loastart) {
            errorAlert(alert_input_newpin, 'Error: Invalid SHN Start and End Dates.', 3500);
            skip = true;
          }
        }

        var object = {};

        if (!skip) {
          object['orgid'] = localStorage.getItem('orgid');
          object['pin'] = _pin;
          object['mobile'] = parseInt(_mobile);
          object['loastart'] = _loastart_str;
          object['loaend'] = _loaend_str;

          var temp = input_newpin_maxvltn.value;
          if (temp != "") {
            object['maxvltn'] = parseInt(temp);
          } else {
            object['maxvltn'] = parseInt(localStorage.getItem('default-maxvltn'));
          }
          
          var temp = input_newpin_updfreq.value;
          if (temp != "") {
            object['updfreq'] = parseInt(temp);
          } else {
            object['updfreq'] = parseInt(localStorage.getItem('default-updfreq'));
          }
          
          var temp = input_newpin_mindist.value;
          if (temp != "") {
            object['mindist'] = parseInt(temp);
          } else {
            object['mindist'] = parseInt(localStorage.getItem('default-mindist'));
          }

          var temp = input_newpin_maxdist.value;
          if (temp != "") {
            object['maxdist'] = parseInt(temp);
          } else {
            object['maxdist'] = parseInt(localStorage.getItem('default-maxdist'));
          }
          
          var temp = input_newpin_minalt.value;
          if (temp != "") {
            object['minalt'] = parseInt(temp);
          } else {
            object['minalt'] = parseInt(localStorage.getItem('default-minalt'));
          }

          var temp = input_newpin_maxalt.value;
          if (temp != "") {
            object['maxalt'] = parseInt(temp);
          } else {
            object['maxalt'] = parseInt(localStorage.getItem('default-maxalt'));
          }
        } else {
          return;
        }
        console.log(object);
        postReqCallbackAuth(set_floating_pins, object, submittedMobile);
      }

      function submittedMobile(result) {
        if (result.error) {
          var _mobile = result.error.error;
          _mobile = _mobile.split('{');
          _mobile = _mobile[1];
          _mobile = _mobile.split('}');
          _mobile = _mobile[0];
          errorAlert(alert_input_newpin, `Error:  ${_mobile} has already been registered.`, 3500);
        }
        else if (result.message) {
          var _mobile = result.message.mobile;
          successAlert(alert_input_newpin, `Success:  ${_mobile} has been successfully registered.`, 3500);
          setTimeout(function() {
            clearInputNewMobile();
          }, 3510);
        }
      }

      function generateNewPins() {
        var count = input_count_newpins.value;
        var orgid = localStorage.getItem('orgid');
        if (count > 0 && orgid) {
          getReqCallbackAuth(`${generate_floating_pins}/${count}/${orgid}`, reviewGeneratedPins);
        } else if (count == 0 && orgid) {
          errorAlert(alert_input_count_newpin, "Error: Amount field is empty.", 3500);
        } else {
          errorAlert(alert_input_count_newpin, "Error: Please relog.", 3500);
        }
      }

      function reviewGeneratedPins(item) {
        input_count_newpins.value = "";
        var orgid = localStorage.getItem('orgid');
        var count = item.message.length;
        var plural = (count > 1) ? "s" : "";
        successAlert(alert_input_count_newpin, `${count} PIN${plural} generated.`, 3500);
        getReqCallback(`${get_floating_pins}/${orgid}`, loadFloatingPins);
      }

      function errorAlert(_element, _text, _timeout) {
        _element.classList.add('error-alert'),
        _element.classList.remove('success-alert'),
        _element.classList.remove('warning-alert'),
        _element.innerHTML = _text;
        
        if (_timeout) {
          setTimeout(function() {
            clearAlert(_element);
          }, _timeout);
        }
      }

      function clearAlert(_element) {
        _element.innerHTML = '&nbsp;';
      }

      function successAlert(_element, _text, _timeout) {
        _element.classList.add('success-alert'),
        _element.classList.remove('error-alert'),
        _element.classList.remove('warning-alert'),
        _element.innerHTML = _text;
        
        if (_timeout) {
          setTimeout(function() {
            clearAlert(_element);
          }, _timeout);
        }
      }

      function warningAlert(_element, _text, _timeout) {
        _element.classList.add('warning-alert'),
        _element.classList.remove('error-alert'),
        _element.classList.remove('success-alert'),
        _element.innerHTML = _text;

        if (_timeout) {
          setTimeout(function() {
            clearAlert(_element);
          }, _timeout);
        }
      }

      var pins;
      var pin_details;
      function loadPinDetails(details) {
        pins = [];
        pin_details = [];
        details = details.message;
        for (i = 0; i < details.length; i++) {
          var _pin = details[i].pin;
          pins.push(_pin);
          var _mobile = details[i].mobile;
          if (!_mobile || _mobile == "") { continue; }
          var _end = details[i].hrloaend;
          if (!_end) {
            _end = details[i].loaend;
            _end = moment(_end, "DD/MM/YYYY");
          }
          else { _end = parseInt(_end); }
          var _cur = Date.now();
          if (_cur > _end) { continue; }
          var _end_str = moment(_end).format("DD/MM/YYYY");
          var _start = details[i].hrloastart;
          if (!_start) {
            _start = details[i].loastart;
            _start = moment(_start, "DD/MM/YYYY");
          }
          else { _start = parseInt(_start); }
          var _start_str = moment(_start).format("DD/MM/YYYY");
          var _min_dist = details[i].mindist;
          var _max_dist = details[i].maxdist;
          var _min_alt = details[i].minalt;
          var _max_alt = details[i].maxalt;
          var _max_vltn = details[i].maxvltn;
          var _upd_freq = details[i].updfreq;
          var _lastupdate = details[i].lastupdate;
          var _lastupdate_str = moment(_lastupdate).format("DD/MM HH:mm");
          var _biolastpush
          try {
            _biolastpush = details[i].biopush.length;
          } catch {
            _biolastpush = 0;
          }
          var _biolastpush_str = "";
          if (_biolastpush > 0) {
            _biolastpush = details[i].biopush[_biolastpush - 1].ts;
            _biolastpush_str = moment(_biolastpush).format("DD/MM HH:mm");
          } else {
            _biolastpush = 0;
            _biolastpush_str = '-';
          }
          var _biolastupdate = details[i].biolastupdate;
          var _biolastupdate_str = moment(_biolastupdate).format("DD/MM HH:mm");
          var _multilogin = details[i].multilogin;
          var _issuspended = details[i].issuspended;

          var pin_detail = {
            pin: _pin,
            mobile: _mobile,
            start: _start,
            start_str: _start_str,
            end: _end,
            end_str: _end_str,
            min_dist: _min_dist,
            max_dist: _max_dist,
            min_alt: _min_alt,
            max_alt: _max_alt,
            max_vltn: _max_vltn,
            upd_freq: _upd_freq,
            last_update: _lastupdate,
            last_update_str: _lastupdate_str,
            bio_last_push: _biolastpush,
            bio_last_push_str: _biolastpush_str,
            bio_last_update: _biolastupdate,
            bio_last_update_str: _biolastupdate_str,
            multi_login: _multilogin,
            is_suspended: _issuspended
          }
          pin_details.push(pin_detail);
        }
        console.log(pins);
        buildPinDetailsTable();
      }

      var sort_by = "";
      var sort_order = "";      

      function sortAndBuildPinDetails(_id) {
        displayPinDetailsHeader(_id);
        sortPinDetails();
        buildPinDetailsTable();
      }

      function displayPinDetailsHeader(_id) {
        pins_configure.length = 0;
        pins_ad_hoc_push.length = 0;

        var _sort_by = _id.split('-')
        _sort_by = _sort_by[_sort_by.length - 1];
        var _sort_symbol = "";
        var _element;
        if (sort_by == "") {
          sort_by = _sort_by;
          sort_order = "asc";
          _sort_symbol = '<i class="fa fa-sort-asc" aria-hidden="true"></i>';
          _element = document.getElementById(_id);
        }
        else if (sort_by == _sort_by) {
          if (sort_order == "asc") {
            sort_order = "desc";
            _sort_symbol = '<i class="fa fa-sort-desc" aria-hidden="true"></i>';
          }
          else {
            sort_order = "asc";
          _sort_symbol = '<i class="fa fa-sort-asc" aria-hidden="true"></i>';
          }
          _element = document.getElementById(_id);
          sort_by = _sort_by;
        }
        else {
          var _element = document.getElementById(`list-info-${sort_by}`); 
          _element.innerHTML = getPinDetailsInfoHeader(sort_by);
          _element = document.getElementById(_id);
          sort_by = _sort_by;
          sort_order = "asc";
          _sort_symbol = '<i class="fa fa-sort-asc" aria-hidden="true"></i>';
        }
        _element.innerHTML = getPinDetailsInfoHeader(sort_by) + "&nbsp;"
          + _sort_symbol;
      }

      function sortPinDetails() {
        console.log('sort_by', sort_by);
        console.log('sort_order', sort_order);
        console.log(pin_details);
        pin_details = _.orderBy(pin_details, [sort_by], [sort_order]);
        console.log(pin_details);
      }

      var checkboxes = {
        config: false,
        ad_hoc_push: false
      }
      function selectAllCheckboxes(_name, _class) {
        var checkboxes = document.getElementsByClassName(_class);
        var checked = checkboxes[_name] = (checkboxes[_name]) ? false : true;
        for (i = 0; i < checkboxes.length; i++) {
          checkboxes[i].checked = checked;
        }
      }
      function clearAllCheckboxes(_class) {
        var checkboxes = document.getElementsByClassName(_class);
        for (i = 0; i < checkboxes.length; i++) {
          checkboxes[i].checked = false;
        }
      }

      function buildPinDetailsTable() {
        var _pin_details_content = "";
        var _pin_details_info_content = "";

        for (i = 0; i < pin_details.length; i++) {
          var _pin_detail = pin_details[i];
          _pin_details_content += buildPinDetailsContent(i, _pin_detail);
          _pin_details_content += buildPinConfigContent(i, _pin_detail.pin);
          _pin_details_info_content += buildPinDetailsInfoContent(i, _pin_detail);
        }
        _pin_details_content += '<div class="col-12 px-1 py-0">&nbsp;</div>';
        _pin_details_info_content += '<div class="col-12 px-1 py-0">&nbsp;</div>';

        list_pins.innerHTML = _pin_details_content,
        list_info.innerHTML = _pin_details_info_content;
      }

      function getPinDetailsInfoHeader(_sort_by) {
        switch (_sort_by) {
          case 'pin':             return "PIN";
          case 'mobile':          return "Mobile";
          case 'start':           return "SHN Start";
          case 'end':             return "SHN End";
          case 'min_alt':        return "Min. Altitude";
          case 'max_alt':        return "Max. Altitude";
          case 'min_dist':        return "Min. Distance";
          case 'max_dist':        return "Max. Distance";
          case 'max_vltn':        return "Max. Violations";
          case 'upd_freq':        return "Update Freq.";
          case 'last_update':     return "Last Update";
          case 'bio_last_push':   return "Last Bio. Push";
          case 'bio_last_update': return "Last Bio. Upd.";
          case 'watch_list_item': return "Watch List";
          default:                return "";
        }
      }

      function buildPinDetailsContent(_index, _pin_detail) {
        var _div_class = "col-7 px-1 py-0 v-mid";
        var _shade = (_index % 2 == 0) ? 'shade' : '';
        var _html = `<a href="#card-individual-checker">
          <span onclick="setIndividualCheckerUser('${_pin_detail.pin}')">
            ${_pin_detail.pin}</span></a>`;
        return buildContent(_div_class, _shade, _html);
      }

      var pins_configure = [];
      function buildPinConfigContent(_index, _pin) {
        var _div_class = "col-5 px-1 py-0 v-mid";
        var _shade = (_index % 2 == 0) ? 'shade' : '';
        var _configure =
          `&emsp;<input type="checkbox" class="checkbox-configure"
          onclick="(this.checked) 
          ? pins_configure.push('${_pin}')
          : pins_configure.splice(pins_configure.indexOf('${_pin}'), 1)"/>`
        return buildContent(_div_class, _shade, _configure);
      }

      function buildContent(div_class, shade, value) {
        return `<div class="${div_class} ${shade}">${value}</div>`;
      }

      var pins_ad_hoc_push = [];
      var pins_multi_login = [];
      var pins_non_multi_login = [];
      var pins_suspended = [];
      var pins_non_suspended = [];
      var pins_watch_list = [];

      function buildPinDetailsInfoContent(_index, _pin_detail) {
        //var _div_class = "col-1 px-1 py-0 mx-0 my-0 v-mid";
        var _div_class = "div-unit px-1 py-0 mx-0 my-0 v-mid";
        var _shade = (_index % 2 == 0) ? 'shade' : '';
        var _html = "";
        _html += buildContent(_div_class, _shade, _pin_detail.mobile);
        _html += buildContent(_div_class, _shade, _pin_detail.start_str);
        _html += buildContent(_div_class, _shade, _pin_detail.end_str);
        var _with_units = _pin_detail.min_alt;
        _with_units = (_with_units == "-") ? "-" : _with_units + "m";
        _html += buildContent(_div_class, _shade, _with_units);
        _with_units = _pin_detail.max_alt;
        _with_units = (_with_units == "-") ? "-" : _with_units + "m";
        _html += buildContent(_div_class, _shade, _with_units);
        _with_units = _pin_detail.min_dist;
        _with_units = (_with_units == "-") ? "-" : _with_units + "m";
        _html += buildContent(_div_class, _shade, _with_units);
        _with_units = _pin_detail.max_dist;
        _with_units = (_with_units == "-") ? "-" : _with_units + "m";
        _html += buildContent(_div_class, _shade, _with_units);
        _with_units = _pin_detail.max_vltn;
        _with_units = (_with_units == "-") ? "-" : _with_units + " times";
        _html += buildContent(_div_class, _shade, _with_units);
        _with_units = _pin_detail.upd_freq;
        _with_units = (_with_units == "-") ? "-" : _with_units + " mins";
        _html += buildContent(_div_class, _shade, _with_units);
        _html += buildContent(_div_class, _shade, _pin_detail.last_update_str);
        _html += buildContent(_div_class, _shade, _pin_detail.bio_last_push_str);
        _html += buildContent(_div_class, _shade, _pin_detail.bio_last_update_str);

        var _ad_hoc_push =
          `<input type="checkbox" class="checkbox-ad-hoc-push"
          onclick="(this.checked) 
          ? pins_ad_hoc_push.push('${_pin_detail.pin}')
          : pins_ad_hoc_push.splice(pins_ad_hoc_push.indexOf('${_pin_detail.pin}'), 1)"/>`
        _html += buildContent(_div_class, _shade, _ad_hoc_push);

        var _multi_login = (_pin_detail.multi_login == "true")
          ? `<input type="checkbox" checked
            onclick="(this.checked)
            ? pinArraysPushSplice('${_pin_detail.pin}', pins_multi_login, pins_non_multi_login)
            : pinArraysPushSplice('${_pin_detail.pin}', pins_non_multi_login, pins_multi_login)"/>`
          : `<input type="checkbox"
            onclick="(this.checked)
            ? pinArraysPushSplice('${_pin_detail.pin}', pins_multi_login, pins_non_multi_login)
            : pinArraysPushSplice('${_pin_detail.pin}', pins_non_multi_login, pins_multi_login)"/>`
        _html += buildContent(_div_class, _shade, _multi_login);

        var _is_suspended = (_pin_detail.is_suspended == "true")
          ? `<input type="checkbox" checked
            onclick="(this.checked)
            ? pinArraysPushSplice('${_pin_detail.pin}', pins_suspended, pins_non_suspended)
            : pinArraysPushSplice('${_pin_detail.pin}', pins_non_suspended, pins_suspended)"/>`
          : `<input type="checkbox"
            onclick="(this.checked)
            ? pinArraysPushSplice('${_pin_detail.pin}', pins_suspended, pins_non_suspended)
            : pinArraysPushSplice('${_pin_detail.pin}', pins_non_suspended, pins_suspended)"/>`
        _html += buildContent(_div_class, _shade, _is_suspended);

        /*
        var _watch_list_item = (_pin_detail.watch_list_item == "true")
          ? `<input type="checkbox" checked
            onclick="(this.checked)
            ? pins_watch_list.push('${_pin_detail.pin}')
            : pins_watch_list.splice(pins_watch_list.indexOf('${_pin_detail.pin}'), 1)"/>`
          : `<input type="checkbox"
            onclick="(this.checked)
            ? pins_watch_list.push('${_pin_detail.pin}')
            : pins_watch_list.splice(pins_watch_list.indexOf('${_pin_detail.pin}'), 1)"/>`
        _html += buildContent(_div_class, _shade, _watch_list_item);
        */

        //_html += "<div class='col-2 px-0 py-0'>&emsp;</div>";

        return _html;
      }

      function pinArraysPushSplice(_pin, toPush, toSplice) {
        toPush.push(_pin);
        toSplice.splice(toSplice.indexOf(_pin), 1);
      }

      var trigger_count = 0;
      var config_count = 0;
      function updateTriggerCount() {
        trigger_count -= 1;
        console.log('trigger_count',trigger_count);
        if (trigger_count <= 0) {
          btn_list_pins_trigger.disabled = false;
          successAlert(alert_trigger, "Successfully updated.", 3500);
        }
      }
      function updateConfigCount() {
        config_count -= 1;
        console.log('config_count',trigger_count);
        if (trigger_count <= 0) {
          btn_list_config_submit.disabled = false;
          successAlert(alert_trigger, "Successfully updated.", 3500);
        }
      }

      var btn_list_config_submit = document.getElementById('btn-list-config-submit');
      var btn_list_pins_trigger = document.getElementById('btn-list-pins-trigger');
      btn_list_pins_trigger.addEventListener('click', function() {
        var _max_capacity = 20;
        var str = "";
        var length = pins_ad_hoc_push.length;
        if (length > 0) {
          batches = Math.floor(length / _max_capacity);
          remainder = (length % _max_capacity == 0) ? false : true;

          btn_list_pins_trigger.disabled = true;
          trigger_count = (remainder) ? batches + 1 : batches;

          console.log('Ad-hoc push:', pins_ad_hoc_push.join(', '));
          str = "Updating...";

          for (i = 0; i < batches; i++) {
            var _pins = pins_ad_hoc_push.splice(0, _max_capacity);
            console.log(_pins);
            postReqCallbackAuth(ad_hoc_push, { "pins": _pins }, updateTriggerCount);
          }
          if (remainder) {
            console.log(pins_ad_hoc_push);
            postReqCallbackAuth(ad_hoc_push, { "pins": pins_ad_hoc_push }, updateTriggerCount);
          }
          pins_ad_hoc_push.length = 0;
          clearAdHocPushCheckboxes();
        }
        length = pins_multi_login.length;
        if (length > 0) {
          batches = Math.floor(length / _max_capacity);
          remainder = (length % _max_capacity == 0) ? false : true;

          btn_list_pins_trigger.disabled = true;
          trigger_count = (remainder) ? batches + 1 : batches;

          console.log('Multi-login enabled for:', pins_multi_login.join(', '));
          str = "Updating...";

          for (i = 0; i < batches; i++) {
            var _pins = pins_multi_login.splice(0, _max_capacity);
            console.log(_pins);
            postReqCallbackAuth(set_multi_login, { "pins": _pins, "value": "true"}, updateTriggerCount);
          }
          if (remainder) {
            console.log(pins_multi_login);
            postReqCallbackAuth(set_multi_login, { "pins": pins_multi_login, "value": "true"}, updateTriggerCount);
          }
          pins_multi_login.length = 0;
        }
        length = pins_non_multi_login.length;
        if (length > 0) {
          batches = Math.floor(length / _max_capacity);
          remainder = (length % _max_capacity == 0) ? false : true;

          btn_list_pins_trigger.disabled = true;
          trigger_count = (remainder) ? batches + 1 : batches;

          console.log('Multi-login disabled for:', pins_non_multi_login.join(', '));
          str = "Updating...";

          for (i = 0; i < batches; i++) {
            var _pins = pins_non_multi_login.splice(0, _max_capacity);
            console.log(_pins);
            postReqCallbackAuth(set_multi_login, { "pins": _pins, "value": "false"}, updateTriggerCount);
          }
          if (remainder) {
            console.log(pins_non_multi_login);
            postReqCallbackAuth(set_multi_login, { "pins": pins_non_multi_login, "value": "false"}, updateTriggerCount);
          }
          pins_non_multi_login.length = 0;
        }
        length = pins_suspended.length;
        if (length > 0) {
          batches = Math.floor(length / _max_capacity);
          remainder = (length % _max_capacity == 0) ? false : true;

          btn_list_pins_trigger.disabled = true;
          trigger_count = (remainder) ? batches + 1 : batches;

          console.log('Suspended:', pins_suspended.join(', '));
          str = "Updating...";

          for (i = 0; i < batches; i++) {
            var _pins = pins_suspended.splice(0, _max_capacity);
            console.log(_pins);
            postReqCallbackAuth(set_suspended, { "pins": _pins, "value": "true"}, updateTriggerCount);
          }
          if (remainder) {
            console.log(pins_suspended);
            postReqCallbackAuth(set_suspended, { "pins": pins_suspended, "value": "true"}, updateTriggerCount);
          }
          pins_suspended.length = 0;
        }
        length = pins_non_suspended.length;
        if (length > 0) {
          batches = Math.floor(length / _max_capacity);
          remainder = (length % _max_capacity == 0) ? false : true;

          btn_list_pins_trigger.disabled = true;
          trigger_count = (remainder) ? batches + 1 : batches;

          console.log('Not suspended:', pins_non_suspended.join(', '));
          str = "Updating...";

          for (i = 0; i < batches; i++) {
            var _pins = pins_non_suspended.splice(0, _max_capacity);
            console.log(_pins);
            postReqCallbackAuth(set_suspended, { "pins": _pins, "value": "false"}, updateTriggerCount);
          }
          if (remainder) {
            console.log(pins_non_suspended);
            postReqCallbackAuth(set_suspended, { "pins": pins_non_suspended, "value": "false"}, updateTriggerCount);
          }
          pins_non_suspended.length = 0;
        }
        if (str == "") {
          errorAlert(alert_trigger, "Error: Nothing to update.");
        } else {
          warningAlert(alert_trigger, str, false);
        }
      });

      function clearAdHocPushCheckboxes() {
        var elements = document.getElementsByClassName('checkbox-ad-hoc-push');
        for (i = 0; i < elements.length; i++) {
          elements[i].checked = false;
        }
      }

      var input_updfreq = document.getElementById('input-updfreq');
      var input_mindist = document.getElementById('input-mindist');
      var input_maxdist = document.getElementById('input-maxdist');
      var input_minalt = document.getElementById('input-minalt');
      var input_maxalt = document.getElementById('input-maxalt');
      var input_maxvltn = document.getElementById('input-maxvltn');

      function loadFrontEndConfig(config) {
        config = config.message;

        display_updfreq.innerText = input_newpin_updfreq.placeholder
        = input_list_pins_updfreq.placeholder = config.updfreq;
        localStorage.setItem('default-updfreq', config.updfreq);
        var temp = localStorage.getItem('preset-updfreq');
        if (!temp) {
          localStorage.setItem('preset-updfreq', config.updfreq);
          temp = config.updfreq;
        }
        input_updfreq.placeholder = temp;

        display_mindist.innerText = input_newpin_mindist.placeholder
        = input_list_pins_mindist.placeholder = config.mindist;
        localStorage.setItem('default-mindist', config.mindist);
        temp = localStorage.getItem('preset-mindist');
        if (!temp) {
          localStorage.setItem('preset-mindist', config.mindist);
          temp = config.mindist;
        }
        input_mindist.placeholder = temp;

        display_maxdist.innerText = input_newpin_maxdist.placeholder
        = input_list_pins_maxdist.placeholder = config.maxdist;
        localStorage.setItem('default-maxdist', config.maxdist);
        temp = localStorage.getItem('preset-maxdist');
        if (!temp) {
          localStorage.setItem('preset-maxdist', config.maxdist);
          temp = config.maxdist;
        }
        input_maxdist.placeholder = temp;

        display_minalt.innerText = input_newpin_minalt.placeholder
        = input_list_pins_minalt.placeholder = config.minalt;
        localStorage.setItem('default-minalt', config.minalt);
        temp = localStorage.getItem('preset-minalt');
        if (!temp) {
          localStorage.setItem('preset-minalt', config.minalt);
          temp = config.minalt;
        }
        input_minalt.placeholder = temp;

        display_maxalt.innerText = input_newpin_maxalt.placeholder
        = input_list_pins_maxalt.placeholder = config.maxalt;
        localStorage.setItem('default-maxalt', config.maxalt);
        temp = localStorage.getItem('preset-maxalt');
        if (!temp) {
          localStorage.setItem('preset-maxalt', config.maxalt);
          temp = config.maxalt;
        }
        input_maxalt.placeholder = temp;

        display_maxvltn.innerText = input_newpin_maxvltn.placeholder
        = input_list_pins_maxvltn.placeholder = config.maxvltn;
        localStorage.setItem('default-maxvltn', config.maxvltn);
        temp = localStorage.getItem('preset-maxvltn');
        if (!temp) {
          localStorage.setItem('preset-maxvltn', config.maxvltn);
          temp = config.maxvltn;
        }
        input_maxvltn.placeholder = temp;
      }

      function updatePresetConfig() {
        var temp = input_updfreq.value;
        if (temp != "") {
          localStorage.setItem('preset-updfreq', temp);
          input_updfreq.value = "",
          input_updfreq.placeholder = temp;
        }
        temp = input_mindist.value;
        if (temp != "") {
          localStorage.setItem('preset-mindist', temp);
          input_mindist.value = "",
          input_mindist.placeholder = temp;
        }
        temp = input_maxdist.value;
        if (temp != "") {
          localStorage.setItem('preset-maxdist', temp);
          input_maxdist.value = "",
          input_maxdist.placeholder = temp;
        }
        temp = input_minalt.value;
        if (temp != "") {
          localStorage.setItem('preset-minalt', temp);
          input_minalt.value = "",
          input_minalt.placeholder = temp;
        }
        temp = input_maxalt.value;
        if (temp != "") {
          localStorage.setItem('preset-maxalt', temp);
          input_maxalt.value = "",
          input_maxalt.placeholder = temp;
        }
        temp = input_maxvltn.value;
        if (temp != "") {
          localStorage.setItem('preset-maxvltn', temp);
          input_maxvltn.value = "",
          input_maxvltn.placeholder = temp;
        }
      }

      function loadBioConfig(config) {
        config = config.message.result[0].timings;
        input_push_am_start.value = config.morStart;
        input_push_am_end.value = config.morEnd;
        input_push_pm_start.value = config.aftStart;
        input_push_pm_end.value = config.aftEnd;
        input_push_ev_start.value = config.eveStart;
        input_push_ev_end.value = config.eveEnd;
      }

      function renderPage() {
        render_mode = sessionStorage.getItem('render-mode');
        if (debug) { console.log('render_mode', render_mode); }
        if (!render_mode) {
          render_mode = 'light';
          sessionStorage.setItem('render-mode', render_mode);
        } else if (render_mode == 'light') {
          document.body.classList.remove('dark');
        } else if (render_mode == 'dark') {
          document.body.classList.add('dark');
        }
      }

      function getDailySchedule() {
        var today = moment().format("DD-MM-YYYY");
        getReqCallback(`${get_scheduled_push_by_date}/${today}`, loadDailySchedule);
      }

      function processPushTiming(today, timing) {
        var ts = moment(`${today} ${timing}`, "DD-MM-YYYY h:m:s").valueOf();
        timing = timing.split(':');
        for (i = 0; i < timing.length; i++) {
          timing[i] = (timing[i] < 10) ? `0${timing[i]}` : timing[i];
        }
        timing = timing.join(':');
        return {
          ts: ts,
          timing: timing
        }
      }

      function loadDailySchedule(push_schedule) {
        push_schedule = push_schedule.message.result[0];
        var push_today = push_schedule.today;
        today_push_date.innerText = push_today;
        var push_am = push_schedule.scheduled.morning;
        var result = processPushTiming(push_today, push_am);
        var push_am_ts = result.ts;
        push_am = result.timing;
        console.log('push_am', push_am);
        var push_pm = push_schedule.scheduled.afternoon;
        result = processPushTiming(push_today, push_pm);
        var push_pm_ts = result.ts;
        push_pm = result.timing;
        console.log('push_pm', push_pm);
        var push_ev = push_schedule.scheduled.evening;
        result = processPushTiming(push_today, push_ev);
        var push_ev_ts = result.ts;
        push_ev = result.timing;
        console.log('push_ev', push_ev);
        var cur = Date.now();

        console.log('am', push_am_ts);
        console.log('pm', push_pm_ts);
        console.log('ev', push_ev_ts);
        console.log('cur', cur);

        var remove, add, status;
        if (cur >= push_am_ts) {
          setScheduledPushesStatus(today_push_am, today_push_am_status, true);
        } else {
          setScheduledPushesStatus(today_push_am, today_push_am_status, false);
        }
        today_push_am.innerText = push_am;

        if (cur >= push_pm_ts) {
          setScheduledPushesStatus(today_push_pm, today_push_pm_status, true);
        } else {
          setScheduledPushesStatus(today_push_pm, today_push_pm_status, false);
        }
        today_push_pm.innerText = push_pm;

        if (cur >= push_ev_ts) {
          setScheduledPushesStatus(today_push_ev, today_push_ev_status, true);
        } else {
          setScheduledPushesStatus(today_push_ev, today_push_ev_status, false);
        }
        today_push_ev.innerText = push_ev;
      }
      
      function setScheduledPushesStatus(element, element_status, done) {
        if (done) {
          element.classList.remove('pending'),
          element.classList.add('done'),
          element_status.classList.remove('pending'),
          element_status.classList.add('done'),
          element_status.innerHTML = '<i class="fa fa-check" aria-hidden="true"></i>';
        } else {
          element.classList.remove('done'),
          element.classList.add('pending'),
          element_status.classList.remove('done'),
          element_status.classList.add('pending'),
          element_status.innerHTML = '<i class="fa fa-hourglass-half" aria-hidden="true"></i>';
        }
      }

      function toggleDarkMode() {
        if (render_mode == 'light') {
          document.body.classList.add('dark');
          render_mode = 'dark';
        } else if (render_mode == 'dark') {
          document.body.classList.remove('dark');
          render_mode = 'light';
        }
        sessionStorage.setItem('render-mode', render_mode);
        if (debug) { console.log('render_mode', render_mode); }
      }

      function getScheduledPushes() {
        return {
          'today': moment().format('DD-MM-YYYY'),
          'timing': {
            'morstart': 8,
            'morend': 11,
            'aftstart': 12,
            'aftend': 14,
            'evestart': 15,
            'eveend': 18
          },
          'scheduled': {
            'morning': "11:24:25",
            'afternoon': "14:25:59",
            'evening': "16:54:54"
          }
        }
      }

      var retry = 0;
      var grabInterval = 600000; // 5 minutes
      var lastGrab;
      var lastPost;

      function getReqCallback(url, callback) {
        if (debug) { console.log(url); }
        $.ajax({
          url : `${url}`,
          type: "GET",
          processData: false,
          contentType: 'application/json',
          success: function(data, textStatus, jqXHR)
          {
            if (debug) { console.log(textStatus); console.log(data); }

            retry = 0;
            lastGrab = Date.now();
            
            callback(data);
          },
          error: function (err) {
            switch (err.status) {
              case 400:
                // bad request
                alert('Error 400: Bad Request');
                return;
              case 401:
                // unauthorized
                alert('Error 401: Unauthorized');
                return;
              case 403:
                // forbidden
                alert('Error 403: Forbidden');
                return;
              case 500:
                // internal server error
                alert('Error 500: Internal Server Error');
                return;
            }
            /*
            retry += 1000;
            setTimeout(function() {
              getReqCallback(url, callback);
            }, retry);
            */
          }
        });
      }

      function getReqCallbackWithParm(url, parm, callback) {
        if (debug) { console.log(url); }
        $.ajax({
          url : `${url}`,
          type: "GET",
          processData: false,
          contentType: 'application/json',
          success: function(data, textStatus, jqXHR)
          {
            if (debug) { console.log(textStatus); console.log(data); }

            retry = 0;
            lastGrab = Date.now();
            
            callback(data, parm);
          },
          error: function (err) {
            switch (err.status) {
              case 400:
                // bad request
                alert('Error 400: Bad Request');
                return;
              case 401:
                // unauthorized
                alert('Error 401: Unauthorized');
                return;
              case 403:
                // forbidden
                alert('Error 403: Forbidden');
                return;
              case 500:
                // internal server error
                alert('Error 500: Internal Server Error');
                return;
            }
            /*
            retry += 1000;
            setTimeout(function() {
              getReqCallbackWithParm(url, parm, callback)
            }, retry);
            */
          }
        });
      }
      
      function getReqCallbackAuth(url, callback) {
        if (debug) { console.log(url); }
        var token = localStorage.getItem('token');
        if (!token) { getReqCallback(url, callback); }
        $.ajax({
          url : `${url}`,
          type: "GET",
          headers: { "Authorization": `Bearer ${token}`, },
          processData: false,
          contentType: 'application/json',
          success: function(data, textStatus, jqXHR)
          {
            if (debug) { console.log(textStatus); console.log(data); }

            retry = 0;
            lastGrab = Date.now();
            
            callback(data);
          },
          error: function (err) {
            switch (err.status) {
              case 400:
                // bad request
                alert('Error 400: Bad Request');
                return;
              case 401:
                // unauthorized
                alert('Error 401: Unauthorized');
                return;
              case 403:
                // forbidden
                alert('Error 403: Forbidden');
                return;
              case 500:
                // internal server error
                alert('Error 500: Internal Server Error');
                return;
            }
            /*
            retry += 1000;
            setTimeout(function() {
              getReqCallbackAuth(url, callback);
            }, retry);
            */
          }
        });
      }

      function getReqCallbackWithParmAuth(url, parm, callback) {
        if (debug) { console.log(url); }
        var token = localStorage.getItem('token');
        if (!token) { getReqCallbackWithParm(url, parm, callback); }
        $.ajax({
          url : `${url}`,
          type: "GET",
          headers: { "Authorization": `Bearer ${token}`, },
          processData: false,
          contentType: 'application/json',
          success: function(data, textStatus, jqXHR)
          {
            if (debug) { console.log(textStatus); console.log(data); }

            retry = 0;
            lastGrab = Date.now();
            
            callback(data, parm);
          },
          error: function (err) {
            switch (err.status) {
              case 400:
                // bad request
                alert('Error 400: Bad Request');
                return;
              case 401:
                // unauthorized
                alert('Error 401: Unauthorized');
                return;
              case 403:
                // forbidden
                alert('Error 403: Forbidden');
                return;
              case 500:
                // internal server error
                alert('Error 500: Internal Server Error');
                return;
            }
            /*
            retry += 1000;
            setTimeout(function() {
              getReqCallbackWithParm(url, parm, callback);
            }, retry);
            */
          }
        });
      }

      function getReqCallbackWithParmAuth(url, parm, callback) {
        if (debug) { console.log(url); }
        var token = localStorage.getItem('token');
        if (!token) { getReqCallbackWithParm(url, parm, callback); }
        $.ajax({
          url : `${url}`,
          type: "GET",
          headers: { "Authorization": `Bearer ${token}`, },
          processData: false,
          contentType: 'application/json',
          success: function(data, textStatus, jqXHR)
          {
            if (debug) { console.log(textStatus); console.log(data); }

            retry = 0;
            lastGrab = Date.now();
            
            callback(data, parm);
          },
          error: function (err) {
            switch (err.status) {
              case 400:
                // bad request
                alert('Error 400: Bad Request');
                return;
              case 401:
                // unauthorized
                alert('Error 401: Unauthorized');
                return;
              case 403:
                // forbidden
                alert('Error 403: Forbidden');
                return;
              case 500:
                // internal server error
                alert('Error 500: Internal Server Error');
                return;
            }
            /*
            retry += 1000;
            setTimeout(function() {
              getReqCallbackWithParm(url, parm, callback);
            }, retry);
            */
          }
        });
      }

      function postReqCallback(url, obj, callback) {
        if (debug) {
          console.log("url", url);
          console.log("obj", obj);
        }
        $.ajax({
          url : `${url}`,
          type: "POST",
          processData: true,
          dataType: "json",
          contentType: "application/json; charset=utf-8",
          data: JSON.stringify(obj),
          success: function(data, textStatus, jqXHR)
          {
            if (debug) { console.log(textStatus); console.log(data); }

            retry = 0;
            lastPost = Date.now();
            
            callback(data);
          },
          error: function (err) {
            console.log(err);
            switch (err.status) {
              case 400:
                // bad request
                alert('Error 400: Bad Request');
                return;
              case 401:
                // unauthorized
                alert('Error 401: Unauthorized');
                return;
              case 403:
                // forbidden
                alert('Error 403: Forbidden');
                return;
              case 500:
                // internal server error
                alert('Error 500: Internal Server Error');
                return;
            }
            /*
            retry += 1000;
            setTimeout(function() {
              postReqCallback(url, obj, callback);
            }, retry);
            */
          }
        });
      }

      function postReq(url, obj) {
        if (debug) {
          console.log("url", url);
          console.log("obj", obj);
        }
        $.ajax({
          url : `${url}`,
          type: "POST",
          processData: true,
          dataType: "json",
          contentType: "application/json; charset=utf-8",
          data: JSON.stringify(obj),
          success: function(data, textStatus, jqXHR)
          {
            if (debug) { console.log(textStatus); console.log(data); }

            retry = 0;
            lastPost = Date.now();
          },
          error: function (err) {
            console.log(err);
            switch (err.status) {
              case 400:
                // bad request
                alert('Error 400: Bad Request');
                return;
              case 401:
                // unauthorized
                alert('Error 401: Unauthorized');
                return;
              case 403:
                // forbidden
                alert('Error 403: Forbidden');
                return;
              case 500:
                // internal server error
                alert('Error 500: Internal Server Error');
                return;
            }
            /*
            retry += 1000;
            setTimeout(function() {
              postReq(url, obj);
            }, retry);
            */
          }
        });
      }

      function postReqAuth(url, obj) {
        if (debug) {
          console.log("url", url);
          console.log("obj", obj);
        }
        var token = localStorage.getItem('token');
        if (!token) { postReq(url, obj); }
        $.ajax({
          url : `${url}`,
          type: "POST",
          headers: { "Authorization": `Bearer ${token}`, },
          processData: true,
          dataType: "json",
          contentType: "application/json; charset=utf-8",
          data : JSON.stringify(obj),      
          /*beforeSend: function (xhr) {   //Include the bearer token in header
              xhr.setRequestHeader("Authorization", 'Bearer '+ token);
          },*/
          success: function(data, textStatus, jqXHR)
          {
            if (debug) { console.log(textStatus); console.log(data); }

            retry = 0;
            lastPost = Date.now();
          },
          error: function (err) {
            console.log(err);
            switch (err.status) {
              case 400:
                // bad request
                alert('Error 400: Bad Request');
                return;
              case 401:
                // unauthorized
                alert('Error 401: Unauthorized');
                return;
              case 403:
                // forbidden
                alert('Error 403: Forbidden');
                return;
              case 500:
                // internal server error
                alert('Error 500: Internal Server Error');
                return;
            }
            /*
            retry += 1000;
            setTimeout(function() {
              postReqAuth(url, obj);
            }, retry);
            */
          }
        });
      }

      function postReqCallbackWithParm(url, obj, parm, callback) {
        if (debug) {
          console.log("url", url);
          console.log("obj", obj);
        }
        $.ajax({
          url : `${url}`,
          type: "POST",
          processData: true,
          dataType: "json",
          contentType: "application/json; charset=utf-8",
          data: JSON.stringify(obj),
          success: function(data, textStatus, jqXHR)
          {
            if (debug) { console.log(textStatus); console.log(data); }

            retry = 0;
            lastPost = Date.now();
            
            callback(data, parm);
          },
          error: function (err) {
            console.log(err);
            switch (err.status) {
              case 400:
                // bad request
                alert('Error 400: Bad Request');
                return;
              case 401:
                // unauthorized
                alert('Error 401: Unauthorized');
                return;
              case 403:
                // forbidden
                alert('Error 403: Forbidden');
                return;
              case 500:
                // internal server error
                alert('Error 500: Internal Server Error');
                return;
            }
            /*
            retry += 1000;
            setTimeout(function() {
              postReqCallbackWithParm(url, obj, parm, callback);
            }, retry);
            */
          }
        });
      }

      function postReqCallbackAuth(url, obj, callback) {
        if (debug) {
          console.log("url", url);
          console.log("obj", obj);
        }
        var token = localStorage.getItem('token');
        if (!token) { postReqCallback(url, obj, callback); }
        $.ajax({
          url : `${url}`,
          type: "POST",
          headers: { "Authorization": `Bearer ${token}`, },
          processData: true,
          dataType: "json",
          contentType: "application/json; charset=utf-8",
          data: JSON.stringify(obj),
          success: function(data, textStatus, jqXHR)
          {
            if (debug) { console.log(textStatus); console.log(data); }

            retry = 0;
            lastPost = Date.now();
            
            callback(data);
          },
          error: function (err) {
            console.log(err);
            switch (err.status) {
              case 400:
                // bad request
                alert('Error 400: Bad Request');
                return;
              case 401:
                // unauthorized
                alert('Error 401: Unauthorized');
                return;
              case 403:
                // forbidden
                alert('Error 403: Forbidden');
                return;
              case 500:
                // internal server error
                alert('Error 500: Internal Server Error');
                return;
            }
            /*
            retry += 1000;
            setTimeout(function() {
              postReqCallbackAuth(url, obj, callback);
            }, retry);
            */
          }
        });
      }

      function postReqCallbackWithParmAuth(url, obj, parm, callback) {
        if (debug) {
          console.log("url", url);
          console.log("obj", obj);
        }
        var token = localStorage.getItem('token');
        if (!token) { postReqCallbackWithParm(url, obj, parm, callback); }
        $.ajax({
          url : `${url}`,
          type: "POST",
          headers: { "Authorization": `Bearer ${token}`, },
          processData: true,
          dataType: "json",
          contentType: "application/json; charset=utf-8",
          data: JSON.stringify(obj),
          success: function(data, textStatus, jqXHR)
          {
            if (debug) { console.log(textStatus); console.log(data); }

            retry = 0;
            lastPost = Date.now();
            
            callback(data, parm);
          },
          error: function (err) {
            console.log(err);
            switch (err.status) {
              case 400:
                // bad request
                alert('Error 400: Bad Request');
                return;
              case 401:
                // unauthorized
                alert('Error 401: Unauthorized');
                return;
              case 403:
                // forbidden
                alert('Error 403: Forbidden');
                return;
              case 500:
                // internal server error
                alert('Error 500: Internal Server Error');
                return;
            }
            /*
            retry += 1000;
            setTimeout(function() {
              postReqCallbackWithParmAuth(url, obj, parm, callback);
            }, retry);
            */
          }
        });
      }

      function downloadFile(fileName, uriData) {
        if (debug) { console.log(`Downloading ${fileName}...`); }

        // Create element for download link.
        var downloadLink = document.createElement("a");
        downloadLink.href = uriData;
        downloadLink.download = fileName;

        // Create click event for download.
        document.body.appendChild(downloadLink);
        downloadLink.click();
        document.body.removeChild(downloadLink);
      }

      function downloadTemplate() {
        successAlert(alert_batch_upload, 'Initiating download...', 3500);
        var str = template_header_new + '\n';
        var fileName = `SHN_Bulk_Upload_Template.csv`;
        var uriData = 'data:text/csv;charset=UTF-8,' + str;
        downloadFile(fileName, uriData);
      }

      function downloadBatchCSV() {
        var length = uploaded_batch.length;
        if (length == 0) {
          errorAlert(alert_batch_upload, `Error: Empty batch.`, 3500);
          return;
        } else {
          successAlert(alert_batch_upload, 'Initiating download...', 3500);
        }

        var str = "PIN," + template_header_new + '\n';
        for (i = 0; i < length; i++) {
          str += uploaded_batch[i].pin;
          str += ',';
          str += uploaded_batch[i].mobile;
          str += ',';
          str += uploaded_batch[i].loastart;
          str += ',';
          str += uploaded_batch[i].loaend;
          str += '\n';
        }
        str = str.replace(/,\r\n/g,'\n');

        var fileName = `SHN_batch_${dateToday()}.csv`;
        var uriData = 'data:text/csv;charset=UTF-8,' + str;
        downloadFile(fileName, uriData);
      }

      function downloadCheckerCSV() {
        var length = checker_details.length;
        if (length == 0) {
          errorAlert(alert_checker, `Error: Empty CSV document.`, 3500);
          return;
        } else {
          successAlert(alert_checker, 'Initiating download...', 3500);
        }

        var str = "Date Time,Type,Suspension,Biometric,Pass or Fail,Distance,Altitude,Temperature,Symptoms";
        str += '\n';
        for (i = 0; i < length; i++) {
          str += moment(checker_details[i].datetime).format("DD/MM/YYYY HH:mm:ss");
          str += ',';
          str += checker_details[i].type;
          str += ',';
          str += checker_details[i].suspension;
          str += ',';
          str += checker_details[i].bio;
          str += ',';
          str += checker_details[i].pf;
          str += ',';
          str += checker_details[i].dist;
          str += ',';
          str += checker_details[i].alti;
          str += ',';
          str += checker_details[i].temp;
          str += ',';
          var _symp = checker_details[i].symp;
          if (_symp != "-") {
            _symp = _symp.replace('F', 'Fever');
            _symp = _symp.replace('C', 'Cough');
            _symp = _symp.replace('ST', 'Sore Throat');
            _symp = _symp.replace('RN', 'Runny Nose');
            _symp = _symp.replace('SoB', 'Shortness of Breath');
            _symp = _symp.replace(/,/g,' &');
          }
          str += _symp;
          str += '\n';
        }
        str = str.replace(/,\r\n/g,'\n');

        var fileName = `SHN_${checker_pin.value}_${dateToday()}_${checker_day_range.value}.csv`;
        var uriData = 'data:text/csv;charset=UTF-8,' + str;
        downloadFile(fileName, uriData);
      }

      function dateToday() {
        var now = moment();
        return now.format('YYYY-MM-DD');
      }
    </script>
  </body>
</html>