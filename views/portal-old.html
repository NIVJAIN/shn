<html lang="en-US" xmlns="http://www.w3.org/1999/xhtml">
  <head profile="http://gmpg.org/xfn/11">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>SHN Admin Portal</title>
    <meta property="og:site_name" content="Stay-Home-Notice Admin Portal">
    <meta property="og:title" content="Stay-Home-Notice Admin Portal">
    <meta name="description" content="An administrative portal for operators to configure the front-end and back-end services of the SHN app.">
    <meta property="og:description" content="An administrative portal for operators to configure the front-end and back-end services of the SHN app.">
    <meta property="og:description:secure_url" content="An administrative portal for operators to configure the front-end and back-end services of the SHN app.">
    <meta property="og:image" itemprop="image" content="/portal-ad.png">
    <meta property="og:image:secure_url" itemprop="image" content="/portal-ad.png">

    <link href="https://fonts.googleapis.com/css?family=Montserrat&amp;display=swap" rel="stylesheet">
    <link rel="icon" href="./favicon.ico" type="image/x-icon">

    <link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" crossorigin="anonymous">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
    integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
    crossorigin=""/>

    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
    integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
    crossorigin=""></script>
    <script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-image/v0.0.4/leaflet-image.js'></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dom-to-image/2.6.0/dom-to-image.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.10.2/jquery.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment-with-locales.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.15/lodash.min.js"></script>

    <style>
      body {
        font-family: 'Montserrat';
        background-color: lightgray;
        --scrollbar-thumb-color: gray;
        --scrollbar-color: #dfdfdf;
      }
      body.dark {
        background-color: #171e24;
        color: white;
        --scrollbar-thumb-color: #466d8a;
        --scrollbar-color: #263846;
      }
      a {
        color: grey;
      }
      body.dark a {
        color: white;
      }
      .banner {
        display: flex;
        align-items: center;
        height: 8vh;
      }
      .bg-gradient-imda {
        background-color: #e01f34;
        background-image: -webkit-gradient(linear, left top, left bottom, color-stop(10%, #e01f34), to(#70358f));
        background-image: linear-gradient(90deg, #e01f34 10%, #70358f 100%);
        background-size: cover;
      }
      body.dark .bg-gradient-imda {
        background-color: #e01f34;
        background-image: -webkit-gradient(linear, left top, left bottom, color-stop(10%, #e01f34), to(#70358f));
        background-image: linear-gradient(270deg, #e01f34 10%, #70358f 100%);
        background-size: cover;
      }
      .logo-container {
        display: inline-block;
        width: 100%;
        padding: 0.5vh;
      }
      .logo { height: 7vh;}
      .left { float: left; }
      .right { float: right; }
      .col {
        background-color: lightgray;
      }
      body.dark .col {
        background-color: #171e24;
      }
      body.dark .card {
        background-color: #1c2a35;
        color: white;
        border: 0px;
      }
      body.dark .card-header { border-bottom: 0px solid #9fa9b2; }
      body.dark .card-body { background-color: #2b4050; }
      body.dark .card-footer { border-top: 0px solid #9fa9b2; }
      body.dark hr { border: 1px solid #9fa9b2;}
      table {
        width: 100%;
      }
      body.dark table {
        background-color: #2b4050;
        color: lightgray;
      }
      body.dark table th {
        color: white;
      }
      .done {
        color: rgb(0,160,0);
      }
      .pending {
        color: rgb(200,160,0);
      }

      html>body #table-pins.scrollable-pins td {
        width: 28%;
      }
      html>body #table-pins.scrollable-pins td + td {
        width: 30%;
      }
      html>body #table-pins.scrollable-pins td + td + td {
        width: 26%;
      }
      html>body #table-pins.scrollable-pins td + td + td + td {
        text-align: center;
        width: 16%;
      }

      .scrollable-header-wrapper {
        font-weight: 600;
      }

      #list-pins-header div, #list-info-header div, #list-floating-header {
        font-weight: 600;
        cursor: pointer;
      }

      #list-pins-notch {
        cursor: pointer;
      }

      #list-info, #list-info-header {
        width: 1800px;
      }
      #list-pins-wrapper, #list-info-wrapper {
        height: 100px;
      }
      #list-pins-wrapper.expanded, #list-info-wrapper.expanded {
        height: 50vh;
      }

      #list-floating-wrapper {
        height: 100px;
      }

      #list-floating-wrapper.expanded {
        height: 50vh;
      }

      body.dark .content {
        background-color: rgba(255,255,255,0.075);
      }
      .content {
        background-color: rgba(0,0,0,0.075);
      }

      .vertical-scrollable-wrapper {
        width: 100%;
        overflow-x:hidden;
        overflow-y:scroll;
        scrollbar-color: var(--scrollbar-thumb-color) var(--scrollbar-color);
      }
      .horizontal-scrollable-wrapper {
        width: 100%;
        overflow-x:scroll;
        overflow-y:hidden;
        scrollbar-color: var(--scrollbar-thumb-color) var(--scrollbar-color);
      }
      .scrollable-hidden {
        overflow-x:hidden;
        overflow-y:hidden;
      }

      .v-mid {
        display: flex;
        align-items: center;
      }
      .t-center {
        text-align: center;
      }
      .shade {
        background-color:rgba(0,0,0,0.125);
      }
      .global-holder {
        height: 92vh;
        overflow-y:scroll;
      }
      .global-wrapper {
        height: 100%;
      }

      #curtain {
        position: absolute;
        width:100%;
        height:92vh;
        /*background-color: rgba(50,50,50,0.75);*/
        background-color: gray;
        z-index: 1;
      }

      .login {
        position: absolute;
        width: 300px;
        height: 230px;
        left: calc(50% - 150px);
        top: calc(50% - 115px);
        z-index: 2;
      }
      #login-alert {
        text-align: center;
        font-size: 0.7em;
      }
      #login-alert, .error-alert {
        color: red;
      }
      body.dark #login-alert, body.dark .error-alert {
        color: pink;
      }
      .forgot-password, .commentary {
        font-size: 0.7em;
      }

      #input-newpin-alert {
        text-align: center;
        font-size: 0.8em;
      }

      .success-alert {
        color: green;
      }
      body.dark .success-alert {
        color: limegreen;
      }

    </style>
  </head>
  <body class="dark">
    <!--START BANNER ROW-->
    <div class="row mx-0">
      <div class="col-12 px-0 banner bg-gradient-imda">
        <div class="logo-container" onclick="toggleDarkMode()">
          
          <div class="logo left">
            <svg version="1.1" viewBox="0 300 4800 2000" preserveAspectRatio="xMidYMid meet" class="svg-content logo left">
              <g transform="translate(0.000000,3200.000000) scale(0.1200000,-0.1200000)" fill="#FFFFFF" stroke="none">
                <path d="M2487 18672 c-1285 -1285 -2349 -2354 -2363 -2376 -87 -128 -135 -329 -114 -474 38 -263 179 -462 405 -572 106 -52 197 -72 320 -72 178 1 349 65 474 178 l61 56 0 -2206 0 -2206 3550 0 3550 0 0 2205 0 2205 70 -58 c119 -101 242 -154 392 -171 355 -40 691 190 784 539 12 44 18 102 18 180 0 136 -16 206 -76 330 -41 85 -44 88 -615 660 l-573 576 0 1182 0 1182 -590 0 -590 0 0 -592 0 -593 -1182 1182 -1183 1183 -2338 -2338z m2418 318 c45 -7 99 -25 153 -51 272 -131 379 -450 245 -729 -16 -34 -55 -84 -102 -131 -113 -113 -222 -159 -376 -159 -153 0 -277 51 -385 160 -100 100 -159 242 -160 381 0 63 34 190 67 252 59 108 184 216 294 252 98 33 164 39 264 25z m700 -1245 c278 -71 473 -346 506 -714 6 -73 9 -444 7 -1001 -3 -873 -3 -886 -24 -930 -23 -50 -80 -105 -130 -126 -86 -36 -224 -2 -277 68 -60 78 -57 26 -57 1008 l0 901 -52 -3 -53 -3 -5 -2415 -5 -2415 -30 -54 c-108 -195 -360 -230 -516 -72 -103 105 -94 -46 -97 1564 l-2 1407 -50 0 -50 0 -2 -1417 -3 -1418 -36 -65 c-65 -118 -175 -177 -310 -168 -118 9 -216 77 -267 186 l-27 57 -3 2408 -2 2407 -50 0 -49 0 -3 -907 -3 -908 -22 -41 c-28 -52 -90 -108 -138 -124 -20 -7 -65 -10 -100 -8 -82 5 -147 44 -190 112 l-30 49 0 996 0 996 23 85 c78 286 259 491 480 544 89 22 1483 22 1567 1z"/>
                <path d="M12820 20999 c-227 -19 -459 -63 -647 -125 -146 -48 -369 -158 -477 -235 -346 -246 -543 -605 -563 -1024 -22 -464 155 -830 520 -1074 272 -181 530 -272 1329 -466 566 -138 792 -232 938 -392 97 -106 137 -236 119 -388 -34 -281 -271 -467 -689 -541 -86 -16 -156 -19 -390 -19 -249 1 -301 3 -414 23 -436 76 -832 234 -1136 455 -34 25 -66 44 -70 42 -3 -2 -76 -160 -160 -351 l-154 -347 34 -29 c197 -167 590 -347 965 -442 313 -79 581 -110 940 -110 361 1 571 27 843 104 301 87 529 213 726 400 206 197 323 409 383 690 22 106 25 388 4 500 -68 376 -290 660 -668 853 -242 124 -454 192 -1042 338 -585 145 -748 199 -917 304 -87 55 -183 155 -217 227 -52 110 -58 255 -15 383 77 229 282 373 633 446 144 30 520 38 695 15 328 -43 692 -161 971 -315 60 -33 92 -46 95 -38 2 7 67 165 143 352 l138 340 -34 23 c-63 43 -257 140 -373 185 -450 178 -1003 257 -1510 216z"/>
                <path d="M15840 18490 l0 -2450 455 0 455 0 0 1050 0 1050 1265 0 1265 0 0 -1050 0 -1050 455 0 455 0 0 2450 0 2450 -455 0 -455 0 0 -1010 0 -1010 -1265 0 -1265 0 0 1010 0 1010 -455 0 -455 0 0 -2450z"/>
                <path d="M21510 18490 l0 -2450 450 0 450 0 2 1656 3 1655 1349 -1655 1350 -1656 373 0 373 0 0 2450 0 2450 -450 0 -450 0 -2 -1656 -3 -1655 -1349 1655 -1350 1656 -373 0 -373 0 0 -2450z"/>
                <path d="M23211 14569 c-528 -59 -976 -299 -1274 -681 -489 -628 -489 -1568 0 -2196 274 -352 665 -577 1149 -663 187 -33 512 -33 699 0 406 72 734 239 1005 511 125 125 217 253 299 410 308 595 257 1348 -127 1890 -82 115 -246 282 -367 372 -223 167 -507 286 -805 338 -144 25 -442 35 -579 19z m464 -455 c479 -73 877 -398 1034 -847 59 -168 75 -271 75 -477 0 -206 -16 -309 -75 -477 -158 -451 -549 -770 -1039 -849 -110 -18 -341 -20 -448 -5 -307 45 -566 172 -772 380 -183 185 -293 392 -352 664 -32 147 -32 427 0 574 59 272 169 479 352 664 309 311 751 446 1225 373z"/>
                <path d="M31031 14569 c-332 -37 -658 -158 -911 -337 -122 -86 -308 -271 -394 -392 -80 -112 -194 -337 -236 -468 -119 -368 -119 -795 0 -1164 42 -131 167 -377 245 -481 299 -401 745 -651 1270 -712 574 -66 1124 96 1481 437 52 50 94 94 94 98 0 4 -72 76 -160 160 l-160 152 -70 -65 c-227 -210 -490 -323 -804 -346 -428 -31 -825 109 -1107 390 -181 182 -301 412 -356 685 -24 124 -24 404 0 528 123 615 605 1033 1242 1076 402 27 727 -80 1016 -333 l86 -76 159 160 159 159 -50 51 c-235 240 -572 405 -950 464 -121 19 -438 27 -554 14z"/>
                <path d="M11310 12790 l0 -1750 1270 0 1270 0 0 215 0 215 -1020 0 -1020 0 0 570 0 570 880 0 880 0 0 210 0 210 -880 0 -880 0 0 540 0 540 985 0 985 0 0 215 0 215 -1235 0 -1235 0 0 -1750z"/>
                <path d="M14660 12790 l0 -1750 250 0 250 0 2 1301 3 1302 1045 -1299 1046 -1299 207 -3 207 -2 0 1750 0 1750 -250 0 -250 0 -2 -1301 -3 -1302 -1045 1299 -1046 1299 -207 3 -207 2 0 -1750z"/>
                <path d="M18720 12790 l0 -1750 250 0 250 0 0 710 0 710 880 0 880 0 0 215 0 215 -880 0 -880 0 0 610 0 610 985 0 985 0 0 215 0 215 -1235 0 -1235 0 0 -1750z"/>
                <path d="M26060 12790 l0 -1750 250 0 250 0 0 535 0 535 543 0 542 0 375 -535 374 -535 274 0 274 0 -35 48 c-103 141 -778 1104 -782 1115 -3 7 34 30 100 61 58 27 140 72 181 101 97 66 223 191 280 277 271 407 256 1020 -35 1405 -206 273 -551 438 -1010 483 -59 6 -415 10 -842 10 l-739 0 0 -1750z m1615 1297 c133 -24 205 -47 314 -99 88 -42 115 -61 185 -131 93 -93 144 -179 178 -304 32 -116 32 -356 0 -468 -90 -314 -343 -499 -745 -544 -55 -6 -300 -11 -572 -11 l-475 0 0 791 0 791 518 -5 c385 -4 537 -10 597 -20z"/>
                <path d="M33310 12790 l0 -1750 1270 0 1270 0 0 215 0 215 -1020 0 -1020 0 0 570 0 570 880 0 880 0 0 210 0 210 -880 0 -880 0 0 540 0 540 985 0 985 0 0 215 0 215 -1235 0 -1235 0 0 -1750z"/>
                <path d="M36660 12790 l0 -1750 250 0 250 0 0 535 0 535 543 0 542 0 375 -535 374 -535 274 0 274 0 -35 48 c-103 141 -778 1104 -782 1115 -3 7 34 30 100 61 58 27 140 72 181 101 97 66 223 191 280 277 271 407 256 1020 -35 1405 -206 273 -551 438 -1010 483 -59 6 -415 10 -842 10 l-739 0 0 -1750z m1615 1297 c133 -24 205 -47 314 -99 88 -42 115 -61 185 -131 93 -93 144 -179 178 -304 32 -116 32 -356 0 -468 -90 -314 -343 -499 -745 -544 -55 -6 -300 -11 -572 -11 l-475 0 0 791 0 791 518 -5 c385 -4 537 -10 597 -20z"/>
              </g>
                <!--
                <path d="M4611 20956 c-3410 -3409 -4345 -4350 -4384 -4407 -96 -146 -165 -314 -203 -494 -26 -126 -26 -384 0 -510 55 -264 169 -484 349 -672 200 -209 445 -344 724 -400 121 -24 384 -24 505 0 255 51 487 171 671 346 l77 74 0 -4097 0 -4096 6600 0 6600 0 0 4096 0 4097 78 -74 c183 -175 415 -295 670 -346 121 -24 384 -24 505 0 405 81 747 336 945 707 50 93 106 253 129 368 25 125 24 386 -1 507 -38 184 -108 350 -213 508 -33 49 -333 355 -1079 1099 l-1034 1031 0 2204 0 2203 -1100 0 -1100 0 0 -1102 0 -1103 -2198 2198 c-1208 1208 -2199 2197 -2202 2197 -3 0 -1955 -1950 -4339 -4334z m4581 565 c304 -80 563 -301 678 -578 61 -147 73 -212 73 -393 0 -181 -12 -246 -73 -393 -92 -223 -304 -435 -527 -527 -147 -61 -212 -73 -393 -73 -181 0 -246 12 -393 73 -223 92 -435 304 -527 527 -61 147 -73 212 -73 393 0 181 12 246 73 393 124 299 413 530 738 592 107 20 322 13 424 -14z m1252 -2304 c411 -129 721 -496 850 -1005 57 -223 56 -184 56 -2050 0 -1879 3 -1779 -57 -1882 -179 -305 -607 -305 -786 0 -60 103 -57 9 -57 1817 l0 1653 -100 0 -100 0 0 -4435 c0 -3199 -3 -4449 -11 -4487 -6 -29 -29 -91 -50 -137 -55 -117 -162 -225 -280 -280 -175 -82 -343 -82 -518 0 -118 55 -225 163 -280 280 -21 46 -44 108 -50 137 -8 38 -11 789 -11 2637 l0 2585 -100 0 -100 0 0 -2585 c0 -1848 -3 -2599 -11 -2637 -6 -29 -29 -91 -50 -137 -55 -117 -162 -225 -280 -280 -175 -82 -343 -82 -518 0 -118 55 -225 163 -280 280 -21 46 -44 108 -50 137 -8 38 -11 1288 -11 4487 l0 4435 -100 0 -100 0 0 -1653 c0 -1808 3 -1714 -57 -1817 -179 -305 -607 -305 -786 0 -60 103 -57 3 -57 1882 0 1492 2 1732 15 1835 85 643 463 1128 966 1238 53 11 295 13 1444 12 l1380 -2 89 -28z"/>
                <path d="M21205 20964 c-286 -28 -481 -66 -671 -129 -670 -224 -1044 -702 -1044 -1333 0 -416 165 -749 484 -976 257 -183 529 -285 1218 -455 244 -61 486 -123 539 -140 474 -146 669 -322 669 -605 0 -159 -44 -263 -159 -376 -87 -85 -169 -133 -307 -179 -268 -90 -718 -107 -1084 -41 -385 70 -778 230 -1058 430 -46 33 -86 60 -90 60 -4 0 -76 -156 -161 -347 -114 -258 -151 -351 -144 -362 32 -52 313 -222 496 -301 403 -172 846 -264 1332 -277 1045 -27 1782 351 2009 1030 51 155 61 226 60 442 -1 191 -2 205 -32 319 -105 400 -374 664 -879 865 -170 68 -370 125 -835 240 -518 129 -618 159 -794 247 -103 50 -147 78 -203 130 -121 112 -169 247 -150 419 32 293 275 488 699 562 140 25 553 25 710 0 285 -46 572 -139 838 -273 l164 -82 15 36 c9 21 73 179 144 352 l128 315 -22 17 c-42 33 -295 158 -411 203 -225 87 -501 155 -776 191 -118 15 -586 28 -685 18z"/>
                <path d="M24200 18450 l0 -2450 455 0 455 0 0 1050 0 1050 1265 0 1265 0 0 -1050 0 -1050 455 0 455 0 0 2450 0 2450 -455 0 -455 0 0 -1010 0 -1010 -1265 0 -1265 0 0 1010 0 1010 -455 0 -455 0 0 -2450z"/>
                <path d="M29870 18450 l0 -2450 450 0 450 0 2 1654 3 1655 1348 -1655 1349 -1654 374 0 374 0 0 2450 0 2450 -450 0 -450 0 -2 -1654 -3 -1655 -1348 1655 -1349 1654 -374 0 -374 0 0 -2450z"/>
                <path d="M31550 14529 c-782 -96 -1373 -590 -1559 -1301 -49 -188 -56 -247 -56 -478 0 -231 7 -290 56 -478 189 -722 796 -1220 1588 -1303 142 -15 432 -7 556 16 213 38 450 117 604 202 433 239 731 620 850 1084 49 191 56 249 56 479 0 230 -7 288 -56 479 -119 464 -417 845 -850 1084 -153 85 -389 164 -604 203 -106 19 -471 28 -585 13z m540 -464 c273 -61 495 -179 675 -360 187 -188 308 -421 360 -695 13 -68 19 -142 19 -260 0 -183 -16 -293 -65 -443 -109 -334 -356 -615 -672 -766 -177 -84 -335 -120 -557 -128 -272 -9 -465 29 -685 137 -270 131 -460 319 -591 585 -101 202 -138 368 -138 615 0 176 14 276 59 425 31 103 118 279 183 371 195 275 520 471 877 529 120 19 429 13 535 -10z"/>
                <path d="M39370 14529 c-637 -74 -1168 -435 -1431 -974 -206 -423 -237 -945 -84 -1403 87 -261 211 -460 409 -657 145 -145 264 -234 425 -318 401 -209 910 -273 1370 -171 303 68 547 189 768 383 133 116 131 107 32 208 -46 46 -119 116 -161 155 l-78 70 -68 -61 c-136 -122 -252 -197 -402 -258 -172 -71 -344 -98 -575 -90 -239 9 -411 51 -600 147 -128 65 -212 126 -323 234 -188 183 -305 401 -363 676 -18 86 -22 137 -22 280 0 143 4 194 22 280 58 275 175 493 363 676 193 188 399 297 670 355 137 30 399 37 543 15 258 -40 501 -157 682 -329 l73 -69 165 158 166 159 -97 92 c-248 239 -573 386 -967 438 -127 16 -391 18 -517 4z"/>
                <path d="M19670 12750 l0 -1750 1270 0 1270 0 0 220 0 220 -1020 0 -1020 0 0 560 0 560 878 2 877 3 3 213 2 212 -880 0 -880 0 0 535 0 535 985 0 985 0 0 220 0 220 -1235 0 -1235 0 0 -1750z"/>
                <path d="M23020 12750 l0 -1750 250 0 250 0 2 1300 3 1300 1045 -1299 1045 -1300 208 -1 207 0 0 1750 0 1750 -250 0 -250 0 -2 -1300 -3 -1300 -1045 1299 -1045 1300 -207 1 -208 0 0 -1750z"/>
                <path d="M27080 12750 l0 -1750 250 0 250 0 0 710 0 710 880 0 880 0 0 215 0 215 -880 0 -880 0 0 605 0 605 985 0 985 0 0 220 0 220 -1235 0 -1235 0 0 -1750z"/>
                <path d="M34420 12750 l0 -1750 250 0 250 0 0 530 0 530 448 0 c246 0 490 3 542 6 l95 5 374 -535 374 -536 274 0 274 0 -19 28 c-10 15 -194 275 -407 577 -213 303 -389 555 -392 561 -2 6 28 23 66 38 91 36 214 110 303 183 249 204 388 522 388 891 0 688 -440 1127 -1212 1211 -60 7 -389 11 -853 11 l-755 0 0 -1750z m1570 1300 c296 -37 508 -150 632 -339 140 -214 155 -554 35 -801 -32 -67 -58 -102 -122 -166 -68 -68 -97 -89 -185 -133 -124 -61 -252 -95 -411 -110 -63 -6 -318 -11 -566 -11 l-453 0 0 785 0 785 493 0 c280 0 529 -4 577 -10z"/>
                <path d="M41670 12750 l0 -1750 1270 0 1270 0 0 220 0 220 -1020 0 -1020 0 0 560 0 560 878 2 877 3 3 213 2 212 -880 0 -880 0 0 535 0 535 985 0 985 0 0 220 0 220 -1235 0 -1235 0 0 -1750z"/>
                <path d="M45020 12750 l0 -1750 250 0 250 0 0 530 0 530 448 0 c246 0 490 3 542 6 l95 5 374 -535 374 -536 274 0 274 0 -19 28 c-10 15 -194 275 -407 577 -213 303 -389 555 -392 561 -2 6 28 23 66 38 91 36 214 110 303 183 249 204 388 522 388 891 0 688 -440 1127 -1212 1211 -60 7 -389 11 -853 11 l-755 0 0 -1750z m1570 1300 c296 -37 508 -150 632 -339 140 -214 155 -554 35 -801 -32 -67 -58 -102 -122 -166 -68 -68 -97 -89 -185 -133 -124 -61 -252 -95 -411 -110 -63 -6 -318 -11 -566 -11 l-453 0 0 785 0 785 493 0 c280 0 529 -4 577 -10z"/>
              </g>
              -->
            </svg>
          </div>

          <div class="logo right">
            <svg version="1.1" viewBox="0 -108 1418 600" preserveAspectRatio="xMidYMid meet" class="svg-content logo right">
              <g transform="translate(0.000000,357.000000) scale(0.100000,-0.100000)" fill="#FFFFFF" stroke="none">
                <path d="M8393 3551 c-117 -42 -208 -143 -234 -255 -19 -88 -8 -213 26 -282 72 -146 217 -223 401 -212 148 9 269 91 332 225 24 51 27 70 27 163 0 93 -3 111 -27 163 -72 153 -184 217 -377 217 -68 -1 -111 -6 -148 -19z m269 -177 c52 -36 78 -87 85 -162 7 -71 -8 -121 -50 -168 -37 -43 -68 -59 -130 -68 -86 -13 -175 45 -205 133 -27 78 -9 186 41 240 62 68 182 80 259 25z"/>
                <path d="M9283 3555 c-106 -33 -196 -115 -234 -214 -17 -43 -22 -78 -23 -151 0 -82 3 -103 26 -152 38 -82 75 -126 141 -169 107 -69 258 -86 370 -42 59 23 137 79 137 97 0 8 -27 37 -59 65 l-59 52 -45 -32 c-65 -45 -129 -50 -199 -16 -60 30 -91 70 -109 139 -24 101 21 207 105 248 66 31 149 25 201 -14 l37 -29 62 62 61 62 -35 29 c-63 53 -148 80 -248 79 -48 0 -106 -6 -129 -14z"/>
                <path d="M9983 3556 c-185 -60 -287 -235 -254 -435 25 -152 125 -263 275 -306 79 -23 209 -16 289 14 71 28 153 104 193 181 27 52 29 62 29 180 0 121 -1 127 -32 186 -38 72 -96 127 -172 162 -49 23 -71 27 -171 29 -77 2 -129 -2 -157 -11z m222 -165 c151 -68 164 -307 21 -387 -147 -82 -298 12 -300 186 -2 163 139 265 279 201z"/>
                <path d="M0 1786 c0 -971 3 -1766 6 -1766 3 0 178 91 390 202 l384 202 0 1355 0 1356 -380 205 c-210 113 -385 207 -390 208 -7 2 -10 -633 -10 -1762z"/>
                <path d="M2043 3342 l-382 -207 -1 -1355 0 -1355 381 -200 c209 -110 387 -201 395 -203 12 -3 14 244 14 1762 0 1407 -3 1766 -12 1765 -7 0 -185 -94 -395 -207z"/>
                <path d="M3660 3543 c0 -21 785 -1762 791 -1756 6 7 757 1682 780 1741 l9 22 -790 0 c-435 0 -790 -3 -790 -7z"/>
                <path d="M6450 3185 l0 -365 90 0 90 0 0 365 0 365 -90 0 -90 0 0 -365z"/>
                <path d="M6780 3185 l0 -366 88 3 87 3 -3 228 c-1 125 0 227 2 227 2 0 68 -104 146 -230 l143 -231 101 3 101 3 3 363 2 362 -90 0 -90 0 -2 -224 -3 -225 -138 225 -139 224 -104 0 -104 0 0 -365z"/>
                <path d="M7600 3185 l0 -366 93 3 92 3 3 138 3 137 139 0 140 0 0 80 0 80 -140 0 -140 0 0 70 0 70 150 0 150 0 0 75 0 75 -245 0 -245 0 0 -365z"/>
                <path d="M10610 3185 l0 -365 85 0 85 0 0 243 1 242 87 -243 87 -243 64 3 65 3 88 240 c48 132 89 243 90 248 2 4 1 -105 -1 -243 l-3 -250 91 0 91 0 0 365 0 365 -129 0 -129 0 -67 -197 c-38 -109 -73 -210 -79 -226 -10 -25 -17 -10 -91 198 l-80 225 -127 0 -128 0 0 -365z"/>
                <path d="M11590 3185 l0 -365 85 0 85 0 0 248 1 247 88 -245 88 -245 64 -3 65 -3 89 246 90 246 3 -246 2 -246 88 3 87 3 3 363 2 362 -132 0 -133 0 -75 -220 c-41 -121 -77 -220 -80 -220 -3 0 -39 98 -81 218 l-76 217 -131 3 -132 3 0 -366z"/>
                <path d="M6450 2255 l0 -365 85 0 85 0 1 238 0 237 86 -237 86 -238 67 0 68 0 72 198 c40 108 80 216 89 239 16 40 16 31 13 -197 l-4 -240 91 0 91 0 0 365 0 365 -129 0 -129 0 -67 -197 c-36 -109 -71 -211 -78 -226 -12 -27 -16 -17 -91 197 l-79 226 -128 0 -129 0 0 -365z"/>
                <path d="M7410 2255 l0 -365 255 0 255 0 0 75 0 75 -170 0 -170 0 0 70 0 70 150 0 150 0 0 80 0 80 -150 0 -150 0 0 60 0 60 160 0 160 0 0 80 0 80 -245 0 -245 0 0 -365z"/>
                <path d="M8010 2255 l0 -365 170 0 c93 0 193 5 222 11 204 44 318 208 288 417 -11 79 -40 140 -93 192 -86 86 -174 110 -419 110 l-168 0 0 -365z m367 190 c97 -29 146 -117 129 -227 -18 -109 -110 -168 -261 -168 l-45 0 0 205 0 205 63 0 c35 0 86 -7 114 -15z"/>
                <path d="M8790 2255 l0 -365 90 0 90 0 0 365 0 365 -90 0 -90 0 0 -365z"/>
                <path d="M9195 2264 c-82 -195 -152 -360 -153 -365 -3 -6 35 -9 98 -7 l103 3 26 68 26 67 136 0 136 0 25 -67 25 -68 101 -3 c56 -1 102 1 102 5 0 4 -66 169 -147 365 l-148 358 -90 0 -90 0 -150 -356z m273 36 c17 -47 33 -93 37 -102 6 -16 -1 -18 -74 -18 -45 0 -81 3 -81 6 0 19 76 212 81 206 3 -4 20 -45 37 -92z"/>
                <path d="M3320 1157 l0 -1137 455 0 c297 0 455 3 455 10 0 14 -891 2243 -901 2255 -5 5 -9 -498 -9 -1128z"/>
                <path d="M5551 2268 c-5 -13 -206 -516 -446 -1118 -241 -602 -440 -1103 -442 -1112 -5 -17 21 -18 451 -18 l456 0 0 1135 c0 624 -2 1135 -5 1135 -3 0 -9 -10 -14 -22z"/>
                <path d="M10000 1685 c-108 -30 -194 -109 -238 -218 -21 -54 -24 -72 -20 -166 3 -98 6 -111 37 -169 41 -76 104 -135 179 -170 83 -38 232 -44 327 -12 85 28 171 105 215 192 28 57 30 69 30 169 0 143 -21 202 -99 280 -76 76 -142 101 -276 105 -68 3 -118 -1 -155 -11z m193 -156 c58 -16 114 -72 132 -132 19 -64 19 -102 0 -158 -30 -88 -95 -133 -192 -134 -52 0 -68 4 -105 30 -117 81 -124 276 -14 360 57 43 110 53 179 34z"/>
                <path d="M6450 1315 l0 -365 158 0 c172 0 252 11 319 42 66 31 138 102 170 166 25 51 28 68 28 157 0 93 -2 105 -33 167 -34 69 -87 124 -146 152 -76 36 -148 46 -323 46 l-173 0 0 -365z m378 189 c78 -32 112 -87 112 -179 0 -135 -84 -205 -247 -205 l-63 0 0 206 0 207 81 -7 c45 -4 98 -13 117 -22z"/>
                <path d="M7220 1315 l0 -365 260 0 260 0 0 80 0 80 -170 0 -170 0 0 70 0 70 150 0 150 0 0 75 0 75 -150 0 -150 0 0 65 0 65 160 0 160 0 0 75 0 75 -250 0 -250 0 0 -365z"/>
                <path d="M7805 1643 c8 -21 71 -184 139 -363 l123 -325 91 -3 c66 -2 91 1 95 10 3 7 64 166 137 353 73 187 134 346 137 353 4 10 -17 12 -98 10 l-103 -3 -82 -250 -81 -250 -82 253 -82 252 -104 0 -105 0 15 -37z"/>
                <path d="M8610 1315 l0 -365 255 0 255 0 0 80 0 80 -165 0 -165 0 0 70 0 70 150 0 150 0 0 75 0 75 -150 0 -150 0 0 65 0 65 155 0 155 0 0 75 0 75 -245 0 -245 0 0 -365z"/>
                <path d="M9230 1315 l0 -365 230 0 230 0 0 80 0 80 -140 0 -140 0 0 285 0 285 -90 0 -90 0 0 -365z"/>
                <path d="M10620 1316 l0 -366 95 0 95 0 0 134 0 133 93 5 c187 10 277 85 277 233 0 75 -15 119 -56 157 -59 55 -92 62 -306 66 l-198 4 0 -366z m348 198 c17 -12 22 -25 22 -59 0 -58 -26 -76 -120 -83 l-70 -5 0 82 0 81 73 0 c49 0 80 -5 95 -16z"/>
                <path d="M11250 1315 l0 -365 88 0 89 0 -4 243 -3 242 53 -145 c29 -80 69 -189 88 -242 l34 -98 66 0 c54 0 68 3 74 18 3 9 43 116 87 237 44 121 83 222 85 225 3 3 2 -104 -2 -237 l-7 -243 91 0 91 0 0 365 0 365 -128 0 -127 0 -69 -202 c-38 -112 -74 -214 -79 -228 -8 -22 -16 -5 -63 130 -29 85 -66 188 -80 228 l-26 72 -129 0 -129 0 0 -365z"/>
                <path d="M12230 1315 l0 -365 255 0 255 0 0 80 0 80 -165 0 -165 0 0 70 0 70 150 0 150 0 0 75 0 75 -150 0 -150 0 0 65 0 65 160 0 160 0 0 75 0 75 -250 0 -250 0 0 -365z"/>
                <path d="M12850 1315 l0 -365 90 0 90 0 -6 233 c-4 161 -2 227 5 217 6 -8 71 -112 144 -230 l133 -215 102 -3 102 -3 0 366 0 365 -85 0 -85 0 -2 -227 -3 -226 -140 226 -140 227 -102 0 -103 0 0 -365z"/>
                <path d="M13590 1605 l0 -75 105 0 105 0 0 -290 0 -290 90 0 90 0 0 290 0 290 100 0 100 0 0 75 0 75 -295 0 -295 0 0 -75z"/>
                <path d="M9573 741 c-76 -28 -139 -77 -183 -143 -48 -72 -64 -141 -58 -249 8 -147 74 -250 200 -313 70 -36 72 -36 197 -36 118 0 130 2 186 29 73 34 146 110 183 189 24 51 27 69 27 162 0 95 -3 111 -29 168 -41 89 -124 165 -212 192 -88 27 -237 27 -311 1z m233 -160 c141 -64 163 -292 35 -378 -87 -59 -184 -50 -256 21 -62 62 -80 149 -50 237 39 113 164 169 271 120z"/>
                <path d="M6607 403 c-80 -192 -149 -356 -153 -365 -6 -16 3 -18 94 -18 l99 0 25 68 25 67 135 3 136 3 27 -71 27 -70 104 0 c58 0 103 3 101 7 -2 5 -71 169 -153 366 l-148 357 -86 0 -86 0 -147 -347z m272 25 c19 -51 36 -99 38 -105 4 -10 -15 -13 -77 -13 -62 0 -81 3 -77 13 2 6 19 54 38 105 18 50 36 92 39 92 3 0 21 -42 39 -92z"/>
                <path d="M7250 492 c0 -285 7 -329 59 -392 16 -20 53 -49 82 -65 46 -25 68 -30 145 -33 121 -6 185 13 252 73 83 75 86 88 90 403 l3 273 -93 -3 -93 -3 -5 -252 c-5 -235 -6 -253 -26 -280 -38 -51 -123 -64 -180 -27 -49 33 -54 63 -54 323 l0 241 -90 0 -90 0 0 -258z"/>
                <path d="M7950 670 l0 -80 105 0 105 0 0 -285 0 -285 90 0 90 0 0 285 0 285 105 0 106 0 -3 78 -3 77 -297 3 -298 2 0 -80z"/>
                <path d="M8617 744 c-4 -4 -7 -169 -7 -366 l0 -358 95 0 95 0 0 150 0 150 135 0 135 0 0 -150 0 -150 90 0 90 0 0 365 0 365 -90 0 -90 0 0 -140 0 -140 -135 0 -134 0 -3 138 -3 137 -85 3 c-47 1 -89 0 -93 -4z"/>
                <path d="M10210 385 l0 -365 90 0 90 0 0 140 0 140 28 0 c24 0 34 -13 102 -138 l75 -137 108 -3 c59 -1 107 0 107 2 0 3 -41 72 -90 153 l-90 147 33 18 c134 68 150 273 28 354 -69 45 -119 54 -308 54 l-173 0 0 -365z m350 187 c30 -23 37 -65 16 -97 -16 -24 -85 -45 -151 -45 l-35 0 0 86 0 87 72 -6 c47 -4 81 -13 98 -25z"/>
                <path d="M10890 385 l0 -365 90 0 90 0 0 365 0 365 -90 0 -90 0 0 -365z"/>
                <path d="M11140 670 l0 -80 100 0 100 0 0 -285 0 -285 95 0 95 0 0 285 0 285 100 0 100 0 0 80 0 80 -295 0 -295 0 0 -80z"/>
                <path d="M11780 743 c0 -3 61 -100 135 -214 l135 -207 0 -151 0 -151 90 0 90 0 0 148 0 147 140 210 c77 116 140 213 140 218 0 4 -47 7 -104 7 l-105 0 -71 -125 c-39 -69 -75 -125 -80 -125 -5 0 -41 56 -80 125 l-71 125 -110 0 c-60 0 -109 -3 -109 -7z"/>
              </g>
            </svg>
          </div>

        </div>
      </div>
      
    </div>
    <!--END BANNER ROW-->

    <!--START BODY ROW-->
      
    <div id="login" class="login card fade">
      <div class="card-header">
        Login
      </div>
      <div class="card-body py-0">
        <div class="row mt-2 v-mid">
          <div class="col-12" id="login-alert">
            &nbsp;
          </div>
        </div>
        <div class="row mt-2 v-mid">
          <div class="col-5">
            User:
          </div>
          <div class="col-7">
            <input type="text" id="input-userid" style="width:9rem;" />
          </div>
        </div>
        <div class="row mt-2 v-mid">
          <div class="col-5">
            Password:
          </div>
          <div class="col-7">
            <input type="password" id="input-password" style="width:9rem;" />
          </div>
        </div>
        <div class="row mt-0 v-mid">
          <div class="col-5"></div>
          <div class="col-7 t-center">
            <a class="forgot-password" 
            href="mailto:Digital_Services@imda.gov.sg?subject=Forgotten SHN Portal Password">
              Forgot Password
            </a>
          </div>
        </div>
        <div class="row mt-3 v-mid">
          <div class="col-12 px-2" style="text-align:right;">
            <input type="button" class="mr-1" value="Cancel"/> <!--onclick="window.location.replace('https://www.locationreport.gov.sg');">-->
            <input type="button" onclick="login()" value="Login">
          </div>
        </div>
      </div>
    </div>
    <div id="curtain" class="fade show"></div>

    <div class="global-holder" id="holder">
      <div class="global-wrapper">
        
        <div class="row mx-0">
          <!--START FIRST COLUMN-->
          <div class="col col-sm-12 col-lg-8 px-0">

            <!--PIN INFO CARD-->
            <div class="card mx-1 my-1">

              <!--PIN INFO DISPLAY-->
              <div class="card-header px-1 py-2">
                PIN Management
              </div>
              <!--BODY-->
              <div class="card-body px-1 py-1">
                <div class="row mx-0 my-0">
                  <div class="col-4 col-sm-3 col-xl-2 px-0 py-0">
                    
                    <div>
                      <div id="list-pins-header" class="row mx-0 my-0">
                        <div class="col-12 px-1 py-0" id="list-info-pin"
                            onclick="sortAndBuildPinDetails(this.id)">
                          PIN
                        </div>
                      </div>
                    </div>
            
                    <div id="list-pins-wrapper"
                        class="vertical-scrollable-wrapper">
                      <div id="list-pins" class="row mx-0 my-0">
            
                        <div class="col-12">
                          &nbsp;
                        </div>
            
                      </div>
                    </div>
            
                  </div>
                  <div class="col-8 col-sm-9 col-xl-10 px-0 py-0 content">
            
                    <div id="list-header-wrapper"
                        class="horizontal-scrollable-wrapper
                                scrollable-hidden">
                      <div id="list-info-header" class="row mx-0 my-0">
            
                        <div class="col-1 px-1 py-0" id="list-info-mobile"
                            onclick="sortAndBuildPinDetails(this.id)">
                            Mobile
                        </div>
                        <div class="col-1 px-1 py-0" id="list-info-start"
                            onclick="sortAndBuildPinDetails(this.id)">
                          SHN Start
                        </div>
                        <div class="col-1 px-1 py-0" id="list-info-end"
                            onclick="sortAndBuildPinDetails(this.id)">
                          SHN End
                        </div>
                        <div class="col-1 px-1 py-0" id="list-info-max_dist"
                            onclick="sortAndBuildPinDetails(this.id)">
                          Max. Distance
                        </div>
                        <div class="col-1 px-1 py-0" id="list-info-last_update"
                            onclick="sortAndBuildPinDetails(this.id)">
                          Last Update
                        </div>
                        <div class="col-1 px-1 py-0" id="list-info-bio_last_push"
                            onclick="sortAndBuildPinDetails(this.id)">
                          Last Bio. Push
                        </div>
                        <div class="col-1 px-1 py-0" id="list-info-bio_last_update"
                            onclick="sortAndBuildPinDetails(this.id)">
                          Last Bio. Upd.
                        </div>
                        <div class="col-1 px-1 py-0">
                          Ad-hoc Push
                        </div>
                        <div class="col-1 px-1 py-0">
                          Multi Login
                        </div>
                        <div class="col-1 px-1 py-0">
                          Suspended
                        </div>
                        <div class="col-2 px-1 py-0">
                          &emsp;
                        </div>
                        <div class="d-none col-1 px-1 py-0">
                          Watch List
                        </div>
            
                      </div>
                    </div>
            
                    <div id="list-info-wrapper"
                        class="horizontal-scrollable-wrapper">
                      <div id="list-info" class="row mx-0 my-0">
            
                        <div class="col-12 px-1 py-0">
                          &nbsp;
                        </div>
            
                      </div>
                    </div>
            
                  </div>
                </div>
                <div class="row mx-0 mt-1">
                  <div class="col-12 px-0" style="text-align:center;">
                    <i class="fa fa-bars" aria-hidden="true"
                      id="list-pins-notch"></i>
                      <div style="text-align:right;">
                        <input type="button" value="Update"
                          id="btn-list-pins-update"/>
                      </div>
                  </div>
                </div>

                <!--END CONTENT-->
              </div>
              <!--END BODY-->
            </div>
            <!--END CARD-->

            <!--PIN GENERATION AND ASSIGNMENT CARD-->
            <div class="card mx-1 my-1">
              <!--TITLE IN HEADER-->
              <div class="card-header px-1 py-2">
                PIN Generation & Assignment
              </div>
              <!--BODY-->
              <div class="card-body px-1 py-1">
                <!--ADD NEW PINS TABLE FORM-->
                <table class="my-0">
                  <tbody><tr>
                    <th colspan="3">Generate New PINs</th>
                  </tr>
                  <!--ADD NEW PINS SETTING-->
                  <tr class="mb-0">
                    <td>
                      &emsp;<br>
                      Input Count
                      <br>&emsp;
                    </td>
                    <td>
                      <input type="number" id="input-count-newpins" style="width:5rem;" onchange="">
                    </td>
                    <td style="text-align: right;">
                      <input type="button" value="Generate" id="btn-generate-newpins"
                             onclick="generateNewPins()">
                    </td>
                  </tr>
                </tbody></table>

                <hr class="mt-0 mb-1">

                <div class="row mx-0 my-0">
                  <div class="col-12 px-0 py-0" width="100%">
                    
                    <div id="list-floating-header-wrapper">
                      <div id="list-floating-header" class="row mx-0 my-0">
                        <div class="col-6 px-1 py-0">
                          Available PINs
                        </div>
                        <div class="col-6 px-1 py-0" style="text-align:right;">
                          <span id="newpins">0</span> total
                        </div>
                      </div>
                    </div>
            
                    <div id="list-floating-wrapper" class="vertical-scrollable-wrapper">
                      <div id="list-floating" class="row mx-0 my-0">
                      </div>
                    </div>
                    <div class="row mx-0 mt-1">
                      <div class="col-12 px-0" style="text-align:center;">
                        <i class="fa fa-bars" aria-hidden="true"
                          id="list-floating-pins-notch"></i>
                          <div style="text-align:right;">
                            <input type="button" value="Download CSV"
                              onclick="downloadFloatingPins()"/>
                          </div>
                      </div>
                    </div>

                    <!--TO-DO-->
                    <div id="assign-pin-module" class="">
                      <hr class="mb-0 mt-2">

                      <!--PIN ASSIGNMENT MODULE-->
                      <div class="row mx-0">
                        <div class="col-12 px-0" id="input-newpin-alert">
                          &nbsp;
                        </div>
                      </div>
                      
                      <div class="row mx-0">
                        <div class="col-5 col-md-2 px-1 mt-2 v-mid">
                          PIN:
                        </div>
                        <div class="col-7 col-md-4 px-1 mt-2">
                          <input type="string" id="input-newpin" style="width:10.5rem;" disabled="" placeholder="Select PIN above" onchange="">
                        </div>
                        
                        <div class="col-5 col-md-2 px-1 mt-2 v-mid">
                          Mobile:
                        </div>
                        <div class="col-7 col-md-4 px-1 mt-2">
                          <input type="string" id="input-newpin-ccode" style="width:3rem"
                          placeholder="+65"/>
                          <input type="string" id="input-newpin-mobile" style="width:7.2rem;" onchange="">
                        </div>

                        <div class="col-5 col-md-2 px-1 mt-2 v-mid">
                          SHN Start:
                        </div>
                        <div class="col-7 col-md-4 px-1 mt-2 v-mid">
                          <input type="date" id="input-newpin-start" style="width:10.5rem;" onchange="">
                        </div>
                        
                        <div class="col-5 col-md-2 px-1 mt-2 v-mid">
                          SHN End:
                        </div>
                        <div class="col-7 col-md-4 px-1 mt-2 v-mid">
                          <input type="date" id="input-newpin-end" style="width:10.5rem;" onchange="">
                        </div>
                        <div class="col-6 px-0 mt-2 d-none" style="text-align: left;">
                          <input type="button" value="Bulk CSV Upload" onclick="" disabled>
                          &nbsp;
                          <span class="commentary">Bulk upload temporarily unavailable.</span>
                          <!--
                          <input type="file" id="bulkCSVUpload" value="Bulk CSV Upload" onchange="">-->
                        </div>

                        <div class="col-12 px-0 mt-2" style="text-align: right;">
                          <input type="button" value="Clear" onclick="clearInputNewMobile()">
                          <input type="button" value="Submit" onclick="submitInputNewMobile()">
                        </div>
                      </div>
                    </div>
            
                  </div>
                  <!--END CONTENT-->
                </div>
                <!--END BODY-->
              </div>
              <!--END CARD-->
            </div>
          </div>
          <!--END COLUMN-->

          <!--START SECOND COLUMN-->
          <div class="col col-sm-12 col-lg-4 px-0">

            <!--DAILY SCHEDULED PUSH NOTIFICATIONS CARD-->
            <div class="card mx-1 my-1">
              <div class="card-header px-1 py-2">
                Daily Scheduled Pushes
              </div>
              <!--BODY-->
              <div class="card-body px-1 py-1">
                <!--DAILY SCHEDULED PUSHES TABLE DISPLAY-->
                <table>
                  <tr>
                    <td colspan="3" id="today-push-date">
                      -
                    </td>
                  </tr>
                  <tr>
                    <th>Morning</th>
                    <th>Afternoon</th>
                    <th>Evening</th>
                  </tr>
                  <tr>
                    <td id="today-push-am">
                      -
                    </td>
                    <td id="today-push-pm">
                      -
                    </td>
                    <td id="today-push-ev">
                      -
                    </td>
                  </tr>
                  <tr>
                    <td id="today-push-am-status">
                      -
                    </td>
                    <td id="today-push-pm-status">
                      -
                    </td>
                    <td id="today-push-ev-status">
                      -
                    </td>
                  </tr>
                </table>
                
                <hr></hr>

                <!--DAILY SCHEDULED PUSHES CONFIG TABLE FORM-->
                <table>
                  <!--HEADER-->
                  <tr>
                    <th>Time of Day</th>
                    <th>Start</th>
                    <th>End</th>
                  </tr>
                  <!--MORNING SETTING-->
                  <tr>
                    <td>
                      &emsp;<br/>
                      Morning
                      <br/>&emsp;
                    </td>
                    <td>
                      <select id="input-push-am-start" name="am-start" disabled>
                        <option value="-1" disabled selected>-</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                      </select>&nbsp;:00
                    </td>
                    <td>
                      <select id="input-push-am-end" name="am-end" disabled>
                        <option value="-1" disabled selected>-</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                      </select>&nbsp;:59
                    </td>
                  </tr>
                  <!--AFTERNOON SETTING-->
                  <tr>
                    <td>
                      &emsp;<br/>
                      Afternoon
                      <br/>&emsp;
                    </td>
                    <td>
                      <select id="input-push-pm-start" name="pm-start" disabled>
                        <option value="-1" disabled selected>-</option>
                        <option value="12">12</option>
                        <option value="13">13</option>
                        <option value="14">14</option>
                        <option value="15">15</option>
                      </select>&nbsp;:00
                    </td>
                    <td>
                      <select id="input-push-pm-end" name="pm-end" disabled>
                        <option value="-1" disabled selected>-</option>
                        <option value="12">12</option>
                        <option value="13">13</option>
                        <option value="14">14</option>
                        <option value="15">15</option>
                      </select>&nbsp;:59
                    </td>
                  </tr>
                  <!--EVENING SETTING-->
                  <tr>
                    <td>
                      &emsp;<br/>
                      Evening
                      <br/>&emsp;
                    </td>
                    <td>
                      <select id="input-push-ev-start" name="ev-start" disabled>
                        <option value="-1" disabled selected>-</option>
                        <option value="16">16</option>
                        <option value="17">17</option>
                        <option value="18">18</option>
                        <option value="19">19</option>
                      </select>&nbsp;:00
                    </td>
                    <td>
                      <select id="input-push-ev-end" name="ev-end" disabled>
                        <option value="-1" disabled selected>-</option>
                        <option value="16">16</option>
                        <option value="17">17</option>
                        <option value="18">18</option>
                        <option value="19">19</option>
                      </select>&nbsp;:59
                    </td>
                  </tr>
                  <tr>
                    <td colspan="3" style="text-align: right;">
                      <span class="commentary">Edit feature temporarily unavailable.</span>&nbsp;
                      <input type="button" value="Update" disabled>
                    </td>
                  </tr>
                </table>
              </div>
              <!--END BODY-->
            </div>
            <!--END CARD-->

            <!--FRONT-END APP CONFIG CARD-->
            <div class="card mx-1 my-1">
              <div class="card-header px-1 py-2">
                Front-end App Configurations
              </div>
              <!--BODY-->
              <div class="card-body px-1 py-1">
                <!--FRONT-END APP CONFIG FORM-->
                <table>
                  <!--HEADER-->
                  <tr>
                    <th>Type</th>
                    <th>Current</th>
                    <th>New</th>
                  </tr>
                  <!--UPDATE FREQUENCY SETTING-->
                  <tr>
                    <td>
                      &emsp;<br/>
                      Update Frequency<br/><i>(in minutes)</i>
                      <br/>&emsp;
                    </td>
                    <td id="updfreq">
                      N/A
                    </td>
                    <td>
                      <input type="number" id="input-updfreq" style="width:3rem;"
                      onchange="" disabled>
                    </td>
                  </tr>
                  <!--MAX DISTANCE SETTING-->
                  <tr>
                    <td>
                      &emsp;<br/>
                      Maximum Distance<br/><i>(in metres)</i>
                      <br/>&emsp;
                    </td>
                    <td id="maxdist">
                      N/A
                    </td>
                    <td>
                      <input type="number" id="input-maxdist" style="width:3rem;"
                      onchange="" disabled>
                    </td>
                  </tr>
                  <!--MAX VIOLATIONS SETTING-->
                  <tr>
                    <td>
                      &emsp;<br/>
                      Maximum Violations<br/><i>(in amount)</i>
                      <br/>&emsp;
                    </td>
                    <td id="maxvltn">
                      N/A
                    </td>
                    <td>
                      <input type="number" id="input-maxvltn" style="width:3rem;"
                      onchange="" disabled>
                    </td>
                  </tr>
                  <!--OTP REQUEST INTERVAL SETTING-->
                  <tr class="d-none">
                    <td>
                      &emsp;<br/>
                      OTP Request Interval<br/><i>(in seconds)</i>
                      <br/>&emsp;
                    </td>
                    <td id="otpireq">
                      N/A
                    </td>
                    <td>
                      <input type="number" id="input-otpireq" style="width:3rem;"
                      onchange="">
                    </td>
                  </tr>

                  <!--UPDATE SETTINGS BUTTON-->
                  <tr>
                    <td colspan="3" style="text-align: right;">
                      <span class="commentary">Edit feature temporarily unavailable.</span>&nbsp;
                      <input type="button" value="Update" disabled>
                    </td>
                  </tr>
                  
                </table>
              </div>
              <!--END BODY-->
            </div>
            <!--END CARD-->
          </div>
          <!--END COLUMN-->

        </div>
        <!--END ROW-->
      </div>
    </div>
    <script>
      $(function(){
        $("#list-info-wrapper").scroll(function(){
          $("#list-header-wrapper")
            .scrollLeft($("#list-info-wrapper").scrollLeft());
        })
        $("#list-pins-wrapper").scroll(function(){
          $("#list-info-wrapper")
            .scrollTop($("#list-pins-wrapper").scrollTop());
        })
      });
    </script>
    <script>

      // URL to get biometric push notification config data.
      var get_bio_config = "https://lufthansadsl.tk/virusrip/otp/getbioconfig";
      // URL to get scheduled push notification info by date.
      var get_scheduled_push_by_date = "https://lufthansadsl.tk/virusrip/otp/getbio";
      // URL to get front-end config data.
      var get_frontend_config = "https://lufthansadsl.tk/virusrip/novel/config";
      // URL to get all data of active PINs.
      var get_all = `https://lufthansadsl.tk/virusrip/novel/get/1`;
      // URL to get all floating pins.
      var get_floating_pins = "https://lufthansadsl.tk/virusrip/novel/floatingpins";
      // URL to generate new floating pins.
      var generate_floating_pins = "https://lufthansadsl.tk/virusrip/otp/genpins";
      // URL to set floating pin with SHN assignee details.
      var set_floating_pins = "https://lufthansadsl.tk/virusrip/otp/setfloatingpins";
      // URL to set multi-login.
      var set_multi_login = "https://lufthansadsl.tk/virusrip/novel/multilogin";
      // URL to set suspended.
      var set_suspended = "https://lufthansadsl.tk/virusrip/novel/suspension";

      var debug = true;
      var render_mode;

      var today_push_date = document.getElementById('today-push-date');
      var today_push_am = document.getElementById('today-push-am');
      var today_push_am_status = document.getElementById('today-push-am-status');
      var today_push_pm = document.getElementById('today-push-pm');
      var today_push_pm_status = document.getElementById('today-push-pm-status');
      var today_push_ev = document.getElementById('today-push-ev');
      var today_push_ev_status = document.getElementById('today-push-ev-status');

      var input_push_am_start = document.getElementById('input-push-am-start');
      var input_push_am_end   = document.getElementById('input-push-am-end');
      var input_push_pm_start = document.getElementById('input-push-pm-start');
      var input_push_pm_end   = document.getElementById('input-push-pm-end');
      var input_push_ev_start = document.getElementById('input-push-ev-start');
      var input_push_ev_end   = document.getElementById('input-push-ev-end');
      var input_pin_generation = document.getElementById('input-pin-generation');

      var display_newpins = document.getElementById('newpins');
      var display_updfreq = document.getElementById('updfreq');
      var display_maxdist = document.getElementById('maxdist');
      var display_maxvltn = document.getElementById('maxvltn');

      var table_pins = document.getElementById('table-pins');

      var push_schedule;

      window.onload = function() {
        renderPage();
        var userid = localStorage.getItem('userid');
        var orgid = localStorage.getItem('orgid');
        var token = localStorage.getItem('token');
        if (userid && orgid && token) {
          //TO-DO
          //Verify with backend if token is still valid.
          clearLogin();
          loadPage();
          clearCurtain();
        } else {
          showLogin();
        }
      }

      var input_userid = document.getElementById('input-userid');
      var input_password = document.getElementById('input-password');

      function login() {
        var userid = input_userid.value;
        var password = input_password.value;
        var alert = document.getElementById('login-alert');

        if (userid == "") {
          alert.innerHTML = "Empty user id field.";
          return;
        }
        if (userid.length < 5) {
          alert.innerHTML = "Invalid user id";
        } 
        if (password == "") {
          alert.innerHTML = "Empty password field.";
          return;
        }

        var payload = {
          'userid': userid,
          'password': password
        }
        //TO-DO
        //postReqCallbackAuth(url, payload, loginResult);
        
        //TO-DO
        //Actual login credentials checking with backend.
        if (userid == "imda-admin01" && password == "ABC!@#" ||
        userid == "ica-admin01" && password == "P@SSW)RD" ||
        userid == "moh-admin01" && password == "DEF!@#")
        {
          alert.innerHTML = "&nbsp;";
        } else {
          alert.innerHTML = "Wrong login credentials.";
          return;
        }
        var result = {
          'userid': userid
        }
        if (userid == "imda-admin01") {
          result.token = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyaWQiOiJpbWRhLWFkbWluMDEiLCJ0aW1lIjoiMTU4NDY0NDM4MDAwMCJ9._Df_FACCZ3jsoPy1X7xQnkNDPv36qZYsqBB1bLDxKU4",
          result.orgid = "IMDA"
        }
        if (userid == "ica-admin01") {
          result.token = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyaWQiOiJpY2EtYWRtaW4wMSIsInRpbWUiOiIxNTg0NjQ0MzgwMDAwIn0.erGu55QoCtX7jYEdr-s7VUsK12wcRd634F3BRbLSRTw",
          result.orgid = "ICA"
        }
        if (userid == "moh-admin01") {
          result.token = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyaWQiOiJtb2gtYWRtaW4wMSIsIm9yZ2lkIjoiTU9IIn0.SGbTAL9ZKRCyhs-TPguyF35GHlnFytV8pdFW6OVLIOE",
          result.orgid = "MOH"
        }

        loginResult(result)
      }

      function loginResult(result) {
        localStorage.setItem('userid', result.userid);
        localStorage.setItem('token', result.token);
        localStorage.setItem('orgid', result.orgid);
        loadPage();
        clearCurtain();
        clearLogin();
      }

      function loadPage() {
        var orgid = localStorage.getItem('orgid');

        getReqCallbackAuth(`${get_all}/${orgid}`, loadPinDetails);
        getReqCallback(`${get_floating_pins}/${orgid}`, loadFloatingPins);
        getDailySchedule();
        getReqCallback(get_bio_config, loadBioConfig);
        getReqCallback(get_frontend_config, loadFrontEndConfig);
      }
      
      function showLogin() {
        var login = document.getElementById('login');
        login.style['z-index'] = 2;
        login.classList.add('show');
      }

      function clearLogin() {
        var login = document.getElementById('login');
        login.classList.remove('show');
        
        setTimeout(function() {
          login.classList.add('d-none');
          login.style['z-index'] = -99;
        }, 500);
      }

      function clearCurtain() {
        var curtain = document.getElementById('curtain');
        curtain.classList.remove('show');
        
        setTimeout(function() {
          curtain.classList.add('d-none');
        }, 500);
      }

      var list_pins = document.getElementById('list-pins');
      var list_pins_header = document.getElementById('list-pins-header');
      var list_pins_wrapper = document.getElementById('list-pins-wrapper');
      var list_info = document.getElementById('list-info');
      var list_info_header = document.getElementById('list-info-header');
      var list_info_wrapper = document.getElementById('list-info-wrapper');
      var list_pins_notch = document.getElementById('list-pins-notch');

      list_pins_notch.addEventListener('click', function() {
        if (list_pins_wrapper.classList.contains('expanded')) {
          list_pins_wrapper.classList.remove('expanded'),
          list_info_wrapper.classList.remove('expanded');
        } else {
          list_pins_wrapper.classList.add('expanded'),
          list_info_wrapper.classList.add('expanded');
        }
      });

      var list_floating_wrapper = document.getElementById('list-floating-wrapper');
      var list_floating_pins = document.getElementById('list-floating');
      var list_floating_pins_notch = document.getElementById('list-floating-pins-notch');

      list_floating_pins_notch.addEventListener('click', function() {
        if (list_floating_wrapper.classList.contains('expanded')) {
          list_floating_wrapper.classList.remove('expanded');
        } else {
          list_floating_wrapper.classList.add('expanded');
        }
      });

      pins_floating = [];
      function loadFloatingPins(details) {
        pins_floating.length = 0;
        var _html = "";
        list_floating_pins.innerHTML = _html;

        details = details.message.result;
        var _length = details.length;
        display_newpins.innerHTML = _length;

        for (i = 0; i < _length; i++) {
          pins_floating.push(details[i].pin);
          var _shade = (i % 2 == 0) ? 'shade' : '';
          _html = `<div class="col-4 col-lg-3 col-xl-2 px-1 py-0 ${_shade}"
            onclick="inputNewPin('${details[i].pin}');">${details[i].pin}</div>`;
          list_floating_pins.insertAdjacentHTML('beforeend', _html);
        }
        _html = '<div class="col-12 px-1 py-0">&nbsp;</div>';
        list_floating_pins.insertAdjacentHTML('beforeend', _html);
      }

      function downloadFloatingPins() {
        var orgid = localStorage.getItem('orgid');
        var str = "Pin,Mobile,SHN Start Date,SHN End Date";
        for (i = 0; i < pins_floating.length; i++) {
          str += '\n';
          str += `${pins_floating[i]},,,`;
        }
        var fileName = `pins_${orgid}_${moment().format('DD-MM-YYYY_HH:MM')}`;
        var uri = 'data:text/csv;charset=utf-8,' + str;
        var downloadLink = document.createElement('a');
        downloadLink.href = uri;
        downloadLink.download = `${fileName}.csv`;

        document.body.appendChild(downloadLink);
        downloadLink.click();
        document.body.removeChild(downloadLink);
      }

      function bulkCSVUpload() {
        var uploadLink = document.createElement('input');
        uploadLink.setAttribute('type', 'file');
      }

      var input_count_newpins = document.getElementById('input-count-newpins');
      var input_newpin = document.getElementById('input-newpin');
      var input_newpin_ccode = document.getElementById('input-newpin-ccode');
      var input_newpin_mobile = document.getElementById('input-newpin-mobile');
      var input_newpin_start = document.getElementById('input-newpin-start');
      var input_newpin_end =  document.getElementById('input-newpin-end');
      var input_newpin_alert = document.getElementById('input-newpin-alert');

      function inputNewPin(_pin) {
        input_newpin.value = _pin;
      }

      function clearInputNewMobile() {
        input_newpin.value = input_newpin.value = null;
      }

      function submitInputNewMobile() {
        var _pin = input_newpin.value;
        var _mobile = input_newpin_mobile.value;
        var _ccode = input_newpin_ccode.value;
        _ccode = _ccode.replace(/\+/g, "");
        if (_ccode == "") {
          _mobile = "65" + _mobile;
        } else {
          _mobile = _ccode + _mobile;
        }
        console.log(_mobile);
        var _loastart = input_newpin_start.value;
        var _loastart_str;
        var _loaend =  input_newpin_end.value;
        var _loaend_str;
        var skip = false;

        if (_pin.length != 8) {
          input_newpin_alert.innerHTML = 'Error: Invalid PIN',
          input_newpin_alert.classList.add('error-alert'),
          input_newpin_alert.classList.remove('success-alert');
          skip = true;
        }
        if (!skip && _mobile.length < 8) {
          input_newpin_alert.innerHTML = 'Error: Invalid mobile length',
          input_newpin_alert.classList.add('error-alert'),
          input_newpin_alert.classList.remove('success-alert');
          skip = true;
        }
        if (!skip) {
          if (_loastart != "") {
            _loastart = _loastart.split('-');
            _loastart = _loastart_str = `${_loastart[2]}/${_loastart[1]}/${_loastart[0]}`;
            _loastart = moment(_loastart, "MM/DD/YYYY").valueOf();
          } else {
            input_newpin_alert.innerHTML = 'Error: Empty SHN Start Date.',
            input_newpin_alert.classList.add('error-alert'),
            input_newpin_alert.classList.remove('success-alert'); 
            skip = true;
          }
        }
        if (!skip) {
          if (_loaend != "") {
            _loaend = _loaend.split('-');
            _loaend = _loaend_str = `${_loaend[2]}/${_loaend[1]}/${_loaend[0]}`;
            _loaend = moment(_loaend, "MM/DD/YYYY").valueOf();
          } else {
            input_newpin_alert.innerHTML = 'Error: Empty SHN End Date.',
            input_newpin_alert.classList.add('error-alert'),
            input_newpin_alert.classList.remove('success-alert');
            skip = true;
          }
        }
        if (!skip) {
          if (_loaend <= _loastart) {
            input_newpin_alert.innerHTML = 'Error: Invalid SHN Start and End Dates.',
            input_newpin_alert.classList.add('error-alert'),
            input_newpin_alert.classList.remove('success-alert');
            skip = true;
          }
        }

        var object = {};

        if (!skip) {
          object['orgid'] = localStorage.getItem('orgid');
          object['pin'] = _pin;
          object['mobile'] = _mobile;
          object['loastart'] = _loastart_str;
          object['loaend'] = _loaend_str;
          object['maxdist'] = 10;
          object['maxvltn'] = 6;
          object['updfreq'] = 10;
        } else {
          setTimeout(function() {
            input_newpin_alert.innerHTML = '&nbsp;';
          }, 2500);
          return;
        }
        postReqCallbackAuth(set_floating_pins, object, submittedMobile);
      }

      function submittedMobile(result) {
        if (result.error) {
          var _mobile = result.error.error;
          _mobile = _mobile.split('{');
          _mobile = _mobile[1];
          _mobile = _mobile.split('}');
          _mobile = _mobile[0];
          input_newpin_alert.innerHTML = `Error:  ${_mobile} has already been registered.`,
          input_newpin_alert.classList.add('error-alert'),
          input_newpin_alert.classList.remove('success-alert');
        }
        else if (result.message) {
          var _mobile = result.message.mobile;
          input_newpin_alert.innerHTML = `Success:  ${_mobile} has been successfully registered.`,
          input_newpin_alert.classList.remove('error-alert'),
          input_newpin_alert.classList.add('success-alert');
          clearInputNewMobile();
        }
        
        setTimeout(function() {
          input_newpin_alert.innerHTML = '&nbsp;';
        }, 2500);
      }

      function generateNewPins() {
        var count = input_count_newpins.value;
        var orgid = localStorage.getItem('orgid');
        if (count > 0 && orgid) {
          getReqCallbackAuth(`${generate_floating_pins}/${count}/${orgid}`, reviewGeneratedPins);
        }
      }

      function reviewGeneratedPins(item) {
        input_count_newpins.value = "";
        var orgid = localStorage.getItem('orgid');
        var count = item.message.length;
        var plural = (count > 1) ? "s" : "";
        alert(`${count} PIN${plural} generated.`);
        getReqCallback(`${get_floating_pins}/${orgid}`, loadFloatingPins);
      }
      
      var pin_details = [];
      function loadPinDetails(details) {
        details = details.message;
        for (i = 0; i < details.length; i++) {
          var _pin = details[i].pin;
          var _mobile = details[i].mobile;
          if (!_mobile || _mobile == "") { continue; }
          var _end = details[i].hrloaend;
          if (!_end) {
            _end = details[i].loaend;
            _end = moment(_end, "DD/MM/YYYY");
          }
          else { _end = parseInt(_end); }
          var _cur = Date.now();
          if (_cur > _end) { continue; }
          var _end_str = moment(_end).format("DD/MM/YYYY");
          var _start = details[i].hrloastart;
          if (!_start) {
            _start = details[i].loastart;
            _start = moment(_start, "DD/MM/YYYY");
          }
          else { _start = parseInt(_start); }
          var _start_str = moment(_start).format("DD/MM/YYYY");
          var _max_dist = details[i].maxdist;
          var _lastupdate = details[i].lastupdate;
          var _lastupdate_str = moment(_lastupdate).format("DD/MM hh:mm");
          var _biolastpush = details[i].biopush.length;
          var _biolastpush_str = "";
          if (_biolastpush > 0) {
            _biolastpush = details[i].biopush[_biolastpush - 1].ts;
            _biolastpush_str = moment(_biolastpush).format("DD/MM hh:mm");
          } else {
            _biolastpush = 0;
            _biolastpush_str = '-';
          }
          var _biolastupdate = details[i].biolastupdate;
          var _biolastupdate_str = moment(_biolastupdate).format("DD/MM hh:mm");
          var _multilogin = details[i].multilogin;
          var _issuspended = details[i].issuspended;

          var pin_detail = {
            pin: _pin,
            mobile: _mobile,
            start: _start,
            start_str: _start_str,
            end: _end,
            end_str: _end_str,
            max_dist: _max_dist,
            last_update: _lastupdate,
            last_update_str: _lastupdate_str,
            bio_last_push: _biolastpush,
            bio_last_push_str: _biolastpush_str,
            bio_last_update: _biolastupdate,
            bio_last_update_str: _biolastupdate_str,
            multi_login: _multilogin,
            is_suspended: _issuspended
          }
          pin_details.push(pin_detail);
        }
        buildPinDetailsTable();
      }

      var sort_by = "";
      var sort_order = "";

      function displayPinDetailsHeader(_id) {
        var _sort_by = _id.split('-')
        _sort_by = _sort_by[_sort_by.length - 1];
        var _sort_symbol = "";
        var _element;
        if (sort_by == "") {
          sort_by = _sort_by;
          sort_order = "asc";
          _sort_symbol = "";
          _element = document.getElementById(_id);
        }
        else if (sort_by == _sort_by) {
          if (sort_order == "asc") {
            sort_order = "desc";
            _sort_symbol = "";
          }
          else {
            sort_order = "asc";
          _sort_symbol = "";
          }
          _element = document.getElementById(_id);
          sort_by = _sort_by;
        }
        else {
          var _element = document.getElementById(`list-info-${sort_by}`); 
          _element.innerHTML = getPinDetailsInfoHeader(sort_by);
          _element = document.getElementById(_id);
          sort_by = _sort_by;
          sort_order = "asc";
          _sort_symbol = "";
        }
        _element.innerHTML = getPinDetailsInfoHeader(sort_by) + "&nbsp;"
          + _sort_symbol;
      }

      function sortAndBuildPinDetails(_id) {
        displayPinDetailsHeader(_id);
        sortPinDetails();
        buildPinDetailsTable();
      }

      function sortPinDetails() {
        console.log('sort_by', sort_by);
        console.log('sort_order', sort_order);
        console.log(pin_details);
        pin_details = _.orderBy(pin_details, [sort_by], [sort_order]);
        console.log(pin_details);
      }

      function buildPinDetailsTable() {
        var _pin_details_content = "";
        var _pin_details_info_content = "";

        for (i = 0; i < pin_details.length; i++) {
          var _pin_detail = pin_details[i];
          _pin_details_content += buildPinDetailsContent(i, _pin_detail.pin);
          _pin_details_info_content += buildPinDetailsInfoContent(i, _pin_detail);
        }
        _pin_details_content += '<div class="col-12 px-1 py-0">&nbsp;</div>';
        _pin_details_info_content += '<div class="col-12 px-1 py-0">&nbsp;</div>';

        list_pins.innerHTML = _pin_details_content,
        list_info.innerHTML = _pin_details_info_content;
      }

      function getPinDetailsInfoHeader(_sort_by) {
        switch (_sort_by) {
          case 'pin':             return "PIN";
          case 'mobile':          return "Mobile";
          case 'start':           return "SHN Start";
          case 'end':             return "SHN End";
          case 'max_dist':        return "Max. Distance"
          case 'last_update':     return "Last Update";
          case 'bio_last_push':   return "Last Bio. Push";
          case 'bio_last_update': return "Last Bio. Upd.";
          case 'watch_list_item': return "Watch List";
          default:                return "";
        }
      }

      function buildPinDetailsContent(_index, _pin) {
        var _div_class = "col-12 px-1 py-0 v-mid";
        var _shade = (_index % 2 == 0) ? 'shade' : '';
        return buildContent(_div_class, _shade, _pin);
      }

      function buildContent(div_class, shade, value) {
        return `<div class="${div_class} ${shade}">${value}</div>`;
      }

      var pins_ad_hoc_push = [];
      var pins_multi_login = [];
      var pins_non_multi_login = [];
      var pins_suspended = [];
      var pins_non_suspended = [];
      var pins_watch_list = [];

      function buildPinDetailsInfoContent(_index, _pin_detail) {
        var _div_class = "col-1 px-1 py-0 mx-0 my-0 v-mid";
        var _shade = (_index % 2 == 0) ? 'shade' : '';
        var _html = "";
        _html += buildContent(_div_class, _shade, _pin_detail.mobile);
        _html += buildContent(_div_class, _shade, _pin_detail.start_str);
        _html += buildContent(_div_class, _shade, _pin_detail.end_str);
        _html += buildContent(_div_class, _shade, _pin_detail.max_dist);
        _html += buildContent(_div_class, _shade, _pin_detail.last_update_str);
        _html += buildContent(_div_class, _shade, _pin_detail.bio_last_push_str);
        _html += buildContent(_div_class, _shade, _pin_detail.bio_last_update_str);

        var _ad_hoc_push =
          `<input type="checkbox"
          onclick="(this.checked)
          ? pins_ad_hoc_push.push('${_pin_detail.pin}')
          : pins_ad_hoc_push.splice(pins_ad_hoc_push.indexOf('${_pin_detail.pin}'), 1)"/>`
        _html += buildContent(_div_class, _shade, _ad_hoc_push);

        var _multi_login = (_pin_detail.multi_login == "true")
          ? `<input type="checkbox" checked
            onclick="(this.checked)
            ? pinArraysPushSplice('${_pin_detail.pin}', pins_multi_login, pins_non_multi_login)
            : pinArraysPushSplice('${_pin_detail.pin}', pins_non_multi_login, pins_multi_login)"/>`
          : `<input type="checkbox"
            onclick="(this.checked)
            ? pinArraysPushSplice('${_pin_detail.pin}', pins_multi_login, pins_non_multi_login)
            : pinArraysPushSplice('${_pin_detail.pin}', pins_non_multi_login, pins_multi_login)"/>`
        _html += buildContent(_div_class, _shade, _multi_login);

        var _is_suspended = (_pin_detail.is_suspended == "true")
          ? `<input type="checkbox" checked
            onclick="(this.checked)
            ? pinArraysPushSplice('${_pin_detail.pin}', pins_suspended, pins_non_suspended)
            : pinArraysPushSplice('${_pin_detail.pin}', pins_non_suspended, pins_suspended)"/>`
          : `<input type="checkbox"
            onclick="(this.checked)
            ? pinArraysPushSplice('${_pin_detail.pin}', pins_suspended, pins_non_suspended)
            : pinArraysPushSplice('${_pin_detail.pin}', pins_non_suspended, pins_suspended)"/>`
        _html += buildContent(_div_class, _shade, _is_suspended);

        /*
        var _watch_list_item = (_pin_detail.watch_list_item == "true")
          ? `<input type="checkbox" checked
            onclick="(this.checked)
            ? pins_watch_list.push('${_pin_detail.pin}')
            : pins_watch_list.splice(pins_watch_list.indexOf('${_pin_detail.pin}'), 1)"/>`
          : `<input type="checkbox"
            onclick="(this.checked)
            ? pins_watch_list.push('${_pin_detail.pin}')
            : pins_watch_list.splice(pins_watch_list.indexOf('${_pin_detail.pin}'), 1)"/>`
        _html += buildContent(_div_class, _shade, _watch_list_item);
        */

        _html += "<div class='col-2 px-0 py-0'>&emsp;</div>";

        return _html;
        console.log(_html);
      }

      function pinArraysPushSplice(_pin, toPush, toSplice) {
        toPush.push(_pin);
        toSplice.splice(toSplice.indexOf(_pin), 1);
      }

      var btn_list_pins_update = document.getElementById('btn-list-pins-update');
      btn_list_pins_update.addEventListener('click', function() {
        var length = pins_ad_hoc_push.length;
        if (length > 0) {
          // POST request for ad hoc push for pins in pins_ad_hoc_push array.
          console.log('Ad-hoc push:', pins_ad_hoc_push.join(', '));
          pins_ad_hoc_push.length = 0;
        }
        length = pins_multi_login.length;
        if (length > 0) {
          // POST request to set multi_login to TRUE for these pins.
          console.log('Multi-login enabled:', pins_multi_login.join(', '));
          postReqAuth(set_multi_login, { "pins": pins_multi_login, "value": "true"});
          pins_multi_login.length = 0;
        }
        length = pins_non_multi_login.length;
        if (length > 0) {
          // POST request to set multi_login to FALSE for these pins.
          console.log('Multi-login disabled:', pins_non_multi_login.join(', '));
          postReqAuth(set_multi_login, { "pins": pins_non_multi_login, "value": "false"});
          pins_non_multi_login.length = 0;
        }
        length = pins_suspended.length;
        if (length > 0) {
          // POST request to set suspended to TRUE for these pins.
          console.log('Suspended:', pins_suspended.join(', '));
          postReqAuth(set_suspended, { "pins": pins_suspended, "value": "true"});
          pins_suspended.length = 0;
        }
        length = pins_non_suspended.length;
        if (length > 0) {
          // POST request to set suspended to FALSE for these pins.
          console.log('Suspended:', pins_non_suspended.join(', '));
          postReqAuth(set_suspended, { "pins": pins_non_suspended, "value": "false"});
          pins_non_suspended.length = 0;
        }
      });

      function loadFrontEndConfig(config) {
        config = config.message;
        display_updfreq.innerText = config.updfreq;
        display_maxdist.innerText = config.maxdist;
        display_maxvltn.innerText = config.maxvltn;
      }

      function loadBioConfig(config) {
        config = config.message.result[0].timings;
        input_push_am_start.value = config.morStart;
        input_push_am_end.value = config.morEnd;
        input_push_pm_start.value = config.aftStart;
        input_push_pm_end.value = config.aftEnd;
        input_push_ev_start.value = config.eveStart;
        input_push_ev_end.value = config.eveEnd;
      }

      function renderPage() {
        render_mode = sessionStorage.getItem('render-mode');
        if (debug) { console.log('render_mode', render_mode); }
        if (!render_mode) {
          render_mode = 'light';
          sessionStorage.setItem('render-mode', render_mode);
        } else if (render_mode == 'light') {
          document.body.classList.remove('dark');
        } else if (render_mode == 'dark') {
          document.body.classList.add('dark');
        }
      }

      function getDailySchedule() {
        var today = moment().format("DD-MM-YYYY");
        getReqCallback(`${get_scheduled_push_by_date}/${today}`, loadDailySchedule);
      }

      function processPushTiming(today, timing) {
        var ts = moment(`${today} ${timing}`, "DD-MM-YYYY h:m:s").valueOf();
        timing = timing.split(':');
        for (i = 0; i < timing.length; i++) {
          timing[i] = (timing[i] < 10) ? `0${timing[i]}` : timing[i];
        }
        timing = timing.join(':');
        return {
          ts: ts,
          timing: timing
        }
      }

      function loadDailySchedule(push_schedule) {
        push_schedule = push_schedule.message.result[0];
        var push_today = push_schedule.today;
        today_push_date.innerText = push_today;
        var push_am = push_schedule.scheduled.morning;
        var result = processPushTiming(push_today, push_am);
        var push_am_ts = result.ts;
        push_am = result.timing;
        console.log('push_am', push_am);
        var push_pm = push_schedule.scheduled.afternoon;
        result = processPushTiming(push_today, push_pm);
        var push_pm_ts = result.ts;
        push_pm = result.timing;
        console.log('push_pm', push_pm);
        var push_ev = push_schedule.scheduled.evening;
        result = processPushTiming(push_today, push_ev);
        var push_ev_ts = result.ts;
        push_ev = result.timing;
        console.log('push_ev', push_ev);
        var cur = Date.now();

        console.log('am', push_am_ts);
        console.log('pm', push_pm_ts);
        console.log('ev', push_ev_ts);
        console.log('cur', cur);

        var remove, add, status;
        if (cur >= push_am_ts) {
          setScheduledPushesStatus(today_push_am, today_push_am_status, true);
        } else {
          setScheduledPushesStatus(today_push_am, today_push_am_status, false);
        }
        today_push_am.innerText = push_am;

        if (cur >= push_pm_ts) {
          setScheduledPushesStatus(today_push_pm, today_push_pm_status, true);
        } else {
          setScheduledPushesStatus(today_push_pm, today_push_pm_status, false);
        }
        today_push_pm.innerText = push_pm;

        if (cur >= push_ev_ts) {
          setScheduledPushesStatus(today_push_ev, today_push_ev_status, true);
        } else {
          setScheduledPushesStatus(today_push_ev, today_push_ev_status, false);
        }
        today_push_ev.innerText = push_ev;
      }
      
      function setScheduledPushesStatus(element, element_status, done) {
        if (done) {
          element.classList.remove('pending'),
          element.classList.add('done'),
          element_status.classList.remove('pending'),
          element_status.classList.add('done'),
          element_status.innerHTML = '<i class="fa fa-check" aria-hidden="true"></i>';
        } else {
          element.classList.remove('done'),
          element.classList.add('pending'),
          element_status.classList.remove('done'),
          element_status.classList.add('pending'),
          element_status.innerHTML = '<i class="fa fa-hourglass-half" aria-hidden="true"></i>';
        }
      }

      function toggleDarkMode() {
        if (render_mode == 'light') {
          document.body.classList.add('dark');
          render_mode = 'dark';
        } else if (render_mode == 'dark') {
          document.body.classList.remove('dark');
          render_mode = 'light';
        }
        sessionStorage.setItem('render-mode', render_mode);
        if (debug) { console.log('render_mode', render_mode); }
      }

      function getScheduledPushes() {
        return {
          'today': moment().format('DD-MM-YYYY'),
          'timing': {
            'morstart': 8,
            'morend': 11,
            'aftstart': 12,
            'aftend': 14,
            'evestart': 15,
            'eveend': 18
          },
          'scheduled': {
            'morning': "11:24:25",
            'afternoon': "14:25:59",
            'evening': "16:54:54"
          }
        }
      }

      var retry = 0;
      var grabInterval = 600000; // 5 minutes
      var lastGrab;
      var lastPost;

      function getReqCallback(url, callback) {
        if (debug) { console.log(url); }
        $.ajax({
          url : `${url}`,
          type: "GET",
          processData: false,
          contentType: 'application/json',
          success: function(data, textStatus, jqXHR)
          {
            if (debug) { console.log(textStatus); console.log(data); }

            retry = 0;
            lastGrab = Date.now();
            
            callback(data);
          },
          error: function (jqXHR, textStatus, errorThrown)
          {
            console.error(`${errorThrown} - ${textStatus}`);

            retry += 1000;
            setTimeout(function() {
              getReqCallback(url, callback);
            }, retry);
          }
        });
      }
      
      function getReqCallbackAuth(url, callback) {
        if (debug) { console.log(url); }
        var token = localStorage.getItem('token');
        if (!token) { postReqCallback(url, obj, callback); }
        $.ajax({
          url : `${url}`,
          type: "GET",
          headers: { Authorization: $`Bearer ${token}` },
          processData: false,
          contentType: 'application/json',
          success: function(data, textStatus, jqXHR)
          {
            if (debug) { console.log(textStatus); console.log(data); }

            retry = 0;
            lastGrab = Date.now();
            
            callback(data);
          },
          error: function (jqXHR, textStatus, errorThrown)
          {
            console.error(`${errorThrown} - ${textStatus}`);

            retry += 1000;
            setTimeout(function() {
              getReqCallback(url, callback);
            }, retry);
          }
        });
      }
      
      function postReqCallback(url, obj, callback) {
        if (debug) {
          console.log("url", url);
          console.log("obj", obj);
        }
        $.ajax({
          url : `${url}`,
          type: "POST",
          processData: false,
          contentType: 'application/json',
          data : JSON.stringify(obj),
          success: function(data, textStatus, jqXHR)
          {
            if (debug) { console.log(textStatus); console.log(data); }

            retry = 0;
            lastPost = Date.now();
            
            callback(data);
          },
          error: function (jqXHR, textStatus, errorThrown)
          {
            console.error(textStatus);

            retry += 1000;
            setTimeout(function() {
              postReqCallback(url, obj, callback);
            }, retry);
          }
        });
      }

      function postReq(url, obj) {
        if (debug) {
          console.log("url", url);
          console.log("obj", obj);
        }
        $.ajax({
          url : `${url}`,
          type: "POST",
          processData: false,
          contentType: 'application/json',
          data : JSON.stringify(obj),
          success: function(data, textStatus, jqXHR)
          {
            if (debug) { console.log(textStatus); console.log(data); }

            retry = 0;
            lastPost = Date.now();
          },
          error: function (jqXHR, textStatus, errorThrown)
          {
            console.error(textStatus);

            retry += 1000;
            setTimeout(function() {
              postReq(url, obj);
            }, retry);
          }
        });
      }
      
      function postReqAuth(url, obj) {
        if (debug) {
          console.log("url", url);
          console.log("obj", obj);
        }
        var token = localStorage.getItem('token');
        if (!token) { postReq(url, obj); }
        $.ajax({
          url : `${url}`,
          type: "POST",
          headers: { Authorization: $`Bearer ${token}` },
          processData: false,
          contentType: 'application/json',
          data : JSON.stringify(obj),
          success: function(data, textStatus, jqXHR)
          {
            if (debug) { console.log(textStatus); console.log(data); }

            retry = 0;
            lastPost = Date.now();
          },
          error: function (jqXHR, textStatus, errorThrown)
          {
            console.error(textStatus);

            retry += 1000;
            setTimeout(function() {
              postReqAuth(url, obj);
            }, retry);
          }
        });
      }
      
      function postReqCallbackAuth(url, obj, callback) {
        if (debug) {
          console.log("url", url);
          console.log("obj", obj);
        }
        var token = localStorage.getItem('token');
        if (!token) { postReqCallback(url, obj, callback); }
        $.ajax({
          url : `${url}`,
          type: "POST",
          headers: { Authorization: $`Bearer ${token}` },
          processData: false,
          contentType: 'application/json',
          data : JSON.stringify(obj),
          success: function(data, textStatus, jqXHR)
          {
            if (debug) { console.log(textStatus); console.log(data); }

            retry = 0;
            lastPost = Date.now();
            
            callback(data);
          },
          error: function (jqXHR, textStatus, errorThrown)
          {
            console.error(textStatus);

            retry += 1000;
            setTimeout(function() {
              postReqCallbackAuth(url, obj, callback);
            }, retry);
          }
        });
      }
    </script>
  </body>
</html>